<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Gallifrey&#39;s Blog</title>
  
  <subtitle>个人文章归档</subtitle>
  <link href="https://gallifrey.asia/atom.xml" rel="self"/>
  
  <link href="https://gallifrey.asia/"/>
  <updated>2022-04-28T21:31:31.000Z</updated>
  <id>https://gallifrey.asia/</id>
  
  <author>
    <name>Gallifrey</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>配套作业——动态规划</title>
    <link href="https://gallifrey.asia/posts/243a1ddab2db/"/>
    <id>https://gallifrey.asia/posts/243a1ddab2db/</id>
    <published>2022-04-28T21:31:31.000Z</published>
    <updated>2022-04-28T21:31:31.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h2><ul><li><p>动态规划的方法编程实现01背包问题</p></li><li><p>给定实例：n=3，c=30, w=[16,15,15], p=[45,25,25]。画出动态规划解决该01背包问题实例的记录表填表过程。</p></li><li><p>动态规划实现矩阵连乘问题（选做）</p></li></ul><h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><h3 id="01背包问题"><a href="#01背包问题" class="headerlink" title="01背包问题"></a>01背包问题</h3><div class="tabs" id="dp"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#dp-1">代码实现</button></li><li class="tab"><button type="button" data-href="#dp-2">测试运行</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="dp-1"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">10100</span>;</span><br><span class="line"><span class="type">int</span> n;<span class="comment">//物品数量</span></span><br><span class="line"><span class="type">int</span> maxWeight;<span class="comment">//背包最大承重</span></span><br><span class="line"><span class="type">int</span> value[N];<span class="comment">//记录每个物品价值的数组</span></span><br><span class="line"><span class="type">int</span> weight[N];<span class="comment">//记录每个物品重量的数组</span></span><br><span class="line"><span class="type">int</span> bestValue[N][N];<span class="comment">//记录最大价值</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;请输入书包最大承重weight和数量n&quot;</span> &lt;&lt; endl;</span><br><span class="line">cin &gt;&gt; maxWeight &gt;&gt; n;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;请输入每个物品的重量和价值&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) cin &gt;&gt; weight[i] &gt;&gt; value[i];</span><br><span class="line"></span><br><span class="line"><span class="comment">//i 是物品编号 j是承重</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt;= maxWeight; j++) &#123; </span><br><span class="line"><span class="comment">//装不下第i件物品，bestValue的价值跟i-1时一样</span></span><br><span class="line"><span class="keyword">if</span> (j &lt; weight[i]) bestValue[i][j] = bestValue[i - <span class="number">1</span>][j];</span><br><span class="line"><span class="comment">//能装下则判断，装下的价值不装哪个更大，选出最优解</span></span><br><span class="line"><span class="keyword">else</span> bestValue[i][j] = <span class="built_in">max</span>(bestValue[i - <span class="number">1</span>][j], bestValue[i - <span class="number">1</span>][j -weight[i]] + value[i]);</span><br><span class="line"><span class="comment">// 完全背包：f[i][j] = max(f[i - 1][j], f[i][j - v[i]] + w[i]);</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cout &lt;&lt;<span class="string">&quot;最大价值是： &quot;</span>&lt;&lt; bestValue[n][maxWeight] &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="dp-2"><p><img src="/posts/243a1ddab2db/image-20220429053138324.png" alt="image-20220429053138324"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="手写动态规划"><a href="#手写动态规划" class="headerlink" title="手写动态规划"></a>手写动态规划</h3><div class="table-container"><table><thead><tr><th></th><th>0</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th><th>10</th><th>11</th><th>12</th><th>13</th><th>14</th><th>15</th><th>16</th><th>17</th><th>18</th><th>19</th><th>20</th><th>21</th><th>22</th><th>23</th><th>24</th><th>25</th><th>26</th><th>27</th><th>28</th><th>29</th><th>30</th></tr></thead><tbody><tr><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>45</td><td>45</td><td>45</td><td>45</td><td>45</td><td>45</td><td>45</td><td>45</td><td>45</td><td>45</td><td>45</td><td>45</td><td>45</td><td>45</td><td>45</td></tr><tr><td>2</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>25</td><td>45</td><td>45</td><td>45</td><td>45</td><td>45</td><td>45</td><td>45</td><td>45</td><td>45</td><td>45</td><td>45</td><td>45</td><td>45</td><td>45</td><td>45</td></tr><tr><td>3</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>25</td><td>45</td><td>45</td><td>45</td><td>45</td><td>45</td><td>45</td><td>45</td><td>45</td><td>45</td><td>45</td><td>45</td><td>45</td><td>45</td><td>45</td><td>50</td></tr></tbody></table></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;需求&quot;&gt;&lt;a href=&quot;#需求&quot; class=&quot;headerlink&quot; title=&quot;需求&quot;&gt;&lt;/a&gt;需求&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;动态规划的方法编程实现01背包问题&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;给定实例：n=3，c=30, w=[16,15,15</summary>
      
    
    
    
    <category term="算法" scheme="https://gallifrey.asia/categories/%E7%AE%97%E6%B3%95/"/>
    
    <category term="学校" scheme="https://gallifrey.asia/categories/%E7%AE%97%E6%B3%95/%E5%AD%A6%E6%A0%A1/"/>
    
    
    <category term="算法" scheme="https://gallifrey.asia/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>算法设计与应用——动态规划</title>
    <link href="https://gallifrey.asia/posts/ccfb83cbdb8a/"/>
    <id>https://gallifrey.asia/posts/ccfb83cbdb8a/</id>
    <published>2022-04-28T19:51:22.000Z</published>
    <updated>2022-04-28T19:51:22.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="动态规划简介"><a href="#动态规划简介" class="headerlink" title="动态规划简介"></a>动态规划简介</h2><p><strong>Dynamic Programming</strong></p><p><img src="/posts/ccfb83cbdb8a/image-20220429035520833.png" alt="image-20220429035520833"></p><ul><li>动态规划是求解某类问题的一种方法，是考察问题的一种途径，而不是一种算法。必须对<strong>具体问题进行具体分析</strong>，运用动态规划的原理和方法，建立相应的模型，然后再用动态规划方法去求解。</li></ul><h2 id="多阶段决策问题"><a href="#多阶段决策问题" class="headerlink" title="多阶段决策问题"></a>多阶段决策问题</h2><ul><li><p>是动态决策问题的一种特殊形式；</p></li><li><p>在多阶段决策过程中,系统的动态过程可以按照时间进程分为状态相互联系而又相互区别的各个阶段；</p></li><li><p>在多阶段决策过程中,系统的动态过程可以按照时间进程分为状态相互联系而又相互区别的各个阶段；</p></li></ul><p><img src="/posts/ccfb83cbdb8a/image-20220429035652043.png" alt="image-20220429035652043"></p><p><img src="/posts/ccfb83cbdb8a/image-20220429035800809.png" alt></p><p><img src="/posts/ccfb83cbdb8a/image-20220429035810905.png" alt="image-20220429035810905"></p><h2 id="动态规划的基本思想"><a href="#动态规划的基本思想" class="headerlink" title="动态规划的基本思想"></a>动态规划的基本思想</h2><h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><ul><li><p>阶段：</p><ul><li>把一个问题的过程，恰当地分为若干个相互联系的阶段，以便于按一定的次序去求解。</li><li>描述阶段的变量称为阶段变量k 。</li></ul></li><li><p>状态：</p><ul><li>表示每个阶段开始所处的条件。</li><li>通常一个阶段有若干个状态，描述过程状态的变量称为状态变量s~k~ 。</li></ul></li><li><p>决策：</p><ul><li>当处于某一阶段的某个状态时，可以作出不同的决定，从而确定下一阶段的状态，这种决定称为决策。</li><li>描述决策的变量，称为决策变量uk。</li></ul></li><li><p>多阶段决策过程</p><ul><li><strong>其发展是通过一系列的状态转移来实现的；</strong></li><li>通常，系统在某一阶段的状态转移不但与系统的当前的状态和决策有关，而且还与系统过去的历史状态和决策有关。</li></ul></li><li><p>策略</p><ul><li>是一个按顺序排列的决策组成的集合。</li><li>从允许策略集合中找出达到最优效果的策略称为最优策略。</li></ul></li></ul><h2 id="动态规划问题的特征"><a href="#动态规划问题的特征" class="headerlink" title="动态规划问题的特征"></a>动态规划问题的特征</h2><h3 id="最优子结构"><a href="#最优子结构" class="headerlink" title="最优子结构"></a>最优子结构</h3><ul><li><p>无论过去的状态和决策如何，相对于前面的决策所形成的状态而言，余下的决策序列必然构成最优子策略。”也就是说，一个最优策略的子策略也是最优的.也称最优化原理。</p></li><li><p>“整体最优则局部最优。”反之不一定成立</p></li></ul><h3 id="重叠子问题："><a href="#重叠子问题：" class="headerlink" title="重叠子问题："></a>重叠子问题：</h3><ul><li>在用递归算法自顶向下解问题时，每次产生的子问题并不总是新问题，有些子问题被反复计算多次。</li><li>动态规划算法正是利用了这种子问题的重叠性质，对每一个子问题只解一次，而后将其解保存在一个表格中，在以后尽可能多地利用这些子问题的解。 </li></ul><h3 id="无后效性原则"><a href="#无后效性原则" class="headerlink" title="无后效性原则"></a>无后效性原则</h3><p>马尔可夫性</p><ul><li>如果某阶段状态给定后，则在这个阶段以后过程的发展不受这个阶段以前各段状态的影响；</li><li>过程的过去历史只能通过当前的状态去影响它未来的发展；</li><li>​    状态具有无后效性的多阶段决策过程的状态转移方程如下</li></ul><p><img src="/posts/ccfb83cbdb8a/image-20220429041025837.png" alt="动态规划中能处理的状态转移方程的形式"></p><p><img src="/posts/ccfb83cbdb8a/image-20220429040453709.png" alt="image-20220429040453709"></p><p><strong>能用动态规划方法求解的多阶段决策过程是一类特殊的多阶段决策过程，即具有无后效性的多阶段决策过程。</strong></p><h2 id="01背包问题"><a href="#01背包问题" class="headerlink" title="01背包问题"></a>01背包问题</h2><p><img src="/posts/ccfb83cbdb8a/image-20220429041227272.png" alt="image-20220429041227272"></p><p><img src="/posts/ccfb83cbdb8a/image-20220429041234450.png" alt="image-20220429041234450"></p><p><img src="/posts/ccfb83cbdb8a/image-20220429041241115.png" alt="image-20220429041241115"></p><p><img src="/posts/ccfb83cbdb8a/image-20220429041248923.png" alt="image-20220429041248923"></p><p><img src="/posts/ccfb83cbdb8a/image-20220429041327554.png" alt="image-20220429041327554"></p><h2 id="配套作业"><a href="#配套作业" class="headerlink" title="配套作业"></a>配套作业</h2><div class="tag link"><a class="link-card" title="配套作业——动态规划" href="https://gallifrey.asia/posts/243a1ddab2db/"><div class="left"><img src="https://gallifrey.asia/images/shizi.png"></div><div class="right"><p class="text">配套作业——动态规划</p><p class="url">https://gallifrey.asia/posts/243a1ddab2db/</p></div></a></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;动态规划简介&quot;&gt;&lt;a href=&quot;#动态规划简介&quot; class=&quot;headerlink&quot; title=&quot;动态规划简介&quot;&gt;&lt;/a&gt;动态规划简介&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;Dynamic Programming&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;</summary>
      
    
    
    
    <category term="算法" scheme="https://gallifrey.asia/categories/%E7%AE%97%E6%B3%95/"/>
    
    <category term="学校" scheme="https://gallifrey.asia/categories/%E7%AE%97%E6%B3%95/%E5%AD%A6%E6%A0%A1/"/>
    
    
    <category term="算法" scheme="https://gallifrey.asia/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>配套作业——线性规划</title>
    <link href="https://gallifrey.asia/posts/59c68416afc1/"/>
    <id>https://gallifrey.asia/posts/59c68416afc1/</id>
    <published>2022-04-28T18:22:27.000Z</published>
    <updated>2022-04-28T18:22:27.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h2><p>某农户计划种植黄瓜和韭菜，种植面积不超过50亩，投入资金不超过54万元。假设种植黄瓜和韭菜的产量、成本和售价如下表。 为使一年的种植总利润（总利润=总销售收入 —总种植成本）最大，那么黄瓜和韭菜的种植面积（单位：亩）分别为多少？</p><div class="table-container"><table><thead><tr><th></th><th>年产量/亩</th><th>年种植成本/亩</th><th>每吨售价</th></tr></thead><tbody><tr><td>黄瓜</td><td>4吨</td><td>1.2万元</td><td>0.55万元</td></tr><tr><td>韭菜</td><td>6吨</td><td>0.9万元</td><td>0.3万元</td></tr></tbody></table></div><p> （1）写出线性规划公式，并转换成标准型</p><p> （2）编程解决该问题（matlab代码或者python代码，提交源码附件）</p><h2 id="公式"><a href="#公式" class="headerlink" title="公式"></a>公式</h2><h3 id="原始公式"><a href="#原始公式" class="headerlink" title="原始公式"></a>原始公式</h3><p>设黄瓜和韭菜的种植面积分别是x1,x2</p><ul><li>决策变量：x1,x2</li><li>目标函数：max  1 <em> x1+ 10.9 </em> x2</li><li>约束条件：<ul><li>x1+x2&lt;=50</li><li>1.2 <em> x1 +0.9 </em> x2&lt;=54</li><li>x1&gt; 0 ,x2&gt;0</li></ul></li></ul><h3 id="标准化"><a href="#标准化" class="headerlink" title="标准化"></a>标准化</h3><ul><li>目标函数：max   1 <em> x1 +0.9 </em> x2 +0 <em>x3 +0 </em>x4</li><li>S.T:<ul><li>x1+x2+x3=50</li><li>1.2 <em> x1+0.9</em> x2 +x4=54</li><li>x1&gt;0,x2&gt;0,x3&gt;0,x4</li></ul></li></ul><h2 id="代码实现（python）"><a href="#代码实现（python）" class="headerlink" title="代码实现（python）"></a>代码实现（python）</h2><h4 id="算法模型"><a href="#算法模型" class="headerlink" title="算法模型"></a>算法模型</h4><ul><li>目标函数：min  -1 <em> x1+ -0.9 </em> x2</li><li>约束条件：<ul><li>x1+x2&lt;=50</li><li>1.2 <em> x1 +0.9 </em> x2&lt;=54</li><li>x1&gt; 0 ,x2&gt;0</li></ul></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> optimize</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">c = np.array([-<span class="number">1</span>, -<span class="number">0.9</span>])  <span class="comment"># c 目标函数系数</span></span><br><span class="line">A = np.array([[<span class="number">1</span>, <span class="number">1</span>], [<span class="number">1.2</span>, <span class="number">0.9</span>]])</span><br><span class="line">b = np.array([[<span class="number">50</span>], [<span class="number">54</span>]])</span><br><span class="line"><span class="comment"># Aeq 没有等式 不写</span></span><br><span class="line"><span class="comment"># beq 没有等式 不写</span></span><br><span class="line">x1 = (<span class="number">0</span>, <span class="literal">None</span>)</span><br><span class="line">x2 = (<span class="number">0</span>, <span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line">x = optimize.linprog(c, A, b, bounds=(x1, x2))</span><br><span class="line"><span class="built_in">print</span>(x)</span><br></pre></td></tr></table></figure><h2 id="运行结果"><a href="#运行结果" class="headerlink" title="运行结果"></a>运行结果</h2><p><img src="/posts/59c68416afc1/image-20220429034114957.png" alt="image-20220429034114957"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;需求&quot;&gt;&lt;a href=&quot;#需求&quot; class=&quot;headerlink&quot; title=&quot;需求&quot;&gt;&lt;/a&gt;需求&lt;/h2&gt;&lt;p&gt;某农户计划种植黄瓜和韭菜，种植面积不超过50亩，投入资金不超过54万元。假设种植黄瓜和韭菜的产量、成本和售价如下表。 为使一年的种植总利润（</summary>
      
    
    
    
    <category term="算法" scheme="https://gallifrey.asia/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="算法" scheme="https://gallifrey.asia/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>算法设计与应用——线性规划</title>
    <link href="https://gallifrey.asia/posts/4e3708264857/"/>
    <id>https://gallifrey.asia/posts/4e3708264857/</id>
    <published>2022-04-28T17:14:23.000Z</published>
    <updated>2022-04-01T01:14:23.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="线性规划介绍"><a href="#线性规划介绍" class="headerlink" title="线性规划介绍"></a>线性规划介绍</h2><p>线性规划描述了一大类优化任务，这些任务的共同特点是约束条件和优化准则都可以表示为<strong>线性函数</strong>。</p><p>线性规划所研究的对象属于最优化的范畴，本质上是一个极值问题。<strong>三个基本要素</strong>：</p><ul><li>决策变量：决策者所控制的量，它们的取值由决策者决定</li><li>约束条件：决策变量在这些限制范围内才有意义</li><li>目标函数：代表决策者希望对其优化的指标。目标函数是决策变量的函数。</li></ul><h4 id="示例：利润最大化"><a href="#示例：利润最大化" class="headerlink" title="示例：利润最大化"></a>示例：利润最大化</h4><p>巧克力作坊生成两种产品：Pyramide和Nuit</p><p>-假设每天生产x1盒pyramide和x2盒Nuit，前者利润为$1，后者每盒$6</p><p>-市场需求，每日最多200盒Pyramide,300盒Nuit</p><p>-巧克力作坊每日最多生成400盒巧克力</p><p>问：如何做到利润最大化</p><ul><li><p>线性规划：</p><p>-决策变量：x1,x2</p><p>-目标函数：max 1<em>x1+6</em>x2</p><p>-约束条件：x1&lt;=200</p><p>​                     x2&lt;=300</p><p>​                     x1+x2&lt;=400    </p><p>​                      x1&gt;=0&amp;&amp;x2&gt;=0</p></li></ul><h4 id="图解法求解"><a href="#图解法求解" class="headerlink" title="图解法求解"></a>图解法求解</h4><p><img src="/posts/4e3708264857/image-20220401094617931.png" alt="image-20220401094617931"></p><h4 id="建立线性规划数学模型的步骤"><a href="#建立线性规划数学模型的步骤" class="headerlink" title="建立线性规划数学模型的步骤"></a>建立线性规划数学模型的步骤</h4><ul><li>首先，决定决策变量</li><li>决定约束条件</li><li>决定目标函数</li></ul><h2 id="单纯形法"><a href="#单纯形法" class="headerlink" title="单纯形法"></a>单纯形法</h2><h4 id="示例：更多产品"><a href="#示例：更多产品" class="headerlink" title="示例：更多产品"></a>示例：更多产品</h4><p>巧克力作坊推出一种新产品 Luxe，每盒利润$13。（原来两种产品：Pyramide($1)和Nuit($6)）</p><p>市场需求，每日最多200盒Pyramide,300盒Nuit</p><p>三种巧克力每天最多生产400 盒。</p><p>Nuit和Luxe 需要使用相同的包装设备，而且每个Luxe 的包装需要使用三次该设备，设备每天最多使用600次。</p><p>最优的生产计划应该又是怎样的呢？</p><ul><li><p>线性规划</p><ul><li><p>决策变量：<em>x</em>1、<em>x</em>2、<em>x</em>3 分别表示每天生产的数量，</p></li><li><p>目标函数：max  <em>x</em>1+6<em>x</em>2+13<em>x</em>3</p></li><li><p>S.t.<em> </em>：<em>   </em>x*1≤200</p></li></ul></li></ul><p>​                                <em>x</em>2≤300</p><p>​                            <em>x</em>1+<em>x</em>2+<em>x</em>3≤400</p><p>​                             <em>x</em>2+3<em>x</em>3≤600</p><p>​                             <em>x</em>1, <em>x</em>2, <em>x</em>3≥0</p><h3 id="单纯形法求解线性规划（爬山法）"><a href="#单纯形法求解线性规划（爬山法）" class="headerlink" title="单纯形法求解线性规划（爬山法）"></a>单纯形法求解线性规划（爬山法）</h3><h4 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h4><ul><li>算法从一个顶点开始，不断重复地寻找 目标函数值较高的邻居顶点(该顶点与原顶点由可行区域的一条边相连)，并向其移动，一旦再也找不到更高的邻居，结束计算</li><li>对于线性规划问题是一定能找出最优解的，无论是几维</li></ul><h4 id="实现方法（不作教学要求）："><a href="#实现方法（不作教学要求）：" class="headerlink" title="实现方法（不作教学要求）："></a>实现方法（不作教学要求）：</h4><ul><li>在每次迭代中，单纯形法需要完成如下两项任务：<ul><li>1.检测当前顶点是否最优，如果是，则退出</li><li>2.决定下一个移动方向</li></ul></li></ul><h4 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h4><ul><li>单纯形法解决 示例：利润最大化</li></ul><p><img src="/posts/4e3708264857/image-20220401100349190.png" alt="image-20220401100349190"></p><ul><li>单纯形法解决 示例：更多产品 </li></ul><p><img src="/posts/4e3708264857/image-20220401100057776.png" alt="image-20220401100057776"></p><p>单纯形法的工作状态</p><p><img src="/posts/4e3708264857/image-20220401101803471.png" alt="image-20220401101803471"> </p><h2 id="线性规划问题的标准形式"><a href="#线性规划问题的标准形式" class="headerlink" title="线性规划问题的标准形式"></a>线性规划问题的标准形式</h2><h3 id="什么是标志型"><a href="#什么是标志型" class="headerlink" title="什么是标志型"></a>什么是标志型</h3><ul><li><p>线性规划问题的数学模型有各种不同的形式。为了便于讨论，需要将线性规划数学模型写成统一格式</p></li><li><p>线性规划问题的<strong>标准型</strong>是</p></li></ul><p><img src="/posts/4e3708264857/image-20220429021601680.png" alt="image-20220429021601680"></p><ul><li>标准型的特点为<ol><li>目标函数为最大值形式</li><li>约束条件用等式表示且等 式右端的常数为非负值</li><li>决策变量非负。</li></ol></li></ul><h3 id="标准化"><a href="#标准化" class="headerlink" title="标准化"></a>标准化</h3><p>把一般的线性规划问题化成标准型的过程称为线性规划问题的标准化</p><ul><li>方法：</li></ul><p><img src="/posts/4e3708264857/image-20220429021908627.png" alt="image-20220429021908627"></p><p>例子</p><p><img src="/posts/4e3708264857/image-20220429022309652.png" alt="image-20220429022309652"></p><p><img src="/posts/4e3708264857/image-20220429022322176.png" alt="image-20220429022322176"></p><h2 id="matlab或python解决问题"><a href="#matlab或python解决问题" class="headerlink" title="matlab或python解决问题"></a>matlab或python解决问题</h2><p>同一个模型</p><p><img src="https://img-blog.csdnimg.cn/20210803161605361.png" alt="img"></p><h2 id="配套作业"><a href="#配套作业" class="headerlink" title="配套作业"></a>配套作业</h2><div class="tag link"><a class="link-card" title="配置作业——线性规划" href="https://gallifrey.asia/posts/59c68416afc1/"><div class="left"><img src="https://gallifrey.asia/images/shizi.png"></div><div class="right"><p class="text">配置作业——线性规划</p><p class="url">https://gallifrey.asia/posts/59c68416afc1/</p></div></a></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;线性规划介绍&quot;&gt;&lt;a href=&quot;#线性规划介绍&quot; class=&quot;headerlink&quot; title=&quot;线性规划介绍&quot;&gt;&lt;/a&gt;线性规划介绍&lt;/h2&gt;&lt;p&gt;线性规划描述了一大类优化任务，这些任务的共同特点是约束条件和优化准则都可以表示为&lt;strong&gt;线性函数&lt;/</summary>
      
    
    
    
    <category term="算法" scheme="https://gallifrey.asia/categories/%E7%AE%97%E6%B3%95/"/>
    
    <category term="学校" scheme="https://gallifrey.asia/categories/%E7%AE%97%E6%B3%95/%E5%AD%A6%E6%A0%A1/"/>
    
    
    <category term="算法" scheme="https://gallifrey.asia/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>配套作业——贪心策略</title>
    <link href="https://gallifrey.asia/posts/8924da7ca3cd/"/>
    <id>https://gallifrey.asia/posts/8924da7ca3cd/</id>
    <published>2022-04-28T07:24:14.000Z</published>
    <updated>2022-04-28T07:24:14.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h2><ul><li><p>贪心策略解决背包问题或者活动安排问题（二选一），编程实现</p></li><li><p>dijkstra算法编程实现 或者Prim算法编程实现（二选其一）</p></li><li><p>Kruskal算法编程实现</p></li><li><p>Huffman编码编程实现（选做）</p></li></ul><h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><h3 id="背包问题"><a href="#背包问题" class="headerlink" title="背包问题"></a>背包问题</h3><div class="tabs" id="greedy"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#greedy-1">代码实现</button></li><li class="tab"><button type="button" data-href="#greedy-2">测试运行</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="greedy-1"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">10000</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">double</span> maxWeight;<span class="comment">//最大承受重量</span></span><br><span class="line"><span class="type">double</span> currentWeight;<span class="comment">//临时重量</span></span><br><span class="line"><span class="type">double</span> bestValue;<span class="comment">//最大价值</span></span><br><span class="line"><span class="type">int</span> n;<span class="comment">//物品数量</span></span><br><span class="line"><span class="type">double</span> value[N];<span class="comment">//记录物品价值价值的数组</span></span><br><span class="line"><span class="type">double</span> weight[N];<span class="comment">//记录每个物品重量的数组</span></span><br><span class="line"><span class="type">double</span> vw[N];<span class="comment">//记录单位利益值的数组</span></span><br><span class="line"><span class="type">double</span> x[N];<span class="comment">//记录解向量的数组</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//利用单位利益值对物品的质量和价值数组进行排序</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">sort_vw</span><span class="params">(<span class="type">int</span> low, <span class="type">int</span> high)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (low &gt;= high) <span class="keyword">return</span>;</span><br><span class="line"><span class="type">int</span> l = low, h = high, x = vw[low];</span><br><span class="line"><span class="keyword">while</span> (low &lt; high) &#123;</span><br><span class="line"><span class="comment">//这里快排注意一下，我们要从大到小排列</span></span><br><span class="line"><span class="keyword">while</span> ((low &lt; high) &amp;&amp; (vw[high] &lt;= x)) high--;</span><br><span class="line"><span class="built_in">swap</span>(vw[low], vw[high]);</span><br><span class="line"><span class="built_in">swap</span>(weight[low], weight[high]);</span><br><span class="line"><span class="built_in">swap</span>(value[low], value[high]);</span><br><span class="line"><span class="keyword">while</span> ((low &lt; high) &amp;&amp; (vw[low] &gt;= x)) low++;</span><br><span class="line"><span class="built_in">swap</span>(vw[low], vw[high]);</span><br><span class="line"><span class="built_in">swap</span>(weight[low], weight[high]);</span><br><span class="line"><span class="built_in">swap</span>(value[low], value[high]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">sort_vw</span>(l, high - <span class="number">1</span>);</span><br><span class="line"><span class="built_in">sort_vw</span>(high + <span class="number">1</span>, h);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">greedy</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//对物品的进行排序</span></span><br><span class="line"><span class="built_in">sort_vw</span>(<span class="number">0</span>, n - <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) x[i]=<span class="number">0</span>;</span><br><span class="line">currentWeight = maxWeight;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> ( i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line"><span class="comment">//加入物体重量大于剩余重量 结束循环</span></span><br><span class="line"><span class="keyword">if</span> (weight[i] &gt; currentWeight) <span class="keyword">break</span>;</span><br><span class="line"><span class="comment">//可以加入则加入完整物品</span></span><br><span class="line">x[i] = <span class="number">1</span>;</span><br><span class="line">currentWeight -= weight[i];<span class="comment">//更新剩余质量</span></span><br><span class="line">bestValue += value[i];<span class="comment">//更新最大价值</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//物品太大，加不进去的情况，切割后加进去</span></span><br><span class="line"><span class="keyword">if</span> (i &lt; n) &#123;</span><br><span class="line">x[i] = currentWeight / weight[i];</span><br><span class="line">bestValue = x[i] * value[i];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;请输入背包最大承受重量和物品数量n&quot;</span> &lt;&lt; endl;</span><br><span class="line">cin &gt;&gt; maxWeight &gt;&gt; n;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;请输入n个物品的重量和价值&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123; </span><br><span class="line">cin &gt;&gt; weight[i] &gt;&gt; value[i]; </span><br><span class="line"><span class="comment">//处理单位利益值的数组</span></span><br><span class="line">vw[i] = value[i] / weight[i];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">greedy</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\n排序后的物品顺序&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123; </span><br><span class="line">cout &lt;&lt;weight[i] &lt;&lt;<span class="string">&quot;  &quot;</span>&lt;&lt;value[i]&lt;&lt;endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\n最大价值为&quot;</span> &lt;&lt; bestValue &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;加人背包的物品情形&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; x[i];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="greedy-2"><p><img src="/posts/8924da7ca3cd/image-20220428193816885.png" alt="image-20220428193816885"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="dijkstra算法"><a href="#dijkstra算法" class="headerlink" title="dijkstra算法"></a>dijkstra算法</h3><div class="tabs" id="dijkstra"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#dijkstra-1">代码实现</button></li><li class="tab"><button type="button" data-href="#dijkstra-2">测试运行</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="dijkstra-1"><ul><li><p>dijkstra在无权图上实际上就是bfs，比如我们在迷宫问题上使用的bfs算法也就是dijstra算法</p></li><li><p>但是dijkstra算法可以求有权图的最短单源路径，但是bfs算法不可以</p></li><li><p>这里代码直接沿用这篇文章<a href="https://zhuanlan.zhihu.com/p/338414118">Dijkstra算法详解 通俗易懂 - 知乎 (zhihu.com)</a></p><p><img src="/posts/8924da7ca3cd/image-20220428230448124.png" alt="image-20220428230448124"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dijkstra</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] dijkstra(<span class="type">int</span>[][] graph,<span class="type">int</span> startVertex)&#123;</span><br><span class="line">        <span class="comment">//初始化 以求出最短路径的点 result[]</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">length</span> <span class="operator">=</span> graph.length;</span><br><span class="line">        <span class="type">int</span>[] result = <span class="keyword">new</span> <span class="title class_">int</span>[length];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; length; i++) &#123;</span><br><span class="line">            result[i] = -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        result[startVertex] = <span class="number">0</span> ;</span><br><span class="line">        <span class="comment">// 初始化 未求出最短路径的点 notFound[]</span></span><br><span class="line">        <span class="type">int</span>[] notFound = <span class="keyword">new</span> <span class="title class_">int</span>[length];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; length; i++) &#123;</span><br><span class="line">            notFound[i] = graph[startVertex][i];</span><br><span class="line">        &#125;</span><br><span class="line">        notFound[startVertex] = -<span class="number">1</span>;</span><br><span class="line">        <span class="comment">// 开始 Dijkstra 算法</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; length; i++) &#123;</span><br><span class="line">            <span class="comment">//1. 从「未求出最短路径的点」notFound 中取出 最短路径的点</span></span><br><span class="line">            <span class="comment">//1.1 找到最短距离的点</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">min</span> <span class="operator">=</span> Integer.MAX_VALUE;</span><br><span class="line">            <span class="type">int</span> <span class="variable">minIndex</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; length; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (notFound[j] &gt; <span class="number">0</span> &amp;&amp; notFound[j] &lt; min)&#123;</span><br><span class="line">                    min = notFound[j];</span><br><span class="line">                    minIndex = j;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//1.2 将最短距离的点 取出 放入结果中</span></span><br><span class="line">            result[minIndex] = min;</span><br><span class="line">            notFound[minIndex] = -<span class="number">1</span>;</span><br><span class="line">            <span class="comment">//2. 刷新 「未求出最短距离的点」 notFound[] 中的距离</span></span><br><span class="line">            <span class="comment">//2.1 遍历刚刚找到最短距离的点 (B) 的出度 (BA、BB、BC、BD)</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; length; j++) &#123;</span><br><span class="line">                <span class="comment">// 出度可通行(例如 BD:graph[1][3]  &gt; 0)</span></span><br><span class="line">                <span class="comment">// 出度点不能已经在结果集 result中(例如 D: result[3] == -1)</span></span><br><span class="line">                <span class="keyword">if</span> (graph[minIndex][j] &gt; <span class="number">0</span></span><br><span class="line">                        &amp;&amp; result[j] == -<span class="number">1</span>)&#123;</span><br><span class="line">                    <span class="type">int</span> <span class="variable">newDistance</span> <span class="operator">=</span> result[minIndex] + graph[minIndex][j];</span><br><span class="line">                    <span class="comment">//通过 B 为桥梁，刷新距离</span></span><br><span class="line">                    <span class="comment">//（比如`AD = 6 &lt; AB + BD = 4` 就刷新距离）（ -1 代表无限大）</span></span><br><span class="line">                    <span class="keyword">if</span> (newDistance &lt; notFound[j] || notFound[j]==-<span class="number">1</span>)&#123;</span><br><span class="line">                        notFound[j] = newDistance;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/** 测试案例 */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">char</span>[] vertices = <span class="keyword">new</span> <span class="title class_">char</span>[]&#123;<span class="string">&#x27;A&#x27;</span>,<span class="string">&#x27;B&#x27;</span>,<span class="string">&#x27;C&#x27;</span>,<span class="string">&#x27;D&#x27;</span>&#125;;</span><br><span class="line">        <span class="type">int</span>[][] graph = <span class="keyword">new</span> <span class="title class_">int</span>[][]&#123;</span><br><span class="line">                &#123;<span class="number">0</span>, <span class="number">2</span>, -<span class="number">1</span>, <span class="number">6</span>&#125;</span><br><span class="line">                , &#123;<span class="number">2</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">2</span>&#125;</span><br><span class="line">                , &#123;-<span class="number">1</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">2</span>&#125;</span><br><span class="line">                , &#123;<span class="number">6</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">0</span>&#125;&#125;;</span><br><span class="line">        <span class="type">int</span>[] dijkstra = dijkstra(graph, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;A到各点最短路径&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">char</span> temp: vertices)&#123;</span><br><span class="line">            System.out.print(temp+<span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i : dijkstra) &#123;</span><br><span class="line">            System.out.print(i+<span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="dijkstra-2"><p><img src="/posts/8924da7ca3cd/image-20220429003409835.png" alt="image-20220429003409835"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="Kruskal-克鲁斯卡尔-算法"><a href="#Kruskal-克鲁斯卡尔-算法" class="headerlink" title="Kruskal(克鲁斯卡尔)算法"></a>Kruskal(克鲁斯卡尔)算法</h3><div class="tabs" id="kruskal"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#kruskal-1">代码实现</button></li><li class="tab"><button type="button" data-href="#kruskal-2">测试运行</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="kruskal-1"><ul><li><p>参考了文章<a href="http://c.biancheng.net/algorithm/kruskal.html">kruskal算法（克鲁斯卡尔算法）详解 (biancheng.net)</a></p></li><li><p>这里我们判断是否形成回路的方法：初始状态下，为连通网中的各个顶点配置不同的标记。对于一个新边，如果它两端顶点的标记不同，就不会构成环路，可以组成最小生成树。</p></li><li><p>在下面示例代码中 A B C D T S分别用 1 2 3 4 5来标记</p></li></ul><p>  <img src="/posts/8924da7ca3cd/image-20220429015346994.png" alt="image-20220429015346994"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Kruskal</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> <span class="variable">N</span> <span class="operator">=</span> <span class="number">9</span>; <span class="comment">// 图中边的数量</span></span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> <span class="variable">P</span> <span class="operator">=</span> <span class="number">6</span>; <span class="comment">// 图中顶点的数量</span></span><br><span class="line">    <span class="comment">//构建表示路径的类</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">edge</span> <span class="keyword">implements</span> <span class="title class_">Comparable</span>&lt;edge&gt;&#123;</span><br><span class="line">        <span class="comment">//每个路径都有 2 个顶点和 1 个权值</span></span><br><span class="line">        <span class="type">int</span> initial;</span><br><span class="line">        <span class="type">int</span> end;</span><br><span class="line">        <span class="type">int</span> weight;</span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">edge</span><span class="params">(<span class="type">int</span> initial, <span class="type">int</span> end, <span class="type">int</span> weight)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.initial = initial;</span><br><span class="line">            <span class="built_in">this</span>.end = end;</span><br><span class="line">            <span class="built_in">this</span>.weight = weight;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//对每个 edge 对象根据权值做升序排序</span></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(edge o)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.weight - o.weight;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">kruskal_MinTree</span><span class="params">(edge[] edges,edge [] minTree)</span> &#123;</span><br><span class="line">        <span class="type">int</span> []assists = <span class="keyword">new</span> <span class="title class_">int</span>[P];</span><br><span class="line">        <span class="comment">//每个顶点配置一个不同的标记值</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; P; i++) &#123;</span><br><span class="line">            assists[i] = i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//根据权值，对所有边进行升序排序</span></span><br><span class="line">        Arrays.sort(edges);</span><br><span class="line">        <span class="comment">//遍历所有的边</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">            <span class="comment">//找到当前边的两个顶点在 assists 数组中的位置下标</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">initial</span> <span class="operator">=</span> edges[i].initial - <span class="number">1</span>;</span><br><span class="line">            <span class="type">int</span> <span class="variable">end</span> <span class="operator">=</span> edges[i].end - <span class="number">1</span>;</span><br><span class="line">            <span class="comment">//如果顶点位置存在且顶点的标记不同，说明不在一个集合中，不会产生回路</span></span><br><span class="line">            <span class="keyword">if</span> (assists[initial] != assists[end]) &#123;</span><br><span class="line">                <span class="comment">//记录该边，作为最小生成树的组成部分</span></span><br><span class="line">                minTree[num] = edges[i];</span><br><span class="line">                <span class="comment">//计数+1</span></span><br><span class="line">                num++;</span><br><span class="line">                <span class="type">int</span> <span class="variable">elem</span> <span class="operator">=</span> assists[end];</span><br><span class="line">                <span class="comment">//将新加入生成树的顶点标记全不更改为一样的</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>; k &lt; P; k++) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (assists[k] == elem) &#123;</span><br><span class="line">                        assists[k] = assists[initial];</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//如果选择的边的数量和顶点数相差1，证明最小生成树已经形成，退出循环</span></span><br><span class="line">                <span class="keyword">if</span> (num == P - <span class="number">1</span>) &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">display</span><span class="params">(edge [] minTree)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;最小生成树为：&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">cost</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; P - <span class="number">1</span>; i++) &#123;</span><br><span class="line">            System.out.println(minTree[i].initial+<span class="string">&quot; - &quot;</span>+ minTree[i].end+<span class="string">&quot; 权值为：&quot;</span>+minTree[i].weight);</span><br><span class="line">            cost += minTree[i].weight;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.print(<span class="string">&quot;总权值为:&quot;</span>+cost);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scn</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        edge[] edges = <span class="keyword">new</span> <span class="title class_">edge</span>[N];</span><br><span class="line">        edge[] minTree = <span class="keyword">new</span> <span class="title class_">edge</span>[P-<span class="number">1</span>];</span><br><span class="line">        System.out.println(<span class="string">&quot;请输入图中各个边的信息：&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;N;i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">initial</span> <span class="operator">=</span> scn.nextInt(), end = scn.nextInt(), weight = scn.nextInt();</span><br><span class="line">            edges[i] = <span class="keyword">new</span> <span class="title class_">edge</span>(initial,end,weight);</span><br><span class="line">        &#125;</span><br><span class="line">        kruskal_MinTree(edges,minTree);</span><br><span class="line">        display(minTree);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="kruskal-2"><p><img src="/posts/8924da7ca3cd/clip_image001.png" alt="img"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><div class="tabs" id="greedy"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#greedy-1">代码实现</button></li><li class="tab"><button type="button" data-href="#greedy-2">测试运行</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="greedy-1"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="greedy-2"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;需求&quot;&gt;&lt;a href=&quot;#需求&quot; class=&quot;headerlink&quot; title=&quot;需求&quot;&gt;&lt;/a&gt;需求&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;贪心策略解决背包问题或者活动安排问题（二选一），编程实现&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;dijkstra算法编程实现 </summary>
      
    
    
    
    <category term="算法" scheme="https://gallifrey.asia/categories/%E7%AE%97%E6%B3%95/"/>
    
    <category term="学校" scheme="https://gallifrey.asia/categories/%E7%AE%97%E6%B3%95/%E5%AD%A6%E6%A0%A1/"/>
    
    
    <category term="算法" scheme="https://gallifrey.asia/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>算法设计与应用——贪心策略</title>
    <link href="https://gallifrey.asia/posts/c9ca5ef7866a/"/>
    <id>https://gallifrey.asia/posts/c9ca5ef7866a/</id>
    <published>2022-04-28T06:09:08.000Z</published>
    <updated>2022-04-28T06:09:08.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="贪心策略基本思想"><a href="#贪心策略基本思想" class="headerlink" title="贪心策略基本思想"></a>贪心策略基本思想</h2><h3 id="换硬币问题"><a href="#换硬币问题" class="headerlink" title="换硬币问题"></a>换硬币问题</h3><p><img src="/posts/c9ca5ef7866a/image-20220428141906045.png" alt="image-20220428141906045"></p><h3 id="贪心算法思想"><a href="#贪心算法思想" class="headerlink" title="贪心算法思想"></a>贪心算法思想</h3><p><img src="/posts/c9ca5ef7866a/image-20220428141912047.png" alt="image-20220428141912047"></p><h3 id="适用问题"><a href="#适用问题" class="headerlink" title="适用问题"></a>适用问题</h3><p><img src="/posts/c9ca5ef7866a/image-20220428142002288.png" alt="image-20220428142002288"></p><h2 id="活动安排问题"><a href="#活动安排问题" class="headerlink" title="活动安排问题"></a>活动安排问题</h2><p><img src="/posts/c9ca5ef7866a/image-20220428142122919.png" alt="image-20220428142122919"></p><p><img src="/posts/c9ca5ef7866a/image-20220428142138411.png" alt="image-20220428142138411"></p><h3 id="算法实现"><a href="#算法实现" class="headerlink" title="算法实现"></a>算法实现</h3><ul><li>这里是代码是不完整的，执行前，编写并执行先一个排序</li></ul><p><img src="/posts/c9ca5ef7866a/image-20220428142226169.png" alt="image-20220428142226169"></p><p><img src="/posts/c9ca5ef7866a/image-20220428142236752.png" alt="image-20220428142236752"></p><h2 id="贪心的基本要素"><a href="#贪心的基本要素" class="headerlink" title="贪心的基本要素"></a>贪心的基本要素</h2><p><img src="/posts/c9ca5ef7866a/image-20220428142247768.png" alt="image-20220428142247768"></p><p><img src="/posts/c9ca5ef7866a/image-20220428142253625.png" alt="image-20220428142253625"></p><p><img src="/posts/c9ca5ef7866a/image-20220428142303686.png" alt="image-20220428142303686"></p><p><img src="/posts/c9ca5ef7866a/image-20220428143648089.png" alt="image-20220428142950753"></p><p><img src="/posts/c9ca5ef7866a/image-20220428143656897.png" alt="image-20220428143656897"></p><p><img src="/posts/c9ca5ef7866a/image-20220428143741469.png" alt="image-20220428143741469"></p><p><img src="/posts/c9ca5ef7866a/image-20220428143807207.png" alt="image-20220428143807207"></p><p><img src="/posts/c9ca5ef7866a/image-20220428143813591.png" alt="image-20220428143022565"></p><p><img src="/posts/c9ca5ef7866a/image-20220428143857796.png" alt="image-20220428143857796"></p><p><img src="/posts/c9ca5ef7866a/image-20220428143927173.png" alt="image-20220428143927173"></p><h2 id="背包问题"><a href="#背包问题" class="headerlink" title="背包问题"></a>背包问题</h2><ul><li>注意：这里是普通背包问题，不是01背包问题</li></ul><p><img src="/posts/c9ca5ef7866a/image-20220428144055285.png" alt="image-20220428144055285"></p><h3 id="贪心依据的选择"><a href="#贪心依据的选择" class="headerlink" title="贪心依据的选择"></a>贪心依据的选择</h3><p><img src="/posts/c9ca5ef7866a/image-20220428143031558.png" alt="image-20220428143031558"></p><h4 id="价值优先——次优解"><a href="#价值优先——次优解" class="headerlink" title="价值优先——次优解"></a>价值优先——次优解</h4><p><img src="/posts/c9ca5ef7866a/image-20220428144533176.png" alt="image-20220428144533176"></p><p><img src="/posts/c9ca5ef7866a/image-20220428144552526.png" alt="image-20220428144552526"></p><p><img src="/posts/c9ca5ef7866a/image-20220428143042989.png" alt="image-20220428143042989"></p><h4 id="容量优先——次优解"><a href="#容量优先——次优解" class="headerlink" title="容量优先——次优解"></a>容量优先——次优解</h4><p><img src="/posts/c9ca5ef7866a/image-20220428143049189.png" alt="image-20220428143049189"></p><p><img src="/posts/c9ca5ef7866a/image-20220428144637354.png" alt="image-20220428144637354"></p><h4 id="单位利益值——最优解"><a href="#单位利益值——最优解" class="headerlink" title="单位利益值——最优解"></a>单位利益值——最优解</h4><p><img src="/posts/c9ca5ef7866a/image-20220428144645373.png" alt="image-20220428144645373"></p><p><img src="/posts/c9ca5ef7866a/image-20220428144655386.png" alt="image-20220428144655386"></p><h3 id="算法实现-1"><a href="#算法实现-1" class="headerlink" title="算法实现"></a>算法实现</h3><p><img src="/posts/c9ca5ef7866a/image-20220428144703601.png" alt="image-20220428144703601"></p><p><img src="/posts/c9ca5ef7866a/image-20220428144734498.png" alt="image-20220428144734498"></p><h2 id="Dijkstra算法"><a href="#Dijkstra算法" class="headerlink" title="Dijkstra算法"></a>Dijkstra算法</h2><p><img src="/posts/c9ca5ef7866a/image-20220428145801910.png" alt="image-20220428145801910"></p><p><img src="/posts/c9ca5ef7866a/image-20220428145815503.png" alt="image-20220428145815503"></p><p><img src="/posts/c9ca5ef7866a/image-20220428145825775.png" alt="image-20220428145825775"></p><p><img src="/posts/c9ca5ef7866a/image-20220428145835232.png" alt="image-20220428145835232"></p><p><img src="/posts/c9ca5ef7866a/image-20220428145843145.png" alt="image-20220428145843145"></p><h2 id="最小生成树"><a href="#最小生成树" class="headerlink" title="最小生成树"></a>最小生成树</h2><p><img src="/posts/c9ca5ef7866a/image-20220428150131023.png" alt="image-20220428150131023"></p><p><img src="/posts/c9ca5ef7866a/image-20220428150143056.png" alt="image-20220428150143056"></p><h3 id="Prim算法"><a href="#Prim算法" class="headerlink" title="Prim算法"></a>Prim算法</h3><p><img src="/posts/c9ca5ef7866a/image-20220428150406015.png" alt="image-20220428150406015"></p><p><img src="/posts/c9ca5ef7866a/image-20220428150414423.png" alt="image-20220428150414423"></p><p><img src="/posts/c9ca5ef7866a/image-20220428150421524.png" alt="image-20220428150421524"></p><p><img src="/posts/c9ca5ef7866a/image-20220428150458584.png" alt="image-20220428150458584"></p><p><img src="/posts/c9ca5ef7866a/image-20220428150510438.png" alt="image-20220428150510438"></p><h3 id="Kruskal算法"><a href="#Kruskal算法" class="headerlink" title="Kruskal算法"></a>Kruskal算法</h3><p><img src="/posts/c9ca5ef7866a/image-20220428151125822.png" alt="image-20220428151125822"></p><h4 id="解决环的问题"><a href="#解决环的问题" class="headerlink" title="解决环的问题"></a>解决环的问题</h4><p><img src="/posts/c9ca5ef7866a/image-20220428151438809.png" alt="image-20220428151438809"></p><p><img src="/posts/c9ca5ef7866a/image-20220428151421528.png" alt="image-20220428151421528"></p><p><img src="/posts/c9ca5ef7866a/image-20220428152142712.png" alt="image-20220428152142712"></p><p><img src="/posts/c9ca5ef7866a/image-20220428152213472.png" alt="image-20220428152213472"></p><p><img src="/posts/c9ca5ef7866a/image-20220428152239553.png" alt="image-20220428152239553"></p><p><img src="/posts/c9ca5ef7866a/image-20220428152317648.png" alt="image-20220428152317648"></p><p><img src="/posts/c9ca5ef7866a/image-20220428152325430.png" alt="image-20220428152325430"></p><h2 id="哈夫曼编码"><a href="#哈夫曼编码" class="headerlink" title="哈夫曼编码"></a>哈夫曼编码</h2><ul><li>Data Compression via Huffman Coding<ul><li>Motivation<ul><li>Limited network bandwidth.</li><li>Limited disk space.</li></ul></li><li>Human codes are used for data compression.<ul><li>Reducing time to transmit large files, and</li><li>Reducing the space required to store them on disk or tape.</li></ul></li><li>Huffman codes are a widely used and very effective technique for compressing data, savings of 20% to 90% are typical, depending on the characteristics of the data.</li></ul></li></ul><h4 id="问题提出"><a href="#问题提出" class="headerlink" title="问题提出"></a>问题提出</h4><ul><li>Problem<ul><li>Suppose that you have a file of 100K characters. To keep the example simple, suppose that each character is one of the 6 letters from a through f. Since we have just 6 characters, we need just 3 bits to represent a character, so the file requires 300K bits to store. Can we do better?</li><li>Suppose that we have more information about the file:<ul><li>the frequency which each character appears</li></ul></li></ul></li><li>Solution<ul><li>The idea is that we will use a variable length code instead of a fixed length code (3 bits for each character), with fewer bits to store the common characters, and more bits to store the rare characters</li></ul></li></ul><h4 id="Example-of-Data-Compression数据压缩示例"><a href="#Example-of-Data-Compression数据压缩示例" class="headerlink" title="Example of Data Compression数据压缩示例"></a>Example of Data Compression数据压缩示例</h4><ul><li>For example, suppose that the characters appear with the following frequencies, and following codes:</li><li><img src="/posts/c9ca5ef7866a/image-20220428173555160.png" alt="image-20220428173555160"></li><li>Then the variable-length coded version will take not 300K bits but 45<em>1 + 13</em>3 + 12<em>3 + 16</em>3 + 9<em>4 + 5</em>4 = 224K bits to store, a 25% saving. In fact this is the optimal way to encode the 6 characters present, as we shall see</li></ul><h4 id="Characteristic-of-Optimal-Code"><a href="#Characteristic-of-Optimal-Code" class="headerlink" title="Characteristic of Optimal Code"></a>Characteristic of Optimal Code</h4><ul><li><p>Represented as a binary tree whose leaves are the given characters</p></li><li><p>In an optimal code each non-leaf node has two children</p></li></ul><p><img src="/posts/c9ca5ef7866a/image-20220428173714577.png" alt="image-20220428173714577"></p><p><img src="/posts/c9ca5ef7866a/image-20220428173728693.png" alt="image-20220428173728693"></p><h4 id="Prefix-free-Code-非-前缀编码"><a href="#Prefix-free-Code-非-前缀编码" class="headerlink" title="Prefix-free Code((非)前缀编码)"></a>Prefix-free Code((非)前缀编码)</h4><ul><li><p>In a Prefix code no codeword is a prefix of another code word<strong>没有一个编码是另一个编码的前缀</strong></p><ul><li>Easy encoding and decoding</li></ul></li><li><p>To encode, we need only concatenate the codes of consecutive characters in the message</p><ul><li>The string 110001001101 parses uniquely as 1100-0-100-1101, which decodes to FACE</li></ul></li><li><p>To decode, we have to decide where each code begins and ends</p><ul><li><p>Easy, since, no codes share a prefix</p><p><strong>“prefix-free codes” would be a better name, but the term “prefix codes” is standard in the literature</strong></p></li></ul></li></ul><h2 id="Algorithm-of-Huffman-Coding"><a href="#Algorithm-of-Huffman-Coding" class="headerlink" title="Algorithm of Huffman Coding"></a>Algorithm of Huffman Coding</h2><ul><li>The greedy algorithm for computing the optimal Human coding tree <em>T</em> is as follows<ul><li>It starts with a forest of one-node trees representing each <em>c</em> <strong>∈*</strong>C<em>, and merges them in a greedy style, using a priority queue </em>Q*, sorted by the smallest frequency:</li></ul></li></ul><p><img src="/posts/c9ca5ef7866a/image-20220428174130651.png" alt="image-20220428174130651"></p><h2 id="配套作业"><a href="#配套作业" class="headerlink" title="配套作业"></a>配套作业</h2><div class="tag link"><a class="link-card" title="配套作业——贪心策略" href="https://gallifrey.asia/posts/8924da7ca3cd/"><div class="left"><img src="https://gallifrey.asia/images/shizi.png"></div><div class="right"><p class="text">配套作业——贪心策略</p><p class="url">https://gallifrey.asia/posts/8924da7ca3cd/</p></div></a></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;贪心策略基本思想&quot;&gt;&lt;a href=&quot;#贪心策略基本思想&quot; class=&quot;headerlink&quot; title=&quot;贪心策略基本思想&quot;&gt;&lt;/a&gt;贪心策略基本思想&lt;/h2&gt;&lt;h3 id=&quot;换硬币问题&quot;&gt;&lt;a href=&quot;#换硬币问题&quot; class=&quot;headerlink</summary>
      
    
    
    
    <category term="算法" scheme="https://gallifrey.asia/categories/%E7%AE%97%E6%B3%95/"/>
    
    <category term="学校" scheme="https://gallifrey.asia/categories/%E7%AE%97%E6%B3%95/%E5%AD%A6%E6%A0%A1/"/>
    
    
    <category term="算法" scheme="https://gallifrey.asia/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>配套作业——搜索</title>
    <link href="https://gallifrey.asia/posts/5bdd72ac472b/"/>
    <id>https://gallifrey.asia/posts/5bdd72ac472b/</id>
    <published>2022-04-27T18:11:53.000Z</published>
    <updated>2022-04-27T18:11:53.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h2><ul><li>百钱白鸡问题，穷举法求解，要求二重循环编程解决。</li><li>DFS算法编程实现</li><li>0-1背包问题，回溯法编程解决（剪枝函数选做，非必需）</li><li><p>8皇后问题，回溯法编程实现</p></li><li><p>BFS算法编程实现</p></li></ul><h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><h3 id="百钱百鸡问题"><a href="#百钱百鸡问题" class="headerlink" title="百钱百鸡问题"></a>百钱百鸡问题</h3><div class="tabs" id="chicken"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#chicken-1">代码实现</button></li><li class="tab"><button type="button" data-href="#chicken-2">测试运行</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="chicken-1"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="type">int</span> a, b;</span><br><span class="line"><span class="keyword">for</span> (a = <span class="number">1</span>; a &lt;= <span class="number">20</span>; a++)</span><br><span class="line"><span class="keyword">for</span> (b = <span class="number">1</span>; b &lt;= <span class="number">33</span>; b++) &#123;</span><br><span class="line"><span class="keyword">if</span> ((<span class="number">100</span> - a - b) % <span class="number">3</span> == <span class="number">0</span>&amp;&amp;(<span class="number">5</span> * a + <span class="number">3</span> * b + (<span class="number">100</span> - a - b) / <span class="number">3</span> == <span class="number">100</span>)) &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d %d %d\n&quot;</span>, a, b, <span class="number">100</span>-a-b);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="chicken-2"><p><img src="/posts/5bdd72ac472b/clip_image001.png" alt="img"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="DFS实现"><a href="#DFS实现" class="headerlink" title="DFS实现"></a>DFS实现</h3><div class="tabs" id="dfs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#dfs-1">代码实现</button></li><li class="tab"><button type="button" data-href="#dfs-2">测试运行</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="dfs-1"><ul><li><p>这里是利用DFS实现图的遍历，测试图如下</p><p><img src="/posts/5bdd72ac472b/clip_image002.jpg" alt="image-20220428010149587"></p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DFS</span> &#123;</span><br><span class="line">    <span class="type">char</span>[] vertex=&#123;<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;e&#x27;</span>,<span class="string">&#x27;f&#x27;</span>,<span class="string">&#x27;g&#x27;</span>,<span class="string">&#x27;h&#x27;</span>,<span class="string">&#x27;i&#x27;</span>,<span class="string">&#x27;j&#x27;</span>&#125;; <span class="comment">//顶点名称</span></span><br><span class="line">    <span class="type">int</span> n=<span class="number">10</span>;<span class="comment">//顶点数量</span></span><br><span class="line">    <span class="type">int</span> []visited=<span class="keyword">new</span> <span class="title class_">int</span>[n];<span class="comment">//是否访问</span></span><br><span class="line">    <span class="comment">//邻接矩阵图</span></span><br><span class="line">    <span class="type">int</span> edge[][]=&#123;</span><br><span class="line">        <span class="comment">//  a  b c d e f g h i j</span></span><br><span class="line">            &#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>&#125;,      <span class="comment">//a</span></span><br><span class="line">            &#123;<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>&#125;,      <span class="comment">//b</span></span><br><span class="line">            &#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>&#125;,      <span class="comment">//c</span></span><br><span class="line">            &#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>&#125;,      <span class="comment">//d</span></span><br><span class="line">            &#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>&#125;,      <span class="comment">//e</span></span><br><span class="line">            &#123;<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>&#125;,      <span class="comment">//f</span></span><br><span class="line">            &#123;<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>&#125;,      <span class="comment">//g</span></span><br><span class="line">            &#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>&#125;,      <span class="comment">//h</span></span><br><span class="line">            &#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>&#125;,      <span class="comment">//i</span></span><br><span class="line">            &#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>&#125;,      <span class="comment">//j</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//初始化</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;=n-<span class="number">1</span>;i++)   <span class="comment">// n个顶点标志位初始化</span></span><br><span class="line">        visited[i]=<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//对图g的顶点K进行深度遍历</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">DFSk</span> <span class="params">(Graph g, <span class="type">int</span> k)</span></span><br><span class="line">    &#123;  visited[k]=<span class="number">1</span>;</span><br><span class="line">        <span class="comment">// visit k 访问k顶点，我们把k的名字输出一下</span></span><br><span class="line">        System.out.print(vertex[k]+<span class="string">&quot;已访问  &quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;=n-<span class="number">1</span>;i++)</span><br><span class="line">        <span class="keyword">if</span> (g.edge[k][i]==<span class="number">1</span> &amp;&amp; visited[i]==<span class="number">0</span>)  DFSk(g,i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//考虑g的连通性</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">DFSt</span> <span class="params">(Graph g)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;=n-<span class="number">1</span>;i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (visited[i] == <span class="number">0</span>)&#123;</span><br><span class="line">                System.out.print(<span class="string">&quot;\n本次访问头：&quot;</span>+vertex[i]+<span class="string">&quot;  &quot;</span>);<span class="comment">//输出一下访问头，非连通则换行</span></span><br><span class="line">                DFSk(g, i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;访问顺序：&quot;</span>);</span><br><span class="line">        DFS dfs=<span class="keyword">new</span> <span class="title class_">DFS</span>();</span><br><span class="line">        dfs.DFSt(<span class="keyword">new</span> <span class="title class_">Graph</span>(dfs.vertex, dfs.edge));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//邻接矩阵表示图</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Graph</span> &#123;</span><br><span class="line">    <span class="type">char</span> []vertex;<span class="comment">//顶点信息</span></span><br><span class="line">    <span class="type">int</span> edge[][];<span class="comment">//边信息</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Graph</span><span class="params">(<span class="type">char</span>[] vertex, <span class="type">int</span>[][] edge)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.vertex = vertex;</span><br><span class="line">        <span class="built_in">this</span>.edge = edge;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="dfs-2"><p><img src="/posts/5bdd72ac472b/clip_image001-16510898266813.png" alt="img"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="回溯法解决01背包问题"><a href="#回溯法解决01背包问题" class="headerlink" title="回溯法解决01背包问题"></a>回溯法解决01背包问题</h3><div class="tabs" id="01beibao"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#01beibao-1">代码实现</button></li><li class="tab"><button type="button" data-href="#01beibao-2">测试运行</button></li><li class="tab"><button type="button" data-href="#01beibao-3">剪枝优化</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="01beibao-1"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">100000</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">double</span> currentWeight;<span class="comment">//当前重量</span></span><br><span class="line"><span class="type">double</span> maxWeight;<span class="comment">//最大重量</span></span><br><span class="line"><span class="type">double</span> currentValue;<span class="comment">//当前价值</span></span><br><span class="line"><span class="type">double</span> bestValue;<span class="comment">//最大价值</span></span><br><span class="line"><span class="type">int</span> n;<span class="comment">//物品数量</span></span><br><span class="line"><span class="type">double</span> value[N];<span class="comment">//用一个数组记录每个物品的价值</span></span><br><span class="line"><span class="type">double</span> weight[N];<span class="comment">//用一个数组记录每个物品的重量</span></span><br><span class="line"><span class="type">int</span> bestRes [N];<span class="comment">//用一个数组记录最好结果的序号</span></span><br><span class="line"><span class="type">int</span> x[N];<span class="comment">//回溯作为容器记录物品01状态的数组</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">backtrack</span><span class="params">(<span class="type">int</span> t)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (t &gt; n) &#123;<span class="comment">//已遍历全部物体,得到一组解</span></span><br><span class="line"><span class="comment">//判断是否更新最优解</span></span><br><span class="line"><span class="keyword">if</span> (currentValue &gt; bestValue) &#123;</span><br><span class="line">bestValue = currentValue;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) bestRes[i] = x[i];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">1</span>; i++) &#123;</span><br><span class="line"><span class="comment">//设置物品状态 1要 0不要 所以说是01背包问题</span></span><br><span class="line">x[t] = i;</span><br><span class="line"><span class="comment">//1的话,不超重则进入下一个物品的判断</span></span><br><span class="line"><span class="keyword">if</span> (x[t]==<span class="number">1</span>&amp;&amp; (currentWeight + weight[t] &lt; maxWeight)) &#123;</span><br><span class="line">currentValue += value[t];<span class="comment">//更新当前价值</span></span><br><span class="line">currentWeight += weight[t];<span class="comment">//更新当前重量</span></span><br><span class="line"><span class="built_in">backtrack</span>(t + <span class="number">1</span>);</span><br><span class="line">currentValue -= value[t];<span class="comment">//回退价值</span></span><br><span class="line">currentWeight -= weight[t];<span class="comment">//回退重量</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//0则直接进入下一个物品判断</span></span><br><span class="line"><span class="keyword">if</span> (x[t] == <span class="number">0</span>) &#123;</span><br><span class="line"><span class="built_in">backtrack</span>(t + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;输入背包最大容量maxWeight，物品数目n&quot;</span> &lt;&lt; endl;</span><br><span class="line">cin &gt;&gt; maxWeight&gt;&gt; n;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;输入n件物品的重量weight与价值value&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">cin &gt;&gt; weight[i] &gt;&gt; value[i];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">backtrack</span>(<span class="number">0</span>);<span class="comment">//子集树回溯</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;最大价值为&quot;</span> &lt;&lt; bestValue &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;放入背包的物品序号&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line"><span class="keyword">if</span> (bestRes[i] ==<span class="number">1</span> ) &#123;</span><br><span class="line">cout &lt;&lt; i+<span class="number">1</span> &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="01beibao-2"><p><img src="/posts/5bdd72ac472b/image-20220428130347566.png" alt="image-20220428130347566"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="01beibao-3"><ul><li><p>其实在直接回溯的过程中，我们有很多节点是没有必要去访问的，在这里我们可以设计剪枝函数去优化代码</p></li><li><p>文章参考<a href="https://blog.csdn.net/yangshucheng2018/article/details/105157948">(18条消息) 0 1背包回溯法详解_羊书change的博客-CSDN博客_01背包回溯</a></p></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> MAXN = <span class="number">200</span>;</span><br><span class="line"><span class="type">int</span> C, n;</span><br><span class="line"><span class="type">int</span> x[MAXN], bestK[MAXN];<span class="comment">//存储节点序号</span></span><br><span class="line"><span class="type">int</span> cw;<span class="comment">//cw存储当前已放入背包的重量</span></span><br><span class="line"><span class="type">double</span> bestv = <span class="number">-1</span>, curv = <span class="number">0</span>;<span class="comment">//bestv存储全局最大价值，curv存储当前的价值</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Knap</span> &#123;</span><br><span class="line"><span class="type">int</span> num;<span class="comment">//物品的序号</span></span><br><span class="line"><span class="type">double</span> weight;<span class="comment">//必须是double才可以进行除法的比大小</span></span><br><span class="line"><span class="type">double</span> value;<span class="comment">//物品的价值</span></span><br><span class="line">&#125;;</span><br><span class="line">Knap K[MAXN];</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Compare</span><span class="params">(Knap a, Knap b)</span> </span>&#123;<span class="comment">//单位重量价值高的排在前面</span></span><br><span class="line"><span class="keyword">return</span> a.value / a.weight &gt; b.value / b.weight;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">remainMaxValue</span><span class="params">(<span class="type">int</span> k)</span> </span>&#123;<span class="comment">//求出不选择第k性价比物品时，有可能的剩余最大价值</span></span><br><span class="line"><span class="type">int</span> rw = C - cw;<span class="comment">//背包剩余的质量</span></span><br><span class="line"><span class="type">double</span> b = curv;<span class="comment">//当前已有的价值</span></span><br><span class="line"><span class="keyword">while</span> (k + <span class="number">1</span> &lt;= n &amp;&amp; K[k + <span class="number">1</span>].weight &lt;= rw) &#123;<span class="comment">//如果还有物品，并且这个物品小于剩余的质量，则放入</span></span><br><span class="line">b += K[k + <span class="number">1</span>].value;<span class="comment">//更新价值</span></span><br><span class="line">rw += K[k + <span class="number">1</span>].weight;<span class="comment">//跟新剩余容量</span></span><br><span class="line">k = k + <span class="number">1</span>;<span class="comment">//对下一个物品进行判断</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (k + <span class="number">1</span> &lt;= n) &#123;<span class="comment">//剩余的容量选择部分物品</span></span><br><span class="line">b = b + K[k + <span class="number">1</span>].value / K[k + <span class="number">1</span>].weight * rw;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Backtrack</span><span class="params">(<span class="type">int</span> k)</span> </span>&#123;<span class="comment">//对第k性价比的物品进行搜索</span></span><br><span class="line"><span class="keyword">if</span> (k &gt; n) &#123;<span class="comment">//所有的物品都循环完了</span></span><br><span class="line"><span class="keyword">if</span> (curv &gt; bestv) &#123;</span><br><span class="line">bestv = curv;<span class="comment">//记录最大值</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">bestK[i] = x[i];<span class="comment">//更新放入的物品序号</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (cw + K[k].weight &lt;= C) &#123;<span class="comment">//如果当前这个序号的物品不超重(小于等于)，试着放入</span></span><br><span class="line">x[K[k].num] = <span class="number">1</span>;<span class="comment">//把当前序号标记</span></span><br><span class="line">cw += K[k].weight;<span class="comment">//更新当前重量</span></span><br><span class="line">curv += K[k].value;<span class="comment">//更新当前价值</span></span><br><span class="line"><span class="built_in">Backtrack</span>(k + <span class="number">1</span>);<span class="comment">//进入下一步</span></span><br><span class="line">cw -= K[k].weight;<span class="comment">//回退重量</span></span><br><span class="line">curv -= K[k].value;<span class="comment">//回退价值</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">remainMaxValue</span>(k) &gt; bestv) &#123;</span><br><span class="line"><span class="comment">//如果不选择第k性价比的物品时剩余最大价值可以超过当前最大价值，有进行下一步的必要</span></span><br><span class="line">x[K[k].num] = <span class="number">0</span>;<span class="comment">//不选择k</span></span><br><span class="line"><span class="built_in">Backtrack</span>(k + <span class="number">1</span>);<span class="comment">//下一步</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;输入背包容量C，物品数目n&quot;</span> &lt;&lt; endl;</span><br><span class="line">cin &gt;&gt; C &gt;&gt; n;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;输入n件物品的重量与价值&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">K[i].num = i;</span><br><span class="line">cin &gt;&gt; K[i].weight &gt;&gt; K[i].value;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">sort</span>(K + <span class="number">1</span>, K + n + <span class="number">1</span>, Compare);<span class="comment">//按照性价比进行排序</span></span><br><span class="line"><span class="built_in">Backtrack</span>(<span class="number">1</span>);<span class="comment">//子集树回溯</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;最大价值为&quot;</span> &lt;&lt; bestv &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;放入背包的物品序号&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line"><span class="keyword">if</span> (bestK[i] != <span class="number">0</span>) &#123;</span><br><span class="line">cout &lt;&lt; i &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="BFS实现"><a href="#BFS实现" class="headerlink" title="BFS实现"></a>BFS实现</h3><div class="tabs" id="bfs"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#bfs-1">代码实现</button></li><li class="tab"><button type="button" data-href="#bfs-2">测试运行</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="bfs-1"><ul><li>本来想写bfs实现图的遍历的，但是临近考试，时间有点紧，这个给大家展示一个我自己写的迷宫小游戏里面bfs解决迷宫问题的算法，也是算bfs的实现了</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.mazegame4;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javafx.animation.SequentialTransition;</span><br><span class="line"><span class="keyword">import</span> javafx.animation.TranslateTransition;</span><br><span class="line"><span class="keyword">import</span> javafx.scene.Group;</span><br><span class="line"><span class="keyword">import</span> javafx.scene.paint.Color;</span><br><span class="line"><span class="keyword">import</span> javafx.scene.shape.Polyline;</span><br><span class="line"><span class="keyword">import</span> javafx.scene.shape.Rectangle;</span><br><span class="line"><span class="keyword">import</span> javafx.util.Duration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> java.util.Queue;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.LinkedBlockingQueue;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BFS</span> <span class="keyword">implements</span> <span class="title class_">SF</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> LinkedList&lt;Node&gt; linkedList;</span><br><span class="line">    <span class="keyword">private</span> LinkedList&lt;Node&gt; linkedList2;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> front=-<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> rear=-<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">private</span> Node[][] nodeMap;</span><br><span class="line">    <span class="keyword">private</span> MainMap mainMap;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BFS</span><span class="params">(MainMap mainMap)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.mainMap = mainMap;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//查找</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">find</span><span class="params">()</span>&#123;</span><br><span class="line">        Node start= mainMap.getStart();</span><br><span class="line">        Node end=mainMap.getEnd();</span><br><span class="line">        start.setPre(-<span class="number">1</span>);</span><br><span class="line">        nodeMap =mainMap.nodeMap;</span><br><span class="line"></span><br><span class="line">        linkedList=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        Node temp=<span class="literal">null</span>;</span><br><span class="line">        linkedList.offer(start);</span><br><span class="line">        rear++;</span><br><span class="line">        nodeMap[start.getX()][start.getY()].setValue(-<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">while</span>(!(front==rear)) &#123;</span><br><span class="line">            temp=linkedList.get(++front);</span><br><span class="line">            <span class="comment">//判断是不是终点</span></span><br><span class="line">            <span class="keyword">if</span> (temp.getX() ==end.getX() &amp;&amp; temp.getY() ==end.getY()) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//遍历4个方向</span></span><br><span class="line"></span><br><span class="line">            <span class="type">Node</span> <span class="variable">temp2</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">                <span class="keyword">switch</span> (i) &#123;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                        temp2 = <span class="keyword">new</span> <span class="title class_">Node</span>(temp.x, temp.y - <span class="number">1</span>);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                        temp2 = <span class="keyword">new</span> <span class="title class_">Node</span>(temp.x, temp.y + <span class="number">1</span>);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                        temp2 =  <span class="keyword">new</span> <span class="title class_">Node</span>(temp.x - <span class="number">1</span>, temp.y);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                        temp2 = <span class="keyword">new</span> <span class="title class_">Node</span>(temp.x + <span class="number">1</span>, temp.y);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//可走进队</span></span><br><span class="line">                <span class="keyword">if</span> (temp2.getX()&lt;mainMap.getCol()&amp;&amp;temp2.getX()&gt;<span class="number">0</span>&amp;&amp;temp.getY()&gt;<span class="number">0</span>&amp;&amp;temp2.getY()&lt;mainMap.getRow()&amp;&amp;nodeMap[temp2.getX()][temp2.getY()].getValue()==<span class="number">0</span>) &#123;</span><br><span class="line"></span><br><span class="line">                    linkedList.offer(temp2);</span><br><span class="line">                    rear++;</span><br><span class="line">                    temp2.id=linkedList.indexOf(temp2);</span><br><span class="line">                    temp2.setPre(temp.getId());</span><br><span class="line">                    nodeMap[temp2.getX()][temp2.getY()].setValue(-<span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>  <span class="type">boolean</span> <span class="title function_">find2</span><span class="params">()</span>&#123;</span><br><span class="line">        linkedList2=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        linkedList2.add(linkedList.get(front));</span><br><span class="line">        <span class="type">int</span> j=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (linkedList2.get(j).getPre()!=-<span class="number">1</span>)&#123;</span><br><span class="line">            linkedList2.add(linkedList.get(linkedList2.get(j).getPre()));</span><br><span class="line">            j++;</span><br><span class="line">        &#125;</span><br><span class="line">        linkedList=linkedList2;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> LinkedList&lt;Node&gt; <span class="title function_">find3</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> time1=<span class="keyword">new</span> <span class="title class_">Date</span>().getTime();</span><br><span class="line">        System.out.println(time1);</span><br><span class="line">        find();</span><br><span class="line">        find2();</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> time2=<span class="keyword">new</span> <span class="title class_">Date</span>().getTime();</span><br><span class="line">        System.out.println(time2);</span><br><span class="line">        System.out.println(time2-time1);</span><br><span class="line">        <span class="keyword">return</span> linkedList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (Node temp: linkedList) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot; &quot;</span>+temp.getX()+<span class="string">&quot;   &quot;</span>+temp.getY() +<span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        DfsMap dfsMap=<span class="keyword">new</span> <span class="title class_">DfsMap</span>(<span class="number">10</span>,<span class="number">10</span>);</span><br><span class="line">        dfsMap.makeMap();</span><br><span class="line">        dfsMap.showMap();</span><br><span class="line">        BFS bfs=<span class="keyword">new</span> <span class="title class_">BFS</span>(dfsMap);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;-------------------------&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        bfs.find3();</span><br><span class="line"></span><br><span class="line">        bfs.show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="bfs-2"><p><img src="/posts/5bdd72ac472b/image-20220428043547057.png" alt="image-20220428043547057"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="八皇后问题"><a href="#八皇后问题" class="headerlink" title="八皇后问题"></a>八皇后问题</h3><div class="tabs" id="8quene"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#8quene-1">代码实现</button></li><li class="tab"><button type="button" data-href="#8quene-2">测试运行</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="8quene-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Queen</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> n=<span class="number">8</span>;<span class="comment">//皇后数量</span></span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> x[]=&#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>&#125;;<span class="comment">//x[t]=i 就是皇后放在t行i列</span></span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> sum;<span class="comment">//可行方案数</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">place</span> <span class="params">(<span class="type">int</span> k)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">1</span>;j&lt;k;j++)</span><br><span class="line">            <span class="keyword">if</span> ((Math.abs(k-j)==Math.abs(x[j]-x[k]))||(x[j]==x[k])) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">backtrack</span> <span class="params">(<span class="type">int</span> t)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (t &gt; n) sum++;       <span class="comment">//sum是可行方案的个数</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">                x[t] = i;</span><br><span class="line">                <span class="keyword">if</span> (place(t)) backtrack(t + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Queen queen=<span class="keyword">new</span> <span class="title class_">Queen</span>();</span><br><span class="line">        backtrack(<span class="number">0</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;可行方案数：&quot;</span>+sum);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="8quene-2"><p><img src="/posts/5bdd72ac472b/image-20220428045846934.png" alt="image-20220428045846934"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;需求&quot;&gt;&lt;a href=&quot;#需求&quot; class=&quot;headerlink&quot; title=&quot;需求&quot;&gt;&lt;/a&gt;需求&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;百钱白鸡问题，穷举法求解，要求二重循环编程解决。&lt;/li&gt;
&lt;li&gt;DFS算法编程实现&lt;/li&gt;
&lt;li&gt;0-1背包问题，回溯法</summary>
      
    
    
    
    <category term="算法" scheme="https://gallifrey.asia/categories/%E7%AE%97%E6%B3%95/"/>
    
    <category term="学校" scheme="https://gallifrey.asia/categories/%E7%AE%97%E6%B3%95/%E5%AD%A6%E6%A0%A1/"/>
    
    
    <category term="算法" scheme="https://gallifrey.asia/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>算法设计与应用——搜索法</title>
    <link href="https://gallifrey.asia/posts/8b6f243cca9b/"/>
    <id>https://gallifrey.asia/posts/8b6f243cca9b/</id>
    <published>2022-04-27T16:32:15.000Z</published>
    <updated>2022-04-27T16:32:15.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="搜索法"><a href="#搜索法" class="headerlink" title="搜索法"></a>搜索法</h1><ul><li>穷举法</li><li>回溯法</li><li>分支界限法</li></ul><h1 id="穷举策略"><a href="#穷举策略" class="headerlink" title="穷举策略"></a>穷举策略</h1><ul><li><p>不经过思考（很少思考），把问题的所有情况和所有过程交给计算机去一一尝试。</p><ul><li>顺序查找</li><li>穷举搜索</li></ul></li><li><p>穷举法解决问题的过程</p><ul><li>找出问题的范围</li><li>找出约束条件</li></ul></li></ul><h3 id="百钱百鸡问题"><a href="#百钱百鸡问题" class="headerlink" title="百钱百鸡问题"></a>百钱百鸡问题</h3><ul><li><p>我国古代数学家张丘建在《算经》一书中提出的数学问题：</p><p>鸡翁一值钱五，鸡母一值钱三，鸡雏三值钱一。百钱买百鸡，问鸡翁、鸡母、鸡雏各何？</p></li><li><p>算法一</p><p>求解范围：每种鸡数目&lt;=100<br>约束条件：a+b+c=100 </p><pre><code>                ((5*a)+(3*b)+(c/3))=100</code></pre><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(a=<span class="number">1</span>;a&lt;=<span class="number">100</span>;a++) </span><br><span class="line">    <span class="keyword">for</span>(b=<span class="number">1</span>;b&lt;=<span class="number">100</span>;b++)</span><br><span class="line">        <span class="keyword">for</span>(b=<span class="number">1</span>;b&lt;=<span class="number">100</span>;b++)           </span><br><span class="line">   <span class="keyword">if</span>((<span class="number">5</span>*a)+(<span class="number">3</span>*b)+(c/<span class="number">3</span>))==<span class="number">100</span>)and(a+b+c=<span class="number">100</span> ))                 </span><br><span class="line">           <span class="built_in">printf</span>(<span class="string">&quot;%d %d %d\n&quot;</span>,a,b,c);</span><br></pre></td></tr></table></figure><p>算法效率：尝试1000000次    </p></li><li><p>优化</p><ul><li><p>缩减求解范围</p></li><li><p>同时可能需要修改约束条件</p></li></ul></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (a = <span class="number">1</span>; a &lt;= <span class="number">20</span>; a++)</span><br><span class="line">    <span class="keyword">for</span> (b = <span class="number">1</span>; b &lt;= <span class="number">33</span>; b++) &#123;</span><br><span class="line">        <span class="keyword">if</span> ((<span class="number">100</span> - a - b) % <span class="number">3</span> == <span class="number">0</span>&amp;&amp;(<span class="number">5</span> * a + <span class="number">3</span> * b + (<span class="number">100</span> - a - b) / <span class="number">3</span> == <span class="number">100</span>)) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d %d %d\n&quot;</span>, a, b, <span class="number">100</span>-a-b);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h1 id="回溯法"><a href="#回溯法" class="headerlink" title="回溯法"></a>回溯法</h1><p>Backtracking</p><h3 id="基本思想"><a href="#基本思想" class="headerlink" title="基本思想"></a>基本思想</h3><p><img src="/posts/8b6f243cca9b/image-20220428004603626.png" alt="image-20220428004603626"></p><h2 id="深度优先策略（DFS）"><a href="#深度优先策略（DFS）" class="headerlink" title="深度优先策略（DFS）"></a>深度优先策略（DFS）</h2><p><img src="/posts/8b6f243cca9b/image-20220428004627934.png" alt="image-20220428004627934"></p><ul><li>图的遍历（dfs）</li></ul><p><img src="/posts/8b6f243cca9b/image-20220428004921020.png" alt="image-20220428004921020"></p><h3 id="DFS实现"><a href="#DFS实现" class="headerlink" title="DFS实现"></a>DFS实现</h3><ul><li>像下面的图，要考虑图的连通性</li></ul><p><img src="/posts/8b6f243cca9b/image-20220428010149587.png" alt="image-20220428010149587"></p><ul><li>伪代码</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">procedure explore(G,v)</span><br><span class="line">visited[v] = true</span><br><span class="line">for each edge (v,u) in E:</span><br><span class="line">    if not visited[u]:</span><br><span class="line">          explore(G,u)</span><br><span class="line"></span><br><span class="line">procedure dfs(G)</span><br><span class="line">for all v in V:</span><br><span class="line">   visited[v] = false</span><br><span class="line">for all v in V:</span><br><span class="line">   if not visited[v]:</span><br><span class="line">         explore(G,v)</span><br></pre></td></tr></table></figure><ul><li>核心代码</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//C[ ][ ]是图的邻接矩阵，visited[i]表示顶点i是否被访问过</span></span><br><span class="line"><span class="built_in">For</span> (i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++)   <span class="comment">// n个顶点标志位初始化</span></span><br><span class="line">    visited[i]=<span class="number">0</span>;</span><br><span class="line"> </span><br><span class="line"><span class="built_in">DFSk</span> (Graph g, <span class="type">int</span> k)  <span class="comment">//对图g的顶点K进行深度遍历</span></span><br><span class="line">&#123;  visited[k]=<span class="number">1</span>;</span><br><span class="line">    visit k;</span><br><span class="line">    <span class="keyword">for</span> (i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++)</span><br><span class="line">       <span class="keyword">if</span> (g.c[k][i]==<span class="number">1</span> &amp;&amp; visited[i]==<span class="number">0</span>)  <span class="built_in">DFSk</span>(g,i);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="built_in">DFS</span> (Graph g)   <span class="comment">//考虑g的连通性</span></span><br><span class="line">&#123;   <span class="keyword">for</span> (i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>,i++)</span><br><span class="line">        <span class="keyword">if</span> (visited[i]==<span class="number">0</span>)  <span class="built_in">DFSk</span>(g,i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="背包问题"><a href="#背包问题" class="headerlink" title="背包问题"></a>背包问题</h2><h3 id="01背包问题—物体不可分割"><a href="#01背包问题—物体不可分割" class="headerlink" title="01背包问题—物体不可分割"></a>01背包问题—物体不可分割</h3><p><img src="/posts/8b6f243cca9b/image-20220428010558519.png" alt="image-20220428010558519"></p><h3 id="普通背包问题—物体可分割"><a href="#普通背包问题—物体可分割" class="headerlink" title="普通背包问题—物体可分割"></a>普通背包问题—物体可分割</h3><p><img src="/posts/8b6f243cca9b/image-20220428010614757.png" alt="image-20220428010614757"></p><h3 id="回溯法求解01背包问题"><a href="#回溯法求解01背包问题" class="headerlink" title="回溯法求解01背包问题"></a>回溯法求解01背包问题</h3><p><img src="/posts/8b6f243cca9b/image-20220428012147749.png" alt="image-20220428012147749"></p><h2 id="子集树和排列树"><a href="#子集树和排列树" class="headerlink" title="子集树和排列树"></a>子集树和排列树</h2><p><img src="/posts/8b6f243cca9b/image-20220428010659497.png" alt="image-20220428010659497"></p><p><img src="/posts/8b6f243cca9b/image-20220428010721372.png" alt="image-20220428010721372"></p><p><img src="/posts/8b6f243cca9b/image-20220428010742055.png" alt="image-20220428010742055" style="zoom:110%;"></p><h3 id="子集树：0-1背包问题"><a href="#子集树：0-1背包问题" class="headerlink" title="子集树：0-1背包问题"></a>子集树：0-1背包问题</h3><p><img src="/posts/8b6f243cca9b/image-20220428011022730.png" alt="image-20220428011022730"></p><p><img src="/posts/8b6f243cca9b/image-20220428011138108.png" alt="image-20220428011138108"></p><h3 id="排列树：-旅行售货员问题"><a href="#排列树：-旅行售货员问题" class="headerlink" title="排列树： 旅行售货员问题"></a>排列树： 旅行售货员问题</h3><p><img src="/posts/8b6f243cca9b/image-20220428012356661.png" alt="image-20220428012356661"></p><p><img src="/posts/8b6f243cca9b/image-20220428012611027.png" alt="image-20220428012611027"></p><h2 id="剪枝函数"><a href="#剪枝函数" class="headerlink" title="剪枝函数"></a>剪枝函数</h2><p><img src="/posts/8b6f243cca9b/image-20220428012618493.png" alt="image-20220428012618493"></p><p><img src="/posts/8b6f243cca9b/image-20220428012710211.png" alt="image-20220428012710211"></p><h3 id="剪枝函数优化01背包问题"><a href="#剪枝函数优化01背包问题" class="headerlink" title="剪枝函数优化01背包问题"></a>剪枝函数优化01背包问题</h3><p><img src="/posts/8b6f243cca9b/image-20220428012800629.png" alt="image-20220428012800629" style="zoom:80%;"></p><ul><li>核心代码</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="type">static</span> <span class="type">void</span> <span class="title">backtrack</span> <span class="params">(<span class="type">int</span> i)</span></span></span><br><span class="line"><span class="function">   </span>&#123;<span class="comment">// 搜索第i层结点</span></span><br><span class="line">      <span class="keyword">if</span> (i &gt; n)  <span class="comment">// 到达叶结点</span></span><br><span class="line">      更新最优解bestx,bestw;<span class="keyword">return</span>;</span><br><span class="line">      r -= w[i];</span><br><span class="line">      <span class="keyword">if</span> (cw + w[i] &lt;= c) &#123;<span class="comment">// 搜索左子树 背包还能装的下</span></span><br><span class="line">         x[i] = <span class="number">1</span>;</span><br><span class="line">         cw += w[i];</span><br><span class="line">         <span class="built_in">backtrack</span>(i + <span class="number">1</span>);</span><br><span class="line">         cw -= w[i];      &#125;</span><br><span class="line">      <span class="keyword">if</span> (cw + r &gt; bestw)  &#123;</span><br><span class="line">         x[i] = <span class="number">0</span>;  <span class="comment">// 搜索右子树 后面价值更高，放弃某件物品</span></span><br><span class="line">         <span class="built_in">backtrack</span>(i + <span class="number">1</span>);      &#125;</span><br><span class="line">      r += w[i];</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h3 id="剪枝函数优化旅行售货员问题"><a href="#剪枝函数优化旅行售货员问题" class="headerlink" title="剪枝函数优化旅行售货员问题"></a>剪枝函数优化旅行售货员问题</h3><p><img src="/posts/8b6f243cca9b/image-20220428013129851.png" alt="image-20220428013129851" style="zoom:80%;"></p><h2 id="8皇后问题"><a href="#8皇后问题" class="headerlink" title="8皇后问题"></a>8皇后问题</h2><p><img src="/posts/8b6f243cca9b/image-20220428014001403.png" alt="image-20220428014001403"></p><h3 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h3><ul><li>若不考虑约束条件，每个皇后都可以尝试放在64个方格中，可以用简单穷举算法,构造如下：  </li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">for p1:=1 to 64 do</span><br><span class="line">for p2:=1 to 64 do   </span><br><span class="line">for p3:=1 to 64 do     </span><br><span class="line">for p8:=1 to 64 do     </span><br><span class="line">if（任意两个皇后满足不在同一行、同一列、同一斜线上） </span><br><span class="line">then          </span><br><span class="line">输出该摆放方法</span><br></pre></td></tr></table></figure><p>  显然，这种不加条件约束的穷举，需要64的8次方次搜索，时间不够用。因此如果用穷举，需要加约束条件减少搜索次数</p><h3 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h3><ul><li>题目已经规定了任意两个皇后不能位于同一行，那么就可以假定第1个皇后位于第一行，第2个皇后位于第二行……第8个皇后位于第八行。这样,每个皇后只需要在8个列的位置中进行选择:  </li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">for p1:=1 to 8 do</span><br><span class="line">for p2:=1 to 8 do if p2&lt;&gt;p1 then     </span><br><span class="line">for p3:=1 to 8 do   if p3&lt;&gt;p2 then    </span><br><span class="line">……</span><br><span class="line">        for p8:=1 to 8 do         </span><br><span class="line">        if（任意两个皇后满足不在同一列、同一斜线上） then              </span><br><span class="line">        输出该摆放方法。</span><br></pre></td></tr></table></figure><p>这个程序只需要8的8次方次运算</p><h3 id="回溯法-1"><a href="#回溯法-1" class="headerlink" title="回溯法"></a>回溯法</h3><ul><li>在N个皇后未放置完成前，摆放第I个皇后和第I+1个皇后的试探方法是相同的，因此完全可以采用递归的方法来处理。</li><li>算法结构如下：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Procedure Try(I:integer)；&#123;搜索第I行皇后的位置&#125;</span><br><span class="line"> var  j:integer;</span><br><span class="line"> begin</span><br><span class="line">  if I=n+1 then 输出方案；</span><br><span class="line">  for j:=1 to n do </span><br><span class="line">    if 皇后能放在第I行第J列的位置 then begin</span><br><span class="line">       放置第I个皇后；</span><br><span class="line">       对放置皇后的位置进行标记；</span><br><span class="line">       Try（I+1） </span><br><span class="line">       对放置皇后的位置释放标记；</span><br><span class="line">    End;</span><br><span class="line"> End; </span><br></pre></td></tr></table></figure><ul><li>解向量：(x1, x2, … , xn)</li><li>显约束：xi=1,2, … ,n</li><li>隐约束：<ul><li>不同列：xi != xj</li><li>不处于同一正、反对角线：|i-j|!=|xi-xj|</li></ul></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="type">static</span> boolean <span class="title">place</span> <span class="params">(<span class="type">int</span> k)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> j=<span class="number">1</span>;j&lt;k;j++)</span><br><span class="line">    <span class="keyword">if</span> ((Math.<span class="built_in">abs</span>(k-j)==Math.<span class="built_in">abs</span>(x[j]-x[k]))||(x[j]==x[k])) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="type">static</span> <span class="type">void</span> <span class="title">backtrack</span> <span class="params">(<span class="type">int</span> t)</span></span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (t&gt;n) sum++;       <span class="comment">//sum是可行方案的个数</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">          <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</span><br><span class="line">            x[t]=i;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">place</span>(t)) <span class="built_in">backtrack</span>(t+<span class="number">1</span>);</span><br><span class="line">           &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="分支界限法"><a href="#分支界限法" class="headerlink" title="分支界限法"></a>分支界限法</h1><p>Branch-and-Bound</p><h2 id="基本思想-1"><a href="#基本思想-1" class="headerlink" title="基本思想"></a>基本思想</h2><p><img src="/posts/8b6f243cca9b/image-20220428015748309.png" alt="image-20220428015748309"></p><p><img src="/posts/8b6f243cca9b/image-20220428015754954.png" alt="image-20220428015754954"></p><p><img src="/posts/8b6f243cca9b/image-20220428015812806.png" alt="image-20220428015812806"></p><p><img src="/posts/8b6f243cca9b/image-20220428015818014.png" alt="image-20220428015818014"></p><p><img src="/posts/8b6f243cca9b/image-20220428015826461.png" alt="image-20220428015826461"></p><p><img src="/posts/8b6f243cca9b/image-20220428015931186.png" alt="image-20220428015931186"></p><h2 id="BFS实现"><a href="#BFS实现" class="headerlink" title="BFS实现"></a>BFS实现</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TreeNode</span> &#123;</span><br><span class="line">    <span class="type">int</span> val;</span><br><span class="line">    TreeNode left;</span><br><span class="line">    TreeNode right;</span><br><span class="line"></span><br><span class="line">    TreeNode(<span class="type">int</span> x) &#123;</span><br><span class="line">        val = x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">levelOrder</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    List&lt;List&lt;Integer&gt;&gt; allResults = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> allResults;</span><br><span class="line">    &#125;</span><br><span class="line">    Queue&lt;TreeNode&gt; nodes = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    nodes.add(root);</span><br><span class="line">    <span class="keyword">while</span> (!nodes.isEmpty()) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> nodes.size();</span><br><span class="line">        List&lt;Integer&gt; results = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">            <span class="type">TreeNode</span> <span class="variable">node</span> <span class="operator">=</span> nodes.poll();</span><br><span class="line">            results.add(node.val);</span><br><span class="line">            <span class="keyword">if</span> (node.left != <span class="literal">null</span>) &#123;</span><br><span class="line">                nodes.add(node.left);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (node.right != <span class="literal">null</span>) &#123;</span><br><span class="line">                nodes.add(node.right);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        allResults.add(results);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> allResults;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="/posts/8b6f243cca9b/image-20220428042630332.png" alt="image-20220428042630332"></p><h1 id="配套作业"><a href="#配套作业" class="headerlink" title="配套作业"></a>配套作业</h1><div class="tag link"><a class="link-card" title="配套作业——搜索" href="https://gallifrey.asia/posts/5bdd72ac472b/"><div class="left"><img src="https://gallifrey.asia/images/shizi.png"></div><div class="right"><p class="text">配套作业——搜索</p><p class="url">https://gallifrey.asia/posts/5bdd72ac472b/</p></div></a></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;搜索法&quot;&gt;&lt;a href=&quot;#搜索法&quot; class=&quot;headerlink&quot; title=&quot;搜索法&quot;&gt;&lt;/a&gt;搜索法&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;穷举法&lt;/li&gt;
&lt;li&gt;回溯法&lt;/li&gt;
&lt;li&gt;分支界限法&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;穷举策略&quot;&gt;&lt;a </summary>
      
    
    
    
    <category term="算法" scheme="https://gallifrey.asia/categories/%E7%AE%97%E6%B3%95/"/>
    
    <category term="学校" scheme="https://gallifrey.asia/categories/%E7%AE%97%E6%B3%95/%E5%AD%A6%E6%A0%A1/"/>
    
    
    <category term="算法" scheme="https://gallifrey.asia/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>配套作业——分治策略</title>
    <link href="https://gallifrey.asia/posts/f5ccd0a9e3db/"/>
    <id>https://gallifrey.asia/posts/f5ccd0a9e3db/</id>
    <published>2022-04-27T03:06:36.000Z</published>
    <updated>2022-04-27T03:06:36.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h2><ul><li>解释分治策略的基本思想，并用它分析大整数相乘问题</li></ul><ul><li>选做：编程实现大整数相乘问题（选做）</li></ul><ul><li>编程实现二分搜索，快速排序，棋盘覆盖问题</li></ul><ul><li>编程实现归并排序，并简述其中的分治策略体现在哪里（选做）</li></ul><h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><h3 id="大整数相乘"><a href="#大整数相乘" class="headerlink" title="大整数相乘"></a>大整数相乘</h3><div class="tabs" id="bignum"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#bignum-1">解释与分析</button></li><li class="tab"><button type="button" data-href="#bignum-2">代码实现</button></li><li class="tab"><button type="button" data-href="#bignum-3">测试运行</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="bignum-1"><ul><li>分治策略思想：<ul><li>分：把问题分解成两个或者更小规模的子问题</li><li>治：利用递归解决子问题</li><li>合：归并子问题的解得到原问题的解</li></ul></li><li>如果用分治策略解大整数相乘问题：<ul><li>把两个整数拆分成四个小整数相乘</li><li>利用·<code>AD+BC）=（A+B）*（C+D）-AC-BD</code>替换，将4次乘法运算降低到3次</li></ul></li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="bignum-2"><ul><li>这里的大整数相乘只是着重于降低算法的时间复杂度，并不能真正做到大整数相乘（溢出）</li><li>要写出真正的大整数相乘，应该用一个字符数组来输入输出数组</li><li>感兴趣的读者可以参考<a href="https://gallifrey.asia/posts/103f21646138/">基础算法二 | Gallifrey’s Blog</a>中高精度乘法，编写真正的两个大整数相乘代码</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> n=<span class="number">1</span>;<span class="comment">//位数</span></span><br><span class="line"><span class="type">int</span> n2=<span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="type">long</span> <span class="type">long</span> <span class="title">multiply</span><span class="params">(<span class="type">long</span> <span class="type">long</span> x, <span class="type">long</span> <span class="type">long</span> y)</span> </span>&#123;</span><br><span class="line"><span class="type">long</span> <span class="type">long</span> a, b,c,d,res;</span><br><span class="line"></span><br><span class="line">a = x;</span><br><span class="line">b = <span class="number">0</span>;</span><br><span class="line">c = y;</span><br><span class="line">d = <span class="number">0</span>;</span><br><span class="line"><span class="comment">//处理得到 a,b,c,d</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n/<span class="number">2</span>;i++)a = a / <span class="number">10</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n / <span class="number">2</span>; i++)c = c / <span class="number">10</span>;</span><br><span class="line">b = x - a * <span class="built_in">pow</span>(<span class="number">10</span>, n / <span class="number">2</span>);</span><br><span class="line">d = y - c * <span class="built_in">pow</span>(<span class="number">10</span>, n / <span class="number">2</span>);</span><br><span class="line"><span class="comment">//计算过程</span></span><br><span class="line"><span class="comment">//res = a * c * pow(10, n) + (a * d + b * c) * pow(10, n / 2)+b*d;</span></span><br><span class="line"><span class="comment">//其中 a*d+b*c= (a+b)*(c+d)-b*d-a*c ;将4次乘法将为3次</span></span><br><span class="line">res = a * c * <span class="built_in">pow</span>(<span class="number">10</span>, n) + ((a + b) * (c + d) - b * d - a * c) * <span class="built_in">pow</span>(<span class="number">10</span>, n / <span class="number">2</span>) + b * d;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="type">long</span> <span class="type">long</span>  x, y,tempx,tempy;</span><br><span class="line">cin &gt;&gt; x &gt;&gt; y;</span><br><span class="line">tempx = x;</span><br><span class="line">tempy = y;</span><br><span class="line"><span class="comment">//得到位数</span></span><br><span class="line"><span class="keyword">while</span> (tempx /= <span class="number">10</span>) &#123; n++; &#125;</span><br><span class="line"><span class="keyword">while</span> (tempy /= <span class="number">10</span>) &#123; n2++; &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="built_in">multiply</span>(x, y);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="bignum-3"><p><img src="/posts/f5ccd0a9e3db/image-20220427160557324.png" alt="image-20220427160557324"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="二分搜索"><a href="#二分搜索" class="headerlink" title="二分搜索"></a>二分搜索</h3><div class="tabs" id="bsearch"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#bsearch-1">代码实现</button></li><li class="tab"><button type="button" data-href="#bsearch-2">测试运行</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="bsearch-1"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">binarySearch</span><span class="params">(<span class="type">int</span> arr[], <span class="type">int</span> len, <span class="type">int</span> target)</span> </span>&#123;</span><br><span class="line"><span class="type">int</span> low = <span class="number">0</span>, high = len - <span class="number">1</span>,mid;</span><br><span class="line"><span class="keyword">while</span> (low &lt;= high) &#123;</span><br><span class="line">mid = (low + high) / <span class="number">2</span>;</span><br><span class="line"><span class="keyword">if</span> (arr[mid] == target) <span class="keyword">return</span> mid;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (arr[mid] &lt; target) low = mid + <span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (arr[mid] &gt; target)  high = mid - <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="type">int</span> arr[<span class="number">11</span>] = &#123; <span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">11</span>,<span class="number">22</span>,<span class="number">41</span>,<span class="number">53</span>,<span class="number">77</span>,<span class="number">214</span> &#125;;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;int arr[11] = &#123; 1,3,5,7,9,11,22,41,53,77,214 &#125;;&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;binarySearch(arr, 11, 77);&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;index: &quot;</span> &lt;&lt;<span class="built_in">binarySearch</span>(arr, <span class="number">11</span>, <span class="number">77</span>) &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="bsearch-2"><p><img src="/posts/f5ccd0a9e3db/image-20220427164633349.png" alt="image-20220427164633349"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h3><div class="tabs" id="quicksort"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#quicksort-1">代码实现</button></li><li class="tab"><button type="button" data-href="#quicksort-2">测试运行</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="quicksort-1"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">quicksort</span><span class="params">(<span class="type">int</span> arr[], <span class="type">int</span> low, <span class="type">int</span> high)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (low &gt;= high) <span class="keyword">return</span>;<span class="comment">//没有数返回</span></span><br><span class="line"><span class="type">int</span> l = low, h = high;</span><br><span class="line"><span class="type">int</span> x = arr[low];</span><br><span class="line"><span class="keyword">while</span> (low &lt; high) &#123;</span><br><span class="line"><span class="keyword">while</span> ((low &lt; high) &amp;&amp; (arr[high] &gt;= x)) high--;</span><br><span class="line"><span class="built_in">swap</span>(arr[low], arr[high]);</span><br><span class="line"><span class="keyword">while</span> ((low &lt; high) &amp;&amp; (arr[low] &lt;=x))low++;</span><br><span class="line"><span class="built_in">swap</span>(arr[low], arr[high]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">quicksort</span>(arr, l, high - <span class="number">1</span>);</span><br><span class="line"><span class="built_in">quicksort</span>(arr, high +<span class="number">1</span> ,h);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> arr2[<span class="number">9</span>] = &#123; <span class="number">24</span>,<span class="number">528</span>,<span class="number">46</span>,<span class="number">235</span>,<span class="number">623</span>,<span class="number">9</span>,<span class="number">58</span>,<span class="number">32</span>,<span class="number">3</span> &#125;;</span><br><span class="line"><span class="built_in">quicksort</span>(arr2, <span class="number">0</span>, <span class="number">8</span>);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;int arr2[9] = &#123; 24,528,46,235,623,9,58,32,3 &#125;;&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;quicksort(arr2, 0, 8); &quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> temp : arr2) &#123;</span><br><span class="line">cout &lt;&lt; temp &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="quicksort-2"><p><img src="/posts/f5ccd0a9e3db/clip_image001.png" alt="img"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="归并排序"><a href="#归并排序" class="headerlink" title="归并排序"></a>归并排序</h3><div class="tabs" id="mergesort"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#mergesort-1">代码实现</button></li><li class="tab"><button type="button" data-href="#mergesort-2">测试运行</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="mergesort-1"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">100000</span>;</span><br><span class="line"><span class="type">int</span> tmp[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">merge_sort</span><span class="params">(<span class="type">int</span> q[], <span class="type">int</span> l, <span class="type">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (l &gt;= r) <span class="keyword">return</span>;<span class="comment">//递归头</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> mid = l + r &gt;&gt; <span class="number">1</span>;</span><br><span class="line"><span class="comment">//递归分左右数组</span></span><br><span class="line"><span class="built_in">merge_sort</span>(q, l, mid);</span><br><span class="line"><span class="built_in">merge_sort</span>(q, mid + <span class="number">1</span>, r);</span><br><span class="line"></span><br><span class="line"><span class="comment">//递归结束后得到两个排好序的左数组和右数组，然后再合并</span></span><br><span class="line"><span class="type">int</span> k = <span class="number">0</span>, i = l, j = mid + <span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span> (i &lt;= mid &amp;&amp; j &lt;= r)</span><br><span class="line"><span class="keyword">if</span> (q[i] &lt;= q[j]) tmp[k++] = q[i++];</span><br><span class="line"><span class="keyword">else</span> tmp[k++] = q[j++];</span><br><span class="line"></span><br><span class="line"><span class="comment">//有一半走完了，没得比较了，直接输出</span></span><br><span class="line"><span class="keyword">while</span> (i &lt;= mid) tmp[k++] = q[i++];</span><br><span class="line"><span class="keyword">while</span> (j &lt;= r) tmp[k++] = q[j++];</span><br><span class="line"><span class="comment">//治 合并</span></span><br><span class="line"><span class="keyword">for</span> (i = l, j = <span class="number">0</span>; i &lt;= r; i++, j++) q[i] = tmp[j];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="comment">//int arr[11] = &#123; 1,3,5,7,9,11,22,41,53,77,214 &#125;;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//cout &lt;&lt; &quot;int arr[11] = &#123; 1,3,5,7,9,11,22,41,53,77,214 &#125;;&quot; &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; &quot;binarySearch(arr, 11, 77);&quot; &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">//cout &lt;&lt; &quot;index: &quot; &lt;&lt;binarySearch(arr, 11, 77) &lt;&lt; endl;</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> arr2[<span class="number">9</span>] = &#123; <span class="number">24</span>,<span class="number">528</span>,<span class="number">46</span>,<span class="number">235</span>,<span class="number">623</span>,<span class="number">9</span>,<span class="number">58</span>,<span class="number">32</span>,<span class="number">3</span> &#125;;</span><br><span class="line"><span class="comment">//quicksort(arr2, 0, 8);</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;int arr2[9] = &#123; 24,528,46,235,623,9,58,32,3 &#125;;&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="comment">//cout &lt;&lt; &quot;quicksort(arr2, 0, 8); &quot; &lt;&lt; endl;</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;merge_sort(arr2, 0, 8); &quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="built_in">merge_sort</span>(arr2, <span class="number">0</span>, <span class="number">8</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> temp : arr2) &#123;</span><br><span class="line">cout &lt;&lt; temp &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="mergesort-2"><p><img src="/posts/f5ccd0a9e3db/image-20220427232054686.png" alt="image-20220427232054686"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="棋盘覆盖问题"><a href="#棋盘覆盖问题" class="headerlink" title="棋盘覆盖问题"></a>棋盘覆盖问题</h3><div class="tabs" id="chessboard"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#chessboard-1">代码实现</button></li><li class="tab"><button type="button" data-href="#chessboard-2">测试运行</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="chessboard-1"><ul><li>这里的java代码是直接沿用了这篇文章<a href="https://blog.csdn.net/weixin_46379561/article/details/118914830">(18条消息) 算法：棋盘覆盖问题<em>怎么取名啊的博客-CSDN博客</em>棋盘覆盖问题</a>，文章里对解题过程做了很详细的解释，感兴趣的读者也可以看一下</li><li>其实棋盘覆盖问题，如果手写一下过程去解题是很容易理解的，只是代码规模比较大</li><li>读者可以尝试手画一个8*8的棋盘，手动模拟一下解题是过程，感受分治策略在其中的应用</li><li>代码中变量解释：<ul><li>BOARD_SIZE：方格大小</li><li>board：用于表示棋盘</li><li>title：表示每个L型骨牌的颜色（用数字表示）</li><li>tr：棋盘的行</li><li>tc：棋盘的列</li><li>（tr,tc）始终表示每一个区域的左上角，用于区域划分</li><li>dr：特殊方格所在的行</li><li>dc：特殊方格所在的列</li><li>size：棋盘的边长</li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ChessBoardCoverage</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        chessBoard(<span class="number">0</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">2</span>, BOARD_SIZE);</span><br><span class="line">        display();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">BOARD_SIZE</span> <span class="operator">=</span> <span class="number">16</span> ;  <span class="comment">//棋盘大小 记得是2的整数次方</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span>[][] board = <span class="keyword">new</span> <span class="title class_">int</span>[BOARD_SIZE][BOARD_SIZE];    <span class="comment">//棋盘</span></span><br><span class="line">    <span class="comment">//用数字表示填充颜色</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">title</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//在以tr,tc为左上角，宽高为size，特殊点在dr,dc位置上的矩阵内进行分割划分</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">chessBoard</span><span class="params">(<span class="type">int</span> tr, <span class="type">int</span> tc, <span class="type">int</span> dr, <span class="type">int</span> dc, <span class="type">int</span> size)</span> &#123;</span><br><span class="line">        <span class="comment">//如果切割出来的矩阵宽高为一，则不能继续分割，结束递归</span></span><br><span class="line">        <span class="keyword">if</span> (size == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//每次递归矩阵边长除2（划分区域）</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">s</span> <span class="operator">=</span> size / <span class="number">2</span>;</span><br><span class="line">        <span class="comment">//在该层级内划分出来的四个区域肯定有三个区域要填特殊方格，那么这三个特殊区域的方格数字是一样的</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> ++title;</span><br><span class="line">        <span class="comment">//特殊方格在左上区域</span></span><br><span class="line">        <span class="keyword">if</span> (dr &lt; tr + s &amp;&amp; dc &lt; tc + s) &#123;</span><br><span class="line">            chessBoard(tr, tc, dr, dc, s);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//如果不在左上区域，就把右下角格子设置为特殊方格</span></span><br><span class="line">            board[tr + s - <span class="number">1</span>][tc + s - <span class="number">1</span>] = num;</span><br><span class="line">            chessBoard(tr, tc, tr + s - <span class="number">1</span>, tc + s - <span class="number">1</span>, s);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//特殊方格在右上区域</span></span><br><span class="line">        <span class="keyword">if</span> (dr &lt; tr + s &amp;&amp; dc &gt;= tc + s) &#123;</span><br><span class="line">            chessBoard(tr, tc + s, dr, dc, s);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//如果不在右上区域，就把左下角格子设置为特殊方格</span></span><br><span class="line">            board[tr + s - <span class="number">1</span>][tc + s] = num;</span><br><span class="line">            chessBoard(tr, tc + s, tr + s - <span class="number">1</span>, tc + s, s);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//特殊方格在左下区域</span></span><br><span class="line">        <span class="keyword">if</span> (dr &gt;= tr + s &amp;&amp; dc &lt; tc + s) &#123;</span><br><span class="line">            chessBoard(tr + s, tc, dr, dc, s);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//如果不在左下区域，就把右上角格子设置为特殊方格</span></span><br><span class="line">            board[tr + s][tc + s - <span class="number">1</span>] = num;</span><br><span class="line">            chessBoard(tr + s, tc, tr + s, tc + s - <span class="number">1</span>, s);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//特殊方格在右下区域</span></span><br><span class="line">        <span class="keyword">if</span> (dr &gt;= tr + s &amp;&amp; dc &gt;= tc + s) &#123;</span><br><span class="line">            chessBoard(tr + s, tc + s, dr, dc, s);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//如果不在右下区域，把左上角格子设置为特殊方格</span></span><br><span class="line">            board[tr + s][tc + s] = num;</span><br><span class="line">            chessBoard(tr + s, tc + s, tr + s, tc + s, s);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//输出棋盘</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">display</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; board.length; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; board.length; j++) &#123;</span><br><span class="line">                System.out.printf(<span class="string">&quot;%4d&quot;</span>, board[i][j]);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>当然只要轻微修改一下，你就可以获得一份C++的代码</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> BOARD_SIZE = <span class="number">16</span>;  <span class="comment">//棋盘大小</span></span><br><span class="line"><span class="type">int</span> board[BOARD_SIZE][BOARD_SIZE] ;   <span class="comment">//棋盘</span></span><br><span class="line"> <span class="comment">//用数字表示填充颜色</span></span><br><span class="line"><span class="type">int</span> title = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">chessBoard</span><span class="params">(<span class="type">int</span> tr, <span class="type">int</span> tc, <span class="type">int</span> dr, <span class="type">int</span> dc, <span class="type">int</span> size)</span> </span>&#123;</span><br><span class="line"><span class="comment">//如果切割出来的矩阵宽高为一，则不能继续分割，结束递归</span></span><br><span class="line"><span class="keyword">if</span> (size == <span class="number">1</span>) &#123;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//每次递归矩阵边长除2（划分区域）</span></span><br><span class="line"><span class="type">int</span> s = size / <span class="number">2</span>;</span><br><span class="line"><span class="comment">//在该层级内划分出来的四个区域肯定有三个区域要填特殊方格，那么这三个特殊区域的方格数字是一样的</span></span><br><span class="line"><span class="type">int</span> num = ++title;</span><br><span class="line"><span class="comment">//特殊方格在左上区域</span></span><br><span class="line"><span class="keyword">if</span> (dr &lt; tr + s &amp;&amp; dc &lt; tc + s) &#123;</span><br><span class="line"><span class="built_in">chessBoard</span>(tr, tc, dr, dc, s);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">//如果不在左上区域，就把右下角格子设置为特殊方格</span></span><br><span class="line">board[tr + s - <span class="number">1</span>][tc + s - <span class="number">1</span>] = num;</span><br><span class="line"><span class="built_in">chessBoard</span>(tr, tc, tr + s - <span class="number">1</span>, tc + s - <span class="number">1</span>, s);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//特殊方格在右上区域</span></span><br><span class="line"><span class="keyword">if</span> (dr &lt; tr + s &amp;&amp; dc &gt;= tc + s) &#123;</span><br><span class="line"><span class="built_in">chessBoard</span>(tr, tc + s, dr, dc, s);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">//如果不在右上区域，就把左下角格子设置为特殊方格</span></span><br><span class="line">board[tr + s - <span class="number">1</span>][tc + s] = num;</span><br><span class="line"><span class="built_in">chessBoard</span>(tr, tc + s, tr + s - <span class="number">1</span>, tc + s, s);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//特殊方格在左下区域</span></span><br><span class="line"><span class="keyword">if</span> (dr &gt;= tr + s &amp;&amp; dc &lt; tc + s) &#123;</span><br><span class="line"><span class="built_in">chessBoard</span>(tr + s, tc, dr, dc, s);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">//如果不在左下区域，就把右上角格子设置为特殊方格</span></span><br><span class="line">board[tr + s][tc + s - <span class="number">1</span>] = num;</span><br><span class="line"><span class="built_in">chessBoard</span>(tr + s, tc, tr + s, tc + s - <span class="number">1</span>, s);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//特殊方格在右下区域</span></span><br><span class="line"><span class="keyword">if</span> (dr &gt;= tr + s &amp;&amp; dc &gt;= tc + s) &#123;</span><br><span class="line"><span class="built_in">chessBoard</span>(tr + s, tc + s, dr, dc, s);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">//如果不在右下区域，把左上角格子设置为特殊方格</span></span><br><span class="line">board[tr + s][tc + s] = num;</span><br><span class="line"><span class="built_in">chessBoard</span>(tr + s, tc + s, tr + s, tc + s, s);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//输出棋盘</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; BOARD_SIZE; i++) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; BOARD_SIZE; j++) &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%4d&quot;</span>, board[i][j]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">chessBoard</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">2</span>, BOARD_SIZE);</span><br><span class="line"><span class="built_in">display</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="chessboard-2"><ul><li>从数字的大小能看出棋盘覆盖实现的过程</li></ul><p><img src="/posts/f5ccd0a9e3db/image-20220427234821296.png" alt="image-20220427234821296"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;需求&quot;&gt;&lt;a href=&quot;#需求&quot; class=&quot;headerlink&quot; title=&quot;需求&quot;&gt;&lt;/a&gt;需求&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;解释分治策略的基本思想，并用它分析大整数相乘问题&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;选做：编程实现大整数相乘问题（选做）&lt;</summary>
      
    
    
    
    <category term="算法" scheme="https://gallifrey.asia/categories/%E7%AE%97%E6%B3%95/"/>
    
    <category term="学校" scheme="https://gallifrey.asia/categories/%E7%AE%97%E6%B3%95/%E5%AD%A6%E6%A0%A1/"/>
    
    
    <category term="算法" scheme="https://gallifrey.asia/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="分治" scheme="https://gallifrey.asia/tags/%E5%88%86%E6%B2%BB/"/>
    
    <category term="二分" scheme="https://gallifrey.asia/tags/%E4%BA%8C%E5%88%86/"/>
    
    <category term="快排" scheme="https://gallifrey.asia/tags/%E5%BF%AB%E6%8E%92/"/>
    
  </entry>
  
  <entry>
    <title>算法设计与应用——分治策略</title>
    <link href="https://gallifrey.asia/posts/eabebd9636e5/"/>
    <id>https://gallifrey.asia/posts/eabebd9636e5/</id>
    <published>2022-04-27T01:47:49.000Z</published>
    <updated>2022-04-27T01:47:49.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Divide-and-Conquer"><a href="#Divide-and-Conquer" class="headerlink" title="Divide and Conquer"></a>Divide and Conquer</h2><h4 id="分析图"><a href="#分析图" class="headerlink" title="分析图"></a>分析图</h4><p><img src="/posts/eabebd9636e5/image-20220427094855469.png" alt="image-20220427094855469" style="zoom: 67%;"></p><h4 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h4><p><img src="/posts/eabebd9636e5/image-20220427094923965.png" alt="image-20220427094923965"></p><h4 id="适用条件"><a href="#适用条件" class="headerlink" title="适用条件"></a>适用条件</h4><p><img src="/posts/eabebd9636e5/image-20220427094937897.png" alt="image-20220427094937897"></p><p><img src="/posts/eabebd9636e5/image-20220427094957403.png" alt="image-20220427094957403"></p><h4 id="算法实现"><a href="#算法实现" class="headerlink" title="算法实现"></a>算法实现</h4><p><img src="/posts/eabebd9636e5/image-20220427095330544.png" alt="image-20220427095330544"></p><h4 id="算法分析"><a href="#算法分析" class="headerlink" title="算法分析"></a>算法分析</h4><p><img src="/posts/eabebd9636e5/image-20220427095444695.png" alt="image-20220427095444695"></p><p><img src="/posts/eabebd9636e5/image-20220427095601706.png" alt="image-20220427095601706"></p><h4 id="大整数相乘"><a href="#大整数相乘" class="headerlink" title="大整数相乘"></a>大整数相乘</h4><p><img src="/posts/eabebd9636e5/image-20220427095829017.png" alt="image-20220427095829017"></p><ul><li>利用（AD+BC）=（A+B）*（C+D）-AC-BD替换，将4次乘法运算降低到3次</li></ul><p><img src="/posts/eabebd9636e5/image-20220427095843738.png" alt="image-20220427095843738"></p><h2 id="分治策略举例"><a href="#分治策略举例" class="headerlink" title="分治策略举例"></a>分治策略举例</h2><ul><li><p>二分查找</p></li><li><p>二叉查找树，平衡二叉树，B树和B+树</p></li><li><p>排序问题</p><ul><li>归并排序（Merge Sort）</li><li>快速排序</li></ul></li></ul><h4 id="二分查找"><a href="#二分查找" class="headerlink" title="二分查找"></a>二分查找</h4><p><img src="/posts/eabebd9636e5/image-20220427100822850.png" alt="image-20220427100822850"></p><p><img src="/posts/eabebd9636e5/image-20220427101006001.png" alt="image-20220427101006001"></p><p><img src="/posts/eabebd9636e5/image-20220427101015852.png" alt="image-20220427101015852"></p><h4 id="归并排序"><a href="#归并排序" class="headerlink" title="归并排序"></a>归并排序</h4><p>Merge Sort</p><p><img src="/posts/eabebd9636e5/image-20220427103603103.png" alt="image-20220427103603103"></p><p><img src="/posts/eabebd9636e5/image-20220427103721937.png" alt="image-20220427103721937"></p><p><img src="/posts/eabebd9636e5/image-20220427103727652.png" alt="image-20220427103727652"></p><h4 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h4><p><img src="/posts/eabebd9636e5/image-20220427214307114.png" alt="image-20220427214307114"></p><p><img src="/posts/eabebd9636e5/image-20220427214321845.png" alt="image-20220427214321845"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">quicksort</span><span class="params">(<span class="type">int</span> arr[], <span class="type">int</span> low, <span class="type">int</span> high)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (low &gt;= high) <span class="keyword">return</span>;<span class="comment">//没有数返回</span></span><br><span class="line"><span class="type">int</span> l = low, h = high;</span><br><span class="line"><span class="type">int</span> x = arr[low];</span><br><span class="line"><span class="keyword">while</span> (low &lt; high) &#123;</span><br><span class="line"><span class="keyword">while</span> ((low &lt; high) &amp;&amp; (arr[high] &gt;= x)) high--;</span><br><span class="line"><span class="built_in">swap</span>(arr[low], arr[high]);</span><br><span class="line"><span class="keyword">while</span> ((low &lt; high) &amp;&amp; (arr[low] &lt;=x))low++;</span><br><span class="line"><span class="built_in">swap</span>(arr[low], arr[high]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">quicksort</span>(arr, l, high - <span class="number">1</span>);</span><br><span class="line"><span class="built_in">quicksort</span>(arr, high +<span class="number">1</span> ,h);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="棋盘覆盖问题"><a href="#棋盘覆盖问题" class="headerlink" title="棋盘覆盖问题"></a>棋盘覆盖问题</h4><p><img src="/posts/eabebd9636e5/image-20220427104204004.png" alt="image-20220427104204004"></p><p><img src="/posts/eabebd9636e5/image-20220427104337675.png" alt="image-20220427104337675"></p><p><img src="/posts/eabebd9636e5/image-20220427110157988.png" alt="image-20220427110157988"></p><p><img src="/posts/eabebd9636e5/image-20220427110213180.png" alt="image-20220427110213180"></p><p><img src="/posts/eabebd9636e5/image-20220427110223580.png" alt="image-20220427110223580"></p><h4 id="循环赛日程表"><a href="#循环赛日程表" class="headerlink" title="循环赛日程表"></a>循环赛日程表</h4><p><img src="/posts/eabebd9636e5/image-20220427110248747.png" alt="image-20220427110248747"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Void Dimidiate（<span class="type">int</span> i, <span class="type">int</span> j, <span class="type">int</span> n)</span><br><span class="line">           <span class="comment">//起始行i，终止行j，规模n</span></span><br><span class="line">&#123;  <span class="keyword">if</span>(n==<span class="number">2</span>)</span><br><span class="line">      &#123; a[i][n]=j; a[j][n]=i; a[i][n<span class="number">-1</span>]=i; a[j][n<span class="number">-1</span>]=j;&#125;</span><br><span class="line">   <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">dimidiate</span>(i,i+n/<span class="number">2</span><span class="number">-1</span>,n/<span class="number">2</span>); )    <span class="comment">//处理左上角</span></span><br><span class="line">        <span class="built_in">dimidiate</span>(i+n/<span class="number">2</span>,j,n/<span class="number">2</span>);     <span class="comment">//处理左下角</span></span><br><span class="line">        左上角复制到右下角；</span><br><span class="line">        左下角复制到右上角；</span><br><span class="line">       &#125;</span><br><span class="line">    输出a；</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p><img src="/posts/eabebd9636e5/image-20220427110332769.png" alt="image-20220427110332769"></p><h2 id="配套作业"><a href="#配套作业" class="headerlink" title="配套作业"></a>配套作业</h2><div class="tag link"><a class="link-card" title="配套作业——分治策略" href="https://gallifrey.asia/posts/f5ccd0a9e3db/"><div class="left"><img src="https://gallifrey.asia/images/shizi.png"></div><div class="right"><p class="text">配套作业——分治策略</p><p class="url">https://gallifrey.asia/posts/f5ccd0a9e3db/</p></div></a></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Divide-and-Conquer&quot;&gt;&lt;a href=&quot;#Divide-and-Conquer&quot; class=&quot;headerlink&quot; title=&quot;Divide and Conquer&quot;&gt;&lt;/a&gt;Divide and Conquer&lt;/h2&gt;&lt;h4 id=&quot;分</summary>
      
    
    
    
    <category term="算法" scheme="https://gallifrey.asia/categories/%E7%AE%97%E6%B3%95/"/>
    
    <category term="学校" scheme="https://gallifrey.asia/categories/%E7%AE%97%E6%B3%95/%E5%AD%A6%E6%A0%A1/"/>
    
    
    <category term="算法" scheme="https://gallifrey.asia/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>配套作业——递归算法</title>
    <link href="https://gallifrey.asia/posts/2c7189466ff6/"/>
    <id>https://gallifrey.asia/posts/2c7189466ff6/</id>
    <published>2022-04-26T14:53:52.000Z</published>
    <updated>2022-04-26T14:53:52.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h2><ul><li><p>编程实现斐波那契数列，分别用递归法，数组法。比较实验结果，分析原因。</p></li><li><p>设计空间复杂度更好的算法，实现斐波那契数列。</p></li><li>编程实现汉诺塔问题</li><li>全排列问题（选做）</li></ul><h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><h3 id="斐波那契数列"><a href="#斐波那契数列" class="headerlink" title="斐波那契数列"></a>斐波那契数列</h3><div class="tabs" id="fibonacci"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#fibonacci-1">斐波那契数列--递归法</button></li><li class="tab"><button type="button" data-href="#fibonacci-2">斐波那契数列--数组法</button></li><li class="tab"><button type="button" data-href="#fibonacci-3">比较与分析</button></li><li class="tab"><button type="button" data-href="#fibonacci-4">改进算法--迭代法</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="fibonacci-1"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;time.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> cnt = <span class="number">0</span>;<span class="comment">//统计循环次数</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">fun1</span><span class="params">(<span class="type">int</span> n )</span> </span>&#123;</span><br><span class="line">cnt++;</span><br><span class="line"><span class="keyword">if</span> (n == <span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span> (n == <span class="number">2</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">fun1</span>(n - <span class="number">1</span>) + <span class="built_in">fun1</span>(n - <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt;<span class="string">&quot;fun1(25): &quot;</span>&lt;&lt; <span class="built_in">fun1</span>(<span class="number">25</span>) &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt;<span class="string">&quot;循环次数: &quot;</span> &lt;&lt; cnt &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="fibonacci-2"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;time.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> cnt2 = <span class="number">0</span>;<span class="comment">//统计循环次数</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">fun2</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line"><span class="type">int</span> *arr;</span><br><span class="line">arr = <span class="keyword">new</span> <span class="type">int</span>[n];</span><br><span class="line">arr[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">arr[<span class="number">2</span>] = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">3</span>; i &lt;=n; i++) &#123;</span><br><span class="line">arr[i] = arr[i - <span class="number">2</span>] + arr[i - <span class="number">1</span>];</span><br><span class="line">cnt2++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> arr[n];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">cout &lt;&lt; <span class="string">&quot;fun2(25): &quot;</span> &lt;&lt; <span class="built_in">fun2</span>(<span class="number">25</span>) &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;循环次数: &quot;</span> &lt;&lt; cnt2 &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="fibonacci-3"><ul><li>fun1递归算法</li></ul><p><img src="/posts/2c7189466ff6/clip_image002.jpg" alt="img"></p><ul><li>fun2数组法</li></ul><p><img src="/posts/2c7189466ff6/clip_image002-16509946174011.jpg" alt="img"></p><ul><li>结论：数组法大大降低了时间复杂度，但利用了数组，提高了空间复杂度，典型的空间换取时间</li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="fibonacci-4"><ul><li>因为我们在数组法中其实只要用到arr[n-1]和arr[n-2]，所以我们可以迭代的方式来降低空间数组法的复杂，同时不提高时间复杂度</li></ul><p><img src="/posts/2c7189466ff6/clip_image002-16509956229712.jpg" alt="img"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;time.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> cnt3 = <span class="number">0</span>;<span class="comment">//统计循环次数</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">fun3</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line"><span class="type">int</span> s1, s2;</span><br><span class="line">s1 = <span class="number">1</span>;</span><br><span class="line">s2 = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (n == <span class="number">1</span> || n == <span class="number">2</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">3</span>; i &lt;= n; i++) &#123;</span><br><span class="line">cnt3++;</span><br><span class="line">s2 = s1 + s2;</span><br><span class="line">s1 = s2 - s1;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> s2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">cout &lt;&lt; <span class="string">&quot;fun3(25): &quot;</span> &lt;&lt; <span class="built_in">fun3</span>(<span class="number">25</span>) &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;循环次数: &quot;</span> &lt;&lt; cnt3 &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="汉诺塔问题"><a href="#汉诺塔问题" class="headerlink" title="汉诺塔问题"></a>汉诺塔问题</h3><div class="tabs" id="hanoi"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#hanoi-1">代码</button></li><li class="tab"><button type="button" data-href="#hanoi-2">运行效果</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="hanoi-1"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">move</span><span class="params">(<span class="type">char</span> a, <span class="type">char</span> b)</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; a &lt;&lt; <span class="string">&quot;移动到&quot;</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">hanoi</span><span class="params">(<span class="type">int</span> n, <span class="type">char</span> a, <span class="type">char</span> b, <span class="type">char</span> c)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (n &lt;= <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">hanoi</span>(n - <span class="number">1</span>, a, c, b);</span><br><span class="line"><span class="built_in">move</span>(a, b);</span><br><span class="line"><span class="built_in">hanoi</span>(n<span class="number">-1</span>,c, b, a);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;输入初始盘子数：&quot;</span>;</span><br><span class="line">cin &gt;&gt; n;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\n模拟过程：&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">hanoi</span>(n, <span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="hanoi-2"><p><img src="/posts/2c7189466ff6/image-20220427021651899.png" alt="image-20220427021651899"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="全排列问题"><a href="#全排列问题" class="headerlink" title="全排列问题"></a>全排列问题</h3><div class="tabs" id="hanoi"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#hanoi-1">代码</button></li><li class="tab"><button type="button" data-href="#hanoi-2">运行效果</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="hanoi-1"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">100000</span>;</span><br><span class="line"><span class="type">int</span> arr[N],isUse[N];</span><br><span class="line"><span class="type">int</span> n, k;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> k)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (k == n) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">cout &lt;&lt; arr[i];</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line"><span class="keyword">if</span> (!isUse[i]) &#123;</span><br><span class="line">arr[k] = i;</span><br><span class="line">isUse[i] = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">dfs</span>(k + <span class="number">1</span>);</span><br><span class="line">isUse[i] = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;请输入数组个数: &quot;</span>;</span><br><span class="line">cin &gt;&gt; n;</span><br><span class="line"><span class="built_in">dfs</span>(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="hanoi-2"><p><img src="/posts/2c7189466ff6/image-20220427024928699.png" alt="image-20220427024928699"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;需求&quot;&gt;&lt;a href=&quot;#需求&quot; class=&quot;headerlink&quot; title=&quot;需求&quot;&gt;&lt;/a&gt;需求&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;编程实现斐波那契数列，分别用递归法，数组法。比较实验结果，分析原因。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;设计空间复杂度更好</summary>
      
    
    
    
    <category term="算法" scheme="https://gallifrey.asia/categories/%E7%AE%97%E6%B3%95/"/>
    
    <category term="学校" scheme="https://gallifrey.asia/categories/%E7%AE%97%E6%B3%95/%E5%AD%A6%E6%A0%A1/"/>
    
    
    <category term="算法" scheme="https://gallifrey.asia/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="递归" scheme="https://gallifrey.asia/tags/%E9%80%92%E5%BD%92/"/>
    
  </entry>
  
  <entry>
    <title>算法设计与应用——算法基础</title>
    <link href="https://gallifrey.asia/posts/044cbedc9d88/"/>
    <id>https://gallifrey.asia/posts/044cbedc9d88/</id>
    <published>2022-04-26T01:14:23.000Z</published>
    <updated>2022-04-26T01:14:23.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="斐波那契问题"><a href="#斐波那契问题" class="headerlink" title="斐波那契问题"></a>斐波那契问题</h2><ul><li><p>假设兔子出生一个月后能繁殖，以后每月产一个孩子，一直下去直到永远。从一个兔子开始，问n个月后有多少个兔子？</p></li><li><p>递归算法求解</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function Fib1(n)</span><br><span class="line">if n = 1 return 1</span><br><span class="line">if n = 2 return 1</span><br><span class="line">return Fib1(n-1) + Fib1(n-2)</span><br></pre></td></tr></table></figure><p>计算 F200 大概需要 2140 个运算.<br>在一个快速计算机上要花多长时间?（在NEC Earth Simulator上花2^92秒）</p><ul><li>指数爆炸，所以算法很重要</li></ul><h2 id="算法的基础概念"><a href="#算法的基础概念" class="headerlink" title="算法的基础概念"></a>算法的基础概念</h2><h4 id="算法的特征"><a href="#算法的特征" class="headerlink" title="算法的特征"></a>算法的特征</h4><ul><li>输入性：有零个或多个外部量作为算法的输入。 </li><li>输出性：算法产生至少一个量作为输出。 </li><li>确定性：组成算法的每条指令清晰、无歧义。 </li><li>有穷性：算法中每条指令的执行次数有限，执行每条指令的时间也有限。</li><li>可行性： 算法原则上能够精确地运行，而且人们用笔和纸做有限次运算后即可完成。 </li></ul><div class="tip "><p>程序是算法用某种程序设计语言的具体实现。<br>程序可以不满足算法的性质(4)即有穷性。<br>如操作系统 </p></div><h4 id="算法的4个标准"><a href="#算法的4个标准" class="headerlink" title="算法的4个标准"></a>算法的4个标准</h4><ul><li>正确性：在合理的数据输入下，能在有限的时间内得出正确的结果。 </li><li>可读性：应易于人的理解，易于调试。 </li><li>健壮性：具备检查错误和对错误进行适当处理的能力。 </li><li>效率：算法执行时所需计算机资源的多少，包括运行时间和存储空间。</li></ul><h4 id="算法的描述形式"><a href="#算法的描述形式" class="headerlink" title="算法的描述形式"></a>算法的描述形式</h4><ul><li><p>自然语言</p><ul><li>优点：容易理解</li><li>缺点：冗长、不够严谨、二义性</li><li>使用方法：粗线条描述算法思想 </li><li>注意事项：避免写成自然段</li></ul></li><li><p>算法框图法 </p><ul><li>优点：流程图、盒图，流程直观、简洁、明了，便于理解和交流 </li><li>缺点：缺少严密性、灵活性</li><li>使用方法：描述简单算法</li><li>注意事项：注意抽象层次</li><li>例：欧几里得算法</li></ul><p><img src="/posts/044cbedc9d88/image-20220426165337705.png" alt="欧几里得算法"></p></li><li><p>伪代码语言描述法</p><ul><li><p>伪代码（Pseudocode）：介于自然语言和程序设计语言之间的方法，它采用某一程序设计语言的基本语法，操作指令可以结合自然语言来设计。 （算法语言）</p></li><li><p>优点：表达能力强，抽象性强，容易理解</p></li><li><p>例子：欧几里得算法</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> 1. r = m % n;</span><br><span class="line">2. 循环直到 r 等于0</span><br><span class="line">      2.1 m = n;</span><br><span class="line">       2.2 n = r;</span><br><span class="line">       2.3 r = m % n;</span><br><span class="line"> 3. 输出 n ;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>高级程序设计语言描述法</p><ul><li>优点：能由计算机执行 </li><li>缺点：抽象性差，对语言要求高</li><li>使用方法：算法需要验证</li><li>注意事项：将算法写成子函数</li></ul></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">CommonFactor</span><span class="params">(<span class="type">int</span> m, <span class="type">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> r=m % n;</span><br><span class="line">    <span class="keyword">while</span> (r!=<span class="number">0</span>) </span><br><span class="line">   &#123;</span><br><span class="line">      m=n;</span><br><span class="line">      n=r;</span><br><span class="line">      r=m % n;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> n;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">main</span><span class="params">( )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   cout&lt;&lt;<span class="built_in">CommonFactor</span>(<span class="number">63</span>, <span class="number">54</span>)&lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="算法设计的一般过程"><a href="#算法设计的一般过程" class="headerlink" title="算法设计的一般过程"></a>算法设计的一般过程</h2><ul><li>充分理解要解决的问题</li><li>数学模型拟制</li><li>算法详细设计</li><li>算法描述</li><li>算法思路的正确性验证 </li><li>算法分析</li><li>算法的计算机实现和测试 </li><li>文档资料的编制 </li></ul><p><strong>著名公式</strong></p><p>   <strong>Algorithm + Data Structure = Programming</strong></p><h2 id="算法分析"><a href="#算法分析" class="headerlink" title="算法分析"></a>算法分析</h2><ul><li>算法复杂性 = 算法运行时所需要的计算机资源的量<ul><li>时间复杂性、空间复杂性</li></ul></li><li>影响时间复杂性的因素（查找为例）<ul><li>问题规模n、输入序列I、算法本身A</li></ul></li><li>影响空间复杂性的因素<ul><li>算法本身、输入输出数据、辅助变量</li></ul></li><li>算法复杂性的权衡<ul><li>时间复杂度和空间复杂度相互影响（时间换空间或空间换时间）</li></ul></li></ul><h4 id="三种情况下的复杂性（结合查找操作）"><a href="#三种情况下的复杂性（结合查找操作）" class="headerlink" title="三种情况下的复杂性（结合查找操作）"></a>三种情况下的复杂性（结合查找操作）</h4><ul><li>最好情况Tmin（N)<ul><li>1次</li></ul></li><li>最坏情况Tmax（N)<ul><li>N次</li></ul></li><li>平均情况Tavg（N)<ul><li>(N+1)/2</li></ul></li></ul><h4 id="算法渐近复杂性态"><a href="#算法渐近复杂性态" class="headerlink" title="算法渐近复杂性态"></a>算法渐近复杂性态</h4><ul><li>设算法的运行时间为T(n)，如果存在T*(n)，使得</li><li><p><img src="/posts/044cbedc9d88/image-20220426170130945.png" alt="image-20220426170130945"></p></li><li><p>就称T*(n)为算法的渐进性态或渐进时间复杂性。</p></li></ul><ul><li><p>举例说明：</p><p>假设算法A的运行时间表达式为T1(n)</p></li></ul><p>​            T1(n)=30n4+20n3+40n2+46n+100</p><p> 假设算法B的运行时间表达式为T2(n)</p><p>​            T2(n)=1000n3+50n2+78n+10</p><p>随着n的增大，对算法的执行时间影响最大的是最高次方。<br>算法A的运行时间可记为：T1(n)≈n4</p><p>算法B的运行时间可记为：T2(n)≈n3</p><h4 id="渐近符号"><a href="#渐近符号" class="headerlink" title="渐近符号"></a>渐近符号</h4><ul><li><p>O—上界</p></li><li><p>W—-下界</p></li><li><p>Q—-上界和下界</p></li></ul><h4 id="算法分析中常见的复杂性函数"><a href="#算法分析中常见的复杂性函数" class="headerlink" title="算法分析中常见的复杂性函数"></a>算法分析中常见的复杂性函数</h4><p><img src="/posts/044cbedc9d88/image-20220426170509155.png" alt="image-20220426170509155"></p><ul><li><p>几种常见的时间复杂度函数按数量级从小到大的顺序依次是：</p><ul><li>Θ(lgn)，Θ(sqrt(n))，Θ(n)，Θ(nlgn)，Θ(n^2^)，Θ(n^3^)，Θ(2^n^)，Θ(n!)</li></ul></li><li><p>在多项式中，n的最高次指数是最主要的决定因素，常数项、低次幂项和系数都是次要的。</p></li></ul><h4 id="时间复杂度分析的基本规则"><a href="#时间复杂度分析的基本规则" class="headerlink" title="时间复杂度分析的基本规则"></a>时间复杂度分析的基本规则</h4><ul><li>主要考虑可执行语句的情况：<ul><li>输入、输出、赋值语句，为O（1）；</li><li>顺序结构，采用渐进式O的求和规则来进行计算；</li><li>选择结构，考虑判定后所执行语句的执行时间</li><li>O（max(T(s1), T(s2))）；</li><li>循环结构，考虑循环判定条件和循环体语句的执行时间，采用渐进式O的乘积规则来进行计算；</li><li>复杂算法，先分割，然后采用渐进式O的求和规则和乘法规则来计算整个算法的时间复杂度；</li></ul></li></ul><h4 id="空间复杂度"><a href="#空间复杂度" class="headerlink" title="空间复杂度"></a>空间复杂度</h4><ul><li>算法所占用的存储空间包括<ul><li>算法自身</li><li>输入、输出</li><li>辅助空间</li></ul></li><li>空间复杂度S(n)=O(f(n))，以最坏情况来分析</li></ul><h2 id="递归"><a href="#递归" class="headerlink" title="递归"></a>递归</h2><h4 id="什么是递归"><a href="#什么是递归" class="headerlink" title="什么是递归"></a>什么是递归</h4><ul><li><p>子程序（或函数）直接调用自己或通过一系列调用语句间接调用自已，称为递归。直接或间接调用自身的算法称为递归算法 。</p></li><li><p>采用递归算法来求解问题的一般步骤：</p><ul><li><p>分析问题，寻找递归关系</p></li><li><p>找出停止条件</p></li></ul></li></ul><ul><li>构建函数体</li></ul><h4 id="n的阶乘"><a href="#n的阶乘" class="headerlink" title="n的阶乘"></a>n的阶乘</h4><p><img src="/posts/044cbedc9d88/image-20220426172937117.png" alt="image-20220426172937117"></p><h4 id="汉诺塔问题"><a href="#汉诺塔问题" class="headerlink" title="汉诺塔问题"></a>汉诺塔问题</h4><ul><li>分解一下递归<ul><li>先把A柱子上面的n-1个盘子从A柱移动到C柱</li><li>然后A柱最下面的盘中就可以从A移动B柱了</li><li>最后C柱上n-1个盘中移动到B柱</li></ul></li></ul><p><img src="/posts/044cbedc9d88/image-20220426172950318.png" alt="image-20220426172950318"></p><h4 id="全排列问题"><a href="#全排列问题" class="headerlink" title="全排列问题"></a>全排列问题</h4><p><img src="/posts/044cbedc9d88/image-20220426173008133.png" alt="image-20220426173008133"></p><p><img src="/posts/044cbedc9d88/image-20220426173016193.png" alt="image-20220426173016193"></p><h4 id="递归算法的两种类型"><a href="#递归算法的两种类型" class="headerlink" title="递归算法的两种类型"></a>递归算法的两种类型</h4><p><img src="/posts/044cbedc9d88/image-20220426173041918.png" alt="image-20220426173041918"></p><h2 id="再看斐波那契问题"><a href="#再看斐波那契问题" class="headerlink" title="再看斐波那契问题"></a>再看斐波那契问题</h2><ul><li>Fibonacci数列一个较好的算法，用一个数组储存每次计算的数值，类似记忆搜索</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function Fib2(n)</span><br><span class="line">Create an array fib[1..n]</span><br><span class="line">fib[1] = 1</span><br><span class="line">fib[2] = 1</span><br><span class="line">for i = 3 to n:</span><br><span class="line">      fib[i] = fib[i-1] + fib[i-2]</span><br><span class="line">return fib[n]</span><br></pre></td></tr></table></figure><ul><li>和原来的递归算法时间复杂度比较</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function Fib1(n)</span><br><span class="line">if n = 1 return 1</span><br><span class="line">if n = 2 return 1</span><br><span class="line">return Fib1(n-1) + Fib1(n-2)</span><br></pre></td></tr></table></figure><p>Fib1: O(n 2^0.7n^ ) 时间                   仍然是个大的突破:<br>Fib2: O(n^2^ 时间                         从指数级到多项式级</p><h2 id="配套作业"><a href="#配套作业" class="headerlink" title="配套作业"></a>配套作业</h2><div class="tag link"><a class="link-card" title="配套作业——递归算法" href="https://gallifrey.asia/posts/2c7189466ff6/"><div class="left"><img src="https://gallifrey.asia/images/shizi.png"></div><div class="right"><p class="text">配套作业——递归算法</p><p class="url">https://gallifrey.asia/posts/2c7189466ff6/</p></div></a></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;斐波那契问题&quot;&gt;&lt;a href=&quot;#斐波那契问题&quot; class=&quot;headerlink&quot; title=&quot;斐波那契问题&quot;&gt;&lt;/a&gt;斐波那契问题&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;假设兔子出生一个月后能繁殖，以后每月产一个孩子，一直下去直到永远。从一个兔子开始，问n个月</summary>
      
    
    
    
    <category term="算法" scheme="https://gallifrey.asia/categories/%E7%AE%97%E6%B3%95/"/>
    
    <category term="学校" scheme="https://gallifrey.asia/categories/%E7%AE%97%E6%B3%95/%E5%AD%A6%E6%A0%A1/"/>
    
    
    <category term="算法" scheme="https://gallifrey.asia/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="递归" scheme="https://gallifrey.asia/tags/%E9%80%92%E5%BD%92/"/>
    
  </entry>
  
  <entry>
    <title>Android_ListView与GridView练习</title>
    <link href="https://gallifrey.asia/posts/455482d811be/"/>
    <id>https://gallifrey.asia/posts/455482d811be/</id>
    <published>2022-04-24T21:25:11.000Z</published>
    <updated>2022-04-24T21:25:22.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="需求分析"><a href="#需求分析" class="headerlink" title="需求分析"></a>需求分析</h2><ul><li>请用ListView和自定义Adapter实现下列页面（可以自行设计并添加元素，以丰富该页面） :</li></ul><p><img src="/posts/455482d811be/clip_image002-16508359183201.jpg" alt="图1"></p><p>（1） 界面元素如图1所示，内容可以比图1更丰富<br>（2） 实现图1的界面列表和操作栏（Toolbar）<br>（3） 点击任意列表项，出现第二个页面，如图2所示（点击了“北京市”，出现北京市所有区的页面)</p><p><img src="/posts/455482d811be/clip_image002-16508359370372.jpg" alt="图2"></p><p>（4） 图2的内容请用GridView和自定义的Adapter实现。<br>（5） 实现图2 的Toolbar。 </p><div class="tip "><p>这里我反复看了几次，这里的toolbar只要求设置一个样式而已，并不用编写什么实质的功能，重点是listview和gridview的实现，和两个页面界面间交互</p></div><h2 id="设计"><a href="#设计" class="headerlink" title="设计"></a>设计</h2><h4 id="界面一布局文件的设计"><a href="#界面一布局文件的设计" class="headerlink" title="界面一布局文件的设计"></a>界面一布局文件的设计</h4><div class="tabs" id="ac1"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#ac1-1">修改themes.xml</button></li><li class="tab"><button type="button" data-href="#ac1-2">activity布局文件</button></li><li class="tab"><button type="button" data-href="#ac1-3">listitem布局文件</button></li><li class="tab"><button type="button" data-href="#ac1-4">效果预览</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="ac1-1"><ul><li>因为toolbar和actionbar互相冲突会造成闪退,首先要在themes.xml主题布局文件中设置一个NoActionBar的style，这里项目规模比较小，我们把默认所以Activity采用主题style直接改成改成NoActionBar。</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resources</span> <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Base application theme. --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;Theme.Test6&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;Theme.MaterialComponents.DayNight.NoActionBar&quot;</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="comment">&lt;!-- Primary brand color. --&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;colorPrimary&quot;</span>&gt;</span>@color/purple_500<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;colorPrimaryVariant&quot;</span>&gt;</span>@color/purple_700<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;colorOnPrimary&quot;</span>&gt;</span>@color/white<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="comment">&lt;!-- Secondary brand color. --&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;colorSecondary&quot;</span>&gt;</span>@color/teal_200<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;colorSecondaryVariant&quot;</span>&gt;</span>@color/teal_700<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;colorOnSecondary&quot;</span>&gt;</span>@color/black<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="comment">&lt;!-- Status bar color. --&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:statusBarColor&quot;</span> <span class="attr">tools:targetApi</span>=<span class="string">&quot;l&quot;</span>&gt;</span>?attr/colorPrimaryVariant<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="comment">&lt;!-- Customize your theme here. --&gt;</span></span></span><br><span class="line"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="ac1-2"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.MainActivity&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">androidx.appcompat.widget.Toolbar</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/ma_tb&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;?actionBarSize&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">android:background</span>=<span class="string">&quot;#2196F3&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ListView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/ma_lv&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@id/ma_tb&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:choiceMode</span>=<span class="string">&quot;singleChoice&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="ac1-3"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/item_tv&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;测试&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;40dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toStartOf</span>=<span class="string">&quot;@+id/item_iv&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/item_iv&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;128px&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;128px&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toEndOf</span>=<span class="string">&quot;@id/item_tv&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="ac1-4"><p><img src="/posts/455482d811be/image-20220426104300058.png" alt="image-20220426104300058"></p><p><img src="/posts/455482d811be/image-20220426105659475.png" alt="image-20220426105659475"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h4 id="界面一功能实现"><a href="#界面一功能实现" class="headerlink" title="界面一功能实现"></a>界面一功能实现</h4><div class="tabs" id="listviewtwo"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#listviewtwo-1">实体类设计</button></li><li class="tab"><button type="button" data-href="#listviewtwo-2">自定义适配器</button></li><li class="tab"><button type="button" data-href="#listviewtwo-3">页面一Acitity设计</button></li><li class="tab"><button type="button" data-href="#listviewtwo-4">效果预览</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="listviewtwo-1"><ul><li>这里我们本应该设计省份和城市作为两个实体类，区分开两个列表的，但是这是个练习，为了减少重复的无用代码，我们把城市和省份都复用City实体类</li><li>这里写了两个构造函数，分别给有图的省份和无图的城市使用</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.test6;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">City</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> imageId;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">City</span><span class="params">(String name, <span class="type">int</span> imageId)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.imageId = imageId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">City</span><span class="params">(String  name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name=name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getImageId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> imageId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setImageId</span><span class="params">(<span class="type">int</span> imageId)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.imageId = imageId;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="listviewtwo-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.test6;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line"><span class="keyword">import</span> android.widget.BaseAdapter;</span><br><span class="line"><span class="keyword">import</span> android.widget.ImageView;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.recyclerview.widget.RecyclerView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CityAdapter</span> <span class="keyword">extends</span> <span class="title class_">BaseAdapter</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> LinkedList&lt;City&gt; data;</span><br><span class="line">    <span class="keyword">private</span> Context context;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">CityAdapter</span><span class="params">(LinkedList&lt;City&gt; data, Context context)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">        <span class="built_in">this</span>.context = context;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> data.size();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getItem</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> data.get(i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">getItemId</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> View <span class="title function_">getView</span><span class="params">(<span class="type">int</span> i, View view, ViewGroup viewGroup)</span> &#123;</span><br><span class="line">        ViewHolder viewHolder=<span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">if</span>(view==<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="comment">//动态创建</span></span><br><span class="line">            view= LayoutInflater.from(context).inflate(R.layout.listitem,viewGroup,<span class="literal">false</span>);</span><br><span class="line">            viewHolder=<span class="keyword">new</span> <span class="title class_">ViewHolder</span>();</span><br><span class="line">            viewHolder.imageView=view.findViewById(R.id.item_iv);</span><br><span class="line">            viewHolder.textView=view.findViewById(R.id.item_tv);</span><br><span class="line">            view.setTag(viewHolder);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            viewHolder= (ViewHolder) view.getTag();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//设置数据</span></span><br><span class="line">        viewHolder.textView.setText(data.get(i).getName());</span><br><span class="line">        viewHolder.imageView.setImageResource(data.get(i).getImageId());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> view;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//用ViewHolder优化代码</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">ViewHolder</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> ImageView imageView;</span><br><span class="line">        <span class="keyword">private</span> TextView textView;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="listviewtwo-3"><ul><li>这里要注意toolbar引入的类是<code>androidx.appcompat.widget.Toolbar</code>，弄错就闪退了，另外前面的NoActionbar没有设置也是会闪退的。</li><li>当然因为的toolbar没有什么实质功能，这个toolbar的菜单图标，你在xml中用imageview加上图标也是可以的。</li><li>这里我们跳转页面前先设置一个变量，这样我们在跳转页面二时能加载对应的数据</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.test6;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.annotation.NonNull;</span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.Menu;</span><br><span class="line"><span class="keyword">import</span> android.view.MenuItem;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.AdapterView;</span><br><span class="line"><span class="keyword">import</span> android.widget.ListView;</span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.widget.Toolbar;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> whichCity=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> LinkedList&lt;City&gt; cityLinkedList;</span><br><span class="line">    <span class="keyword">private</span> Toolbar toolbar;</span><br><span class="line">    <span class="keyword">private</span> ListView mlv;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">        toolbar=findViewById(R.id.ma_tb);</span><br><span class="line">        mlv=findViewById(R.id.ma_lv);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        toolbar.setTitle(<span class="string">&quot;城市管理&quot;</span>);</span><br><span class="line">        setSupportActionBar(toolbar);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//初始化数据</span></span><br><span class="line">        initCity();</span><br><span class="line">        <span class="comment">//设置adapter</span></span><br><span class="line">        mlv.setAdapter(<span class="keyword">new</span> <span class="title class_">CityAdapter</span>(cityLinkedList,<span class="built_in">this</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//设置监听实现页面二的跳转</span></span><br><span class="line">        mlv.setOnItemClickListener(<span class="keyword">new</span> <span class="title class_">AdapterView</span>.OnItemClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onItemClick</span><span class="params">(AdapterView&lt;?&gt; adapterView, View view, <span class="type">int</span> i, <span class="type">long</span> l)</span> &#123;</span><br><span class="line">                Intent intent=<span class="keyword">new</span> <span class="title class_">Intent</span>(MainActivity.<span class="built_in">this</span>,SecondActivity.class);</span><br><span class="line">                whichCity=i;<span class="comment">//标记哪一个省份被点击了，让页面二加载对应的gridview数据</span></span><br><span class="line">                startActivity(intent);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置toolbar菜单</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onCreateOptionsMenu</span><span class="params">(Menu menu)</span> &#123;</span><br><span class="line">        getMenuInflater().inflate(R.menu.toolbar_menu,menu);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.onCreateOptionsMenu(menu);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//初始化省份列表</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initCity</span><span class="params">()</span> &#123;</span><br><span class="line">        cityLinkedList=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;北京市&quot;</span>,R.drawable.beijing));</span><br><span class="line">        cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;上海市&quot;</span>,R.drawable.shanghai));</span><br><span class="line">        cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;湖北省&quot;</span>,R.drawable.hubei));</span><br><span class="line">        cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;浙江省&quot;</span>,R.drawable.zhengjiang));</span><br><span class="line">        cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;广东省&quot;</span>,R.drawable.guangdong));</span><br><span class="line">        cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;江苏省&quot;</span>,R.drawable.jiangsu));</span><br><span class="line">        cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;安徽省&quot;</span>,R.drawable.anhui));</span><br><span class="line">        cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;湖南省&quot;</span>,R.drawable.hunan));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="listviewtwo-4"><p><img src="/posts/455482d811be/image-20220426140723050.png" alt="image-20220426140723050"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h4 id="界面二布局文件的设计"><a href="#界面二布局文件的设计" class="headerlink" title="界面二布局文件的设计"></a>界面二布局文件的设计</h4><div class="tabs" id="girdview"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#girdview-1">activity布局设计</button></li><li class="tab"><button type="button" data-href="#girdview-2">girdview的listitem设计</button></li><li class="tab"><button type="button" data-href="#girdview-3">细节补充</button></li><li class="tab"><button type="button" data-href="#girdview-4">效果预览</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="girdview-1"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.SecondActivity&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">androidx.appcompat.widget.Toolbar</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/sa_tb&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;?actionBarSize&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;#2196F3&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;25sp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;添加城市&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;@color/white&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">            /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">androidx.appcompat.widget.Toolbar</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">GridView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/sa_gv&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@id/sa_tb&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:numColumns</span>=<span class="string">&quot;4&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:horizontalSpacing</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="girdview-2"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_margin</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/gridview_item_tv&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:padding</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;测一&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;20sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;@drawable/radius&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="girdview-3"><ul><li>在drawable目录下添加一个的圆角样式</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;</span><br><span class="line">    &lt;corners android:radius=&quot;10dp&quot;/&gt;</span><br><span class="line">    &lt;solid android:color=&quot;#89C9E6&quot;&gt;&lt;/solid&gt;</span><br><span class="line">&lt;/shape&gt;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="girdview-4"><p><img src="/posts/455482d811be/image-20220426153902169.png" alt="image-20220426153902169"></p><p><img src="/posts/455482d811be/image-20220426153832333.png" alt="image-20220426153832333"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h4 id="页面二功能实现"><a href="#页面二功能实现" class="headerlink" title="页面二功能实现"></a>页面二功能实现</h4><div class="tabs" id="gridviewtow"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#gridviewtow-1">自定义适配器</button></li><li class="tab"><button type="button" data-href="#gridviewtow-2">Activity类</button></li><li class="tab"><button type="button" data-href="#gridviewtow-3">效果预览</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="gridviewtow-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.test6;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line"><span class="keyword">import</span> android.widget.BaseAdapter;</span><br><span class="line"><span class="keyword">import</span> android.widget.ImageView;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GridViewCityAdapter</span> <span class="keyword">extends</span> <span class="title class_">BaseAdapter</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> LinkedList&lt;City&gt; data;</span><br><span class="line">    <span class="keyword">private</span> Context context;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">GridViewCityAdapter</span><span class="params">(LinkedList&lt;City&gt; data, Context context)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">        <span class="built_in">this</span>.context = context;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> data.size();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getItem</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> data.get(i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">getItemId</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> View <span class="title function_">getView</span><span class="params">(<span class="type">int</span> i, View view, ViewGroup viewGroup)</span> &#123;</span><br><span class="line">       ViewHolder viewHolder=<span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">if</span>(view==<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="comment">//动态创建</span></span><br><span class="line">            view= LayoutInflater.from(context).inflate(R.layout.gridview_listitem,viewGroup,<span class="literal">false</span>);</span><br><span class="line">            viewHolder=<span class="keyword">new</span> <span class="title class_">ViewHolder</span>();</span><br><span class="line">            viewHolder.textView=view.findViewById(R.id.gridview_item_tv);</span><br><span class="line">            view.setTag(viewHolder);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            viewHolder= (ViewHolder) view.getTag();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//设置数据</span></span><br><span class="line">        viewHolder.textView.setText(data.get(i).getName());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> view;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//用ViewHolder优化代码</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">ViewHolder</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> TextView textView;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="gridviewtow-2"><ul><li>这里利用页面一Activity实现跳转时的变量来决定加载哪些城市数据</li><li>因为城市太多了，我这里每个省份都只写了七个城市</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.test6;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.widget.GridView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SecondActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> LinkedList&lt;City&gt; cityLinkedList;</span><br><span class="line">    <span class="keyword">private</span> GridView gridView;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_second);</span><br><span class="line"></span><br><span class="line">        gridView=findViewById(R.id.sa_gv);</span><br><span class="line">        <span class="comment">//初始化数据</span></span><br><span class="line">        initCity(MainActivity.whichCity);</span><br><span class="line">        <span class="comment">//设置adapter</span></span><br><span class="line">        gridView.setAdapter(<span class="keyword">new</span> <span class="title class_">GridViewCityAdapter</span>(cityLinkedList,<span class="built_in">this</span>));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//通过传入省份号来初始化城市列表</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initCity</span><span class="params">(<span class="type">int</span> whichCity)</span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> (whichCity)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                cityLinkedList=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;东城区&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;西城区&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;朝阳区&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;丰台区&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;石景山&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;海淀区&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;顺义区&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;通州区&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;大兴区&quot;</span>));</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                cityLinkedList=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;黄埔区&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;徐汇区&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;长宁区&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;静安区&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;普陀山&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;虹口区&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;杨浦区&quot;</span>));</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                cityLinkedList=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;武汉市&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;黄氏市&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;十堰市&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;宜昌市&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;襄阳市&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;鄂州市&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;黄冈市&quot;</span>));</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                cityLinkedList=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;杭州市&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;宁波市&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;温州市&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;嘉兴市&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;湖州市&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;绍兴市&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;金华市&quot;</span>));</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">                cityLinkedList=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;广州市&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;韶关市&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;佛山市&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;珠海市&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;汕头市&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;江门市&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;湛江市&quot;</span>));</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">                cityLinkedList=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;南京市&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;无锡市&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;徐州市&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;常州市&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;苏州市&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;南通市&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;淮安市&quot;</span>));</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">                cityLinkedList=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;合肥市&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;芜湖市&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;蚌埠市&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;淮南市&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;淮北市&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;安庆市&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;铜陵市&quot;</span>));</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">7</span>:</span><br><span class="line">                cityLinkedList=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;长沙市&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;株洲市&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;湘潭市&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;衡阳市&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;昭阳市&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;岳阳市&quot;</span>));</span><br><span class="line">                cityLinkedList.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;杨永州&quot;</span>));</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="gridviewtow-3"><ul><li>点击省份后进去相应的城市页面</li><li>例：广东省</li></ul><p><img src="/posts/455482d811be/image-20220426155357687.png" alt="image-20220426155357687"></p><p><img src="/posts/455482d811be/image-20220426155413888.png" alt="image-20220426155413888"></p><ul><li>例：湖北省</li></ul><p><img src="/posts/455482d811be/image-20220426155430920.png" alt="image-20220426155430920"></p><p><img src="/posts/455482d811be/image-20220426155444522.png" alt="image-20220426155444522"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="最终效果"><a href="#最终效果" class="headerlink" title="最终效果"></a>最终效果</h2><ul><li>开始界面</li></ul><p><img src="/posts/455482d811be/image-20220426140723050.png" alt="image-20220426140723050"></p><ul><li>选择省份，进入界面</li></ul><p><img src="/posts/455482d811be/image-20220426155357687.png" alt="image-20220426155357687"></p><p><img src="/posts/455482d811be/image-20220426155413888.png" alt="image-20220426155413888"></p><ul><li>回退，重新选择</li></ul><p><img src="/posts/455482d811be/image-20220426155430920.png" alt="image-20220426155430920"></p><p><img src="/posts/455482d811be/image-20220426155444522.png" alt="image-20220426155444522"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;需求分析&quot;&gt;&lt;a href=&quot;#需求分析&quot; class=&quot;headerlink&quot; title=&quot;需求分析&quot;&gt;&lt;/a&gt;需求分析&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;请用ListView和自定义Adapter实现下列页面（可以自行设计并添加元素，以丰富该页面） :&lt;/li&gt;
&lt;</summary>
      
    
    
    
    <category term="Android学习笔记" scheme="https://gallifrey.asia/categories/Android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    <category term="实战练习" scheme="https://gallifrey.asia/categories/Android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%AE%9E%E6%88%98%E7%BB%83%E4%B9%A0/"/>
    
    
    <category term="Android" scheme="https://gallifrey.asia/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>Flutter安装踩坑指南</title>
    <link href="https://gallifrey.asia/posts/61fa1a119308/"/>
    <id>https://gallifrey.asia/posts/61fa1a119308/</id>
    <published>2022-04-24T04:16:14.000Z</published>
    <updated>2022-04-24T04:16:14.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><ul><li>昨天安装flutter时，遇到了不少问题，特此开了这篇博文写一下踩坑经历，解决方法，顺便做一下归档</li><li>有些安装问题参考了很多文档，博客，因为过于零散，这里只给出部分出处<ul><li><a href="https://book.flutterchina.club/chapter1/install_flutter.html#_1-3-1-安装flutter">1.3 搭建Flutter开发环境 | 《Flutter实战·第二版》 (flutterchina.club)</a></li><li><a href="https://flutterchina.club/docs/">Flutter文档 - Flutter中文网 (flutterchina.club)</a></li><li><a href="https://hujiyi.github.io/2021/12/04/flutter-development-environment-configuration/">在 Windows 10 配置 Flutter 开发环境 | Laohoo (hujiyi.github.io)</a></li><li><a href="https://flutter.cn/docs/get-started/install/windows">在 Windows 操作系统上安装和配置 Flutter 开发环境 | Flutter 中文文档 | Flutter 中文开发者网站</a></li><li><a href="http://www.javashuo.com/article/p-fdmtrwrn-np.html">Flutter项目启动一直卡在Running Gradle task ‘assembleDebug‘问题解决 - JavaShuo</a></li></ul></li><li>有些问题因为中国大陆的原因暂时无解，但不影响flutter的使用，具体请看下文</li><li>由于Flutter会同时构建Android和IOS两个平台的发布包，所以Flutter同时依赖Android SDK和iOS SDK，在安装Flutter时也需要安装相应平台的构建工具和SDK。因为本人暂时只用Windows环境进行开发，这里只涉及flutter在Windows下的环境搭建。</li></ul><h2 id="使用镜像"><a href="#使用镜像" class="headerlink" title="使用镜像"></a>使用镜像</h2><ul><li>由于在国内访问Flutter有时可能会受到限制，Flutter官方为中国开发者搭建了临时镜像，大家可以将如下环境变量加入到用户环境变量中：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export PUB_HOSTED_URL=https://pub.flutter-io.cn</span><br><span class="line">export FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn</span><br></pre></td></tr></table></figure><ul><li>一般来说，window系统是使用了不了export命令的（linux可以），当然你可以用setx 命令，不过这里我们直接手动添加就好了：<ul><li>转到 “控制面板&gt;用户帐户&gt;用户帐户&gt;更改我的环境变量”</li><li>在“用户变量”下新建用户变量，添加上面的变量名和变量值</li></ul></li></ul><p><img src="/posts/61fa1a119308/image-20220424131214005.png" alt="image-20220424131214005"></p><div class="tip "><p>此镜像为临时镜像，并不能保证一直可用，读者可以参考<a href="https://flutter.dev/community/china">https://flutter.dev/community/china</a> 以获得有关镜像服务器的最新动态。</p></div><h2 id="安装git命令行工具"><a href="#安装git命令行工具" class="headerlink" title="安装git命令行工具"></a>安装git命令行工具</h2><ul><li><p>安装flutter前请先安装git命令行工具,不然是无法执行flutter的命令的，这里点击下方链接，选择版本安装就好了</p></li><li><p><a href="https://git-scm.com/download/win">Git for Windows</a> </p></li><li><p>已安装Git for Windows后，请确保命令提示符或PowerShell中运行 <code>git</code> 命令，不然在后面运行<code>flutter doctor</code>时将出现<code>Unable to find git in your PATH</code>错误, 此时需要手动添加<code>C:\Program Files\Git\bin</code>至<code>Path</code>系统环境变量中。</p></li></ul><div class="tip warning"><p>这里是添加到系统环境变量的Path中而不是用户环境变量的Path中</p></div><h2 id="获取Flutter-SDK"><a href="#获取Flutter-SDK" class="headerlink" title="获取Flutter SDK"></a>获取Flutter SDK</h2><h4 id="版本"><a href="#版本" class="headerlink" title="版本"></a>版本</h4><ul><li><p>Flutter SDK有多个分支，如beta、dev、master、stable，其中stable分支为稳定分支（日后有新的稳定版本发布后可能也会有新的稳定分支，如1.0.0），dev和master为开发分支</p></li><li><p>这里我下载版本是文章创建时的最新稳定版本：</p></li></ul><div class="table-container"><table><thead><tr><th>Flutter version</th><th>Architecture</th><th>Ref</th><th>Release Date</th><th>Dart version</th></tr></thead><tbody><tr><td><a href="https://storage.googleapis.com/flutter_infra_release/releases/stable/windows/flutter_windows_2.10.5-stable.zip">2.10.5</a></td><td>x64</td><td>5464c5b</td><td>2022/4/19</td><td>2.16.2</td></tr></tbody></table></div><h4 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h4><ul><li>因为翻墙问题,这里给出多个，下载地址：<ul><li>Flutter 官方网站：<a href="https://flutter.dev/docs/development/tools/sdk/releases">https://flutter.dev/docs/development/tools/sdk/releases</a> </li><li>清华大学镜像：<a href="https://mirrors.tuna.tsinghua.edu.cn/flutter/flutter_infra_release/releases/stable/windows/">https://mirrors.tuna.tsinghua.edu.cn/flutter/flutter_infra_release/releases/stable/windows/</a></li><li>flutter github:<a href="https://github.com/flutter/flutter/releases">https://github.com/flutter/flutter/releases</a> </li></ul></li><li>将安装包zip解压到你想安装Flutter SDK的路径（如：<code>C:\src\flutter</code>；注意，<strong>不要</strong>将flutter安装到需要一些高权限的路径如<code>C:\Program Files\</code>）。</li><li>在Flutter安装目录的<code>flutter</code>文件下找到<code>flutter_console.bat</code>，双击运行并启动<strong>flutter命令行</strong>，接下来，你就可以在Flutter命令行运行flutter命令了。</li></ul><h4 id="更新环境变量"><a href="#更新环境变量" class="headerlink" title="更新环境变量"></a>更新环境变量</h4><p>如果你想在Windows系统自带命令行运行flutter命令，需要添加以下环境变量到用户PATH：</p><ul><li>转到 “控制面板&gt;用户帐户&gt;用户帐户&gt;更改我的环境变量”</li><li>在“用户变量”下检查是否有名为“Path”的条目:<ul><li>如果该条目存在， 追加 flutter\bin的全路径，使用 ; 作为分隔符.</li><li>如果该条目不存在，创建一个新用户变量 Path ，然后将 <code>flutter\bin</code> 的全路径作为它的值.</li></ul></li></ul><p>重启Windows以应用此更改.</p><h2 id="检测Flutter运行依赖（踩坑重点）"><a href="#检测Flutter运行依赖（踩坑重点）" class="headerlink" title="检测Flutter运行依赖（踩坑重点）"></a>检测Flutter运行依赖（踩坑重点）</h2><h4 id="执行flutter-doctor命令"><a href="#执行flutter-doctor命令" class="headerlink" title="执行flutter doctor命令"></a>执行flutter doctor命令</h4><ul><li>打开一个新的命令提示符或PowerShell窗口并运行以下命令以查看是否需要安装任何依赖项来完成安装：：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter doctor</span><br></pre></td></tr></table></figure><ul><li>第一次运行flutter doctor时间可能比较久，这里我第一次运行后的结果，可以看出，flutter doctor运行后给出问题的同时，也给出了解决方案，但鉴于国内某种神秘力量导致的网络原因，可能用给出的方法无法解决（是我），所以下面给出几个问题官方方案外的解决办法。</li></ul><p><img src="/posts/61fa1a119308/image-20220424133636713.png" alt="image-20220424133636713"></p><h4 id="常见问题及解决方案"><a href="#常见问题及解决方案" class="headerlink" title="常见问题及解决方案"></a>常见问题及解决方案</h4><div class="tabs" id="one"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#one-1">Android toolchain</button></li><li class="tab"><button type="button" data-href="#one-2">HTTP Host Availability</button></li><li class="tab"><button type="button" data-href="#one-3">开发用ide问题</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="one-1"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[!] Android toolchain - develop <span class="keyword">for</span> Android devices (Android SDK version 31.0.0)</span><br><span class="line">    • Android SDK at D:\Android\sdk</span><br><span class="line">    X cmdline-tools component is missing</span><br><span class="line">      Run `path/to/sdkmanager --install <span class="string">&quot;cmdline-tools;latest&quot;</span>`</span><br><span class="line">      See https://developer.android.com/studio/command-line <span class="keyword">for</span> more details.</span><br><span class="line">    X Android license status unknown.</span><br><span class="line">      Run `flutter doctor --android-licenses` to accept the SDK licenses.</span><br><span class="line">      See https://flutter.dev/docs/get-started/install/windows<span class="comment">#android-setup for more details.</span></span><br></pre></td></tr></table></figure><ul><li><code>Android toolchain</code> 是 <code>Android 开发工具链</code>，包含用于开发运行于 <code>Android设备</code> 的程序必需的一些程序或配置项。检查的结果显示这里有两个问题：</li></ul><div class="tip bolt"><p>问题一</p></div><p><code>X cmdline-tools component is missing</code>这个是插件<code>Android SDK Command-line Tools(latest)</code>没有安装，如果命令行<code>path/to/sdkmanager --install &quot;cmdline-tools;latest&quot;&#39;</code>无法安装，我们可以用android studio来安装这个插件</p><p><img src="/posts/61fa1a119308/image-20220424144319135.png" alt="image-20220424144319135"></p><div class="tip bolt"><p>问题二</p></div><p> <code>X Android license status unknown.</code>这个问题的原因是 <code>Flutter SDK</code> 没有得到 <code>Android SDK</code> 的授权，解决的办法已经包含在问题的提示信息中。在命令窗口中输入命令： <code>flutter doctor --android-licenses</code> ， 并全部回答 <code>y</code>， 就可以了。</p><div class="tip warning"><p>这里必须要先解决问题一中的插件问题</p></div><p><img src="/posts/61fa1a119308/image-20220424144227730.png" alt="image-20220424144227730"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="one-2"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[!] HTTP Host Availability</span><br><span class="line">    X HTTP host https://maven.google.com/ is not reachable. Reason: An error occurred <span class="keyword">while</span> checking the HTTP host:</span><br><span class="line">      信号灯超时时间已到</span><br><span class="line"> X HTTP host https://maven.google.com/ is not reachable. Reason: An error occurred <span class="keyword">while</span> checking the HTTP host:</span><br><span class="line">      信号灯超时时间已到     </span><br></pre></td></tr></table></figure><p>这个问题是因为国内网络问题（某种神秘力量），谷歌maven我们可以尝试更换更好阿里云的镜像来解决，但是谷歌云还是暂时无法解决。因为不影响flutter使用，个人建议不理就好了，所以下面谷歌maven更换镜像是可选操作</p><ul><li><p>谷歌maven更换镜像（可选）</p><ul><li><p>打开<code>/path-to-flutter-sdk/packages/flutter_tools/lib/src/http_host_validator.dart</code>文件，修改<code>https://maven.google.com/</code>为 google maven 的国内镜像，如<code>https://maven.aliyun.com/repository/google/</code></p></li><li><p>删除<code>/path-to-flutter-sdk/bin/cache</code> 文件夹</p></li><li><p>重新执行<code>flutter doctor</code></p></li></ul></li></ul><div class="tip "><ol><li>这里<code>path-to-flutter-sdk</code>是你自己的flutter的文件路径；</li><li>删除cache文件后，运行flutter doctor会重新下载cache文件(近800m)，网络不好的话 过程及其缓慢</li><li>当然实际上你只要删除cache一个或多个相关文件就好了，然后运行flutter doctor重新下载这些文件，但我也不知道具体是哪些文件，就粗暴删除整个cache文件夹了</li></ol></div><p><img src="/posts/61fa1a119308/image-20220424151651176.png" alt="image-20220424151651176"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="one-3"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[X] Visual Studio - develop <span class="keyword">for</span> Windows</span><br><span class="line">[X] Chrome - develop <span class="keyword">for</span> the web (Cannot find Chrome executable at .\Google\Chrome\Application\chrome.exe)</span><br><span class="line">    ! Cannot find Chrome. Try setting CHROME_EXECUTABLE to a Chrome executable.</span><br><span class="line">[X] Android Studio </span><br></pre></td></tr></table></figure><ul><li><p><code>[X] Chrome - develop for the web</code> 表示找不到 <code>Chrome 浏览器</code>, 这一项可以忽略，开发 <code>Flutter web</code> 应用时，可以直接使用 Windows 10 自带的 <code>Edge (web)</code> 浏览器</p></li><li><p><code>[X] Visual Studio - develop for Windows</code>表示你没有安装Visual Studio，因为我是轮替使用visual studio和android studio，如果你没有特别需求可以不安装</p></li><li><code>[x] Android Studio</code>没有安装android这个idea，这里给你个链接<a href="https://developer.android.google.cn/studio/">Download Android Studio and SDK tools  | Android Developers (google.cn)</a></li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="IDE配置与使用（踩坑重点）"><a href="#IDE配置与使用（踩坑重点）" class="headerlink" title="IDE配置与使用（踩坑重点）"></a>IDE配置与使用（踩坑重点）</h2><p>理论上可以使用任何文本编辑器与命令行工具来构建Flutter应用程序。 不过，Flutter官方建议使用Android Studio和VS Code之一以获得更好的开发体验。Flutter官方提供了这两款编辑器插件，通过IDE和插件可获得代码补全、语法高亮、widget编辑辅助、运行和调试支持等功能，可以帮助我们极大的提高开发效率。下面我们分别介绍一下Android Studio和VS Code的配置及使用.</p><div class="tabs" id="two"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#two-1">Android Studio 配置</button></li><li class="tab"><button type="button" data-href="#two-2">VS Code的配置</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="two-1"><div class="tip bolt"><p>简介 </p></div><p>由于Android Studio是基于IntelliJ IDEA开发的，所以读者也可以使用IntelliJ IDEA。</p><p>安装Flutter和Dart插件</p><p>需要安装两个插件:</p><ul><li><code>Flutter</code>插件： 支持Flutter开发工作流 (运行、调试、热重载等)。</li><li><code>Dart</code>插件： 提供代码分析 (输入代码时进行验证、代码补全等)。</li></ul><div class="tip bolt"><p>安装步骤</p></div><ol><li>启动Android Studio。</li><li>打开插件首选项 (macOS：<strong>Preferences&gt;Plugins</strong>, Windows：<strong>File&gt;Settings&gt;Plugins</strong>)。</li><li>选择 <strong>Browse repositories…</strong>，选择 flutter 插件并点击 <code>install</code>。</li><li>重启Android Studio后插件生效。</li></ol><p><img src="/posts/61fa1a119308/image-20220424162049021.png" alt="image-20220424162049021"></p><p><img src="/posts/61fa1a119308/image-20220424162056351.png" alt="image-20220424162056351"></p><div class="tip bolt"><p>创建Flutter应用</p></div><ol><li>选择 <strong>File&gt;New Flutter Project</strong> 。</li><li>选择 <strong>Flutter application</strong> 作为 project 类型, 然后点击 Next。</li><li>输入项目名称 (如 <code>myapp</code>)，然后点击 Next。</li><li>点击 <strong>Finish</strong>。</li><li>等待Android Studio安装SDK并创建项目。</li></ol><p>上述命令创建一个Flutter项目，项目名为myapp，其中包含一个使用<a href="https://material.io/guidelines/">Material 组件 (opens new window)</a>的简单演示应用程序。</p><p>在项目目录中，您应用程序的代码位于 <code>lib/main.dart</code>。</p><p><strong>运行应用程序</strong></p><ol><li><p>定位到Android Studio工具栏，如图所示：</p><p><img src="/posts/61fa1a119308/1-2.656e852b.png" alt="图1-3"></p></li><li><p>在 <strong>target selector</strong> 中, 选择一个运行该应用的Android设备。如果没有列出可用，请选择 <strong>Tools&gt;Android&gt;AVD Manager</strong> 并在那里创建一个。</p></li><li><p>在工具栏中点击 <strong>Run图标</strong>。</p></li><li><p>如果一切正常, 您应该在您的设备或模拟器上会看到启动的应用程序，如图所示：</p></li></ol><p><img src="/posts/61fa1a119308/1-3.801e91b2.png" alt="图1-4"></p><div class="tip error faa-horizontal animated-hover"><p>然而因为某种东方力量（墙），我们第一次运行后是卡在gradle，并不能成功运行应用，具体问题如下</p></div><div class="tip bolt"><p>踩坑</p></div><p><strong>问题分析</strong></p><p>因为国内网络原因，我第一次run就永久卡在<code>Running Gradle task ‘assembleDebug‘ . . .</code>,这时候我们可以用我们的老朋友阿里云镜像来解决这个问题</p><p><img src="/posts/61fa1a119308/image-20220424165257308.png" alt="image-20220424165257308"></p><p><strong>具体步骤：</strong></p><ul><li><p>修改android\build.gradle文件，把获取方法，换成通过镜像获取</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">maven &#123; url <span class="string">&#x27;https://maven.aliyun.com/repository/google&#x27;</span> &#125;</span><br><span class="line">      maven &#123; url <span class="string">&#x27;https://maven.aliyun.com/repository/jcenter&#x27;</span> &#125;</span><br><span class="line">      maven &#123; url <span class="string">&#x27;http://maven.aliyun.com/nexus/content/groups/public&#x27;</span> &#125;</span><br></pre></td></tr></table></figure></li></ul><p><img src="/posts/61fa1a119308/image-20220424165934236.png" alt="image-20220424165934236"></p><ul><li>修改Flutter的配置文件, 该文件在Flutter安装目录/packages/flutter_tools/gradle/flutter.gradlej</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">maven &#123; url <span class="string">&#x27;https://maven.aliyun.com/repository/google&#x27;</span> &#125;</span><br><span class="line">         maven &#123; url <span class="string">&#x27;https://maven.aliyun.com/repository/jcenter&#x27;</span> &#125;</span><br><span class="line">         maven &#123; url <span class="string">&#x27;http://maven.aliyun.com/nexus/content/groups/public&#x27;</span> &#125;</span><br></pre></td></tr></table></figure><p><img src="/posts/61fa1a119308/image-20220424170309666.png" alt="image-20220424170309666"></p><p><strong>之后再次运行，各种文件下载完成后，不出意外的话，你就可以看到示例app了</strong></p><p><img src="/posts/61fa1a119308/image-20220424170916508.png" alt="image-20220424170916508"></p><div class="tip bolt"><p>体验热重载</p></div><p>Flutter 可以通过 <em>热重载（hot reload）</em> 实现快速的开发周期，热重载就是无需重启应用程序就能实时加载修改后的代码，并且不会丢失状态。简单的对代码进行更改，然后告诉IDE或命令行工具你需要重新加载（点击reload按钮），你就会在你的设备或模拟器上看到更改。</p><ol><li><p>打开<code>lib/main.dart</code>文件</p></li><li><p>将字符串 <code>&#39;You have pushed the button this many times:&#39;</code> 更改为 <code>&#39;You have clicked the button this many times:&#39;</code></p></li><li><p>不要按“停止”按钮; 让您的应用继续运行.</p></li><li><p>要查更改，请调用 <strong>Save</strong> (<code>cmd-s</code> / <code>ctrl-s</code>)，或者点击 <strong>热重载按钮</strong> (带有闪电⚡️图标的按钮)。</p><p>你会立即在运行的应用程序中看到更新的字符串。</p></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="two-2"><div class="tip bolt"><p>简介</p></div><p>VS Code是一个轻量级编辑器，支持Flutter运行和调试。</p><p>安装flutter插件安装flutter插件</p><ol><li>启动 VS Code。</li><li>调用 <strong>View&gt;Command Palette…</strong>。</li><li>输入 ‘install’, 然后选择 <strong>Extensions: Install Extension</strong> action。</li><li>在搜索框输入 <code>flutter</code> ，在搜索结果列表中选择 ‘Flutter’, 然后点击 <strong>Install</strong>。</li><li>选择 ‘OK’ 重新启动 VS Code。</li><li>验证配置<ul><li>调用 <strong>View&gt;Command Palette…</strong></li><li>输入 ‘doctor’, 然后选择 <strong>‘Flutter: Run Flutter Doctor’</strong> action。</li><li>查看“OUTPUT”窗口中的输出是否有问题</li></ul></li></ol><div class="tip bolt"><p>创建Flutter应用</p></div><ol><li>启动 VS Code</li><li>调用 <strong>View&gt;Command Palette…</strong></li><li>输入 ‘flutter’, 然后选择 <strong>‘Flutter: New Project’</strong> action</li><li>输入 Project 名称 (如<code>myapp</code>), 然后按回车键</li><li>指定放置项目的位置，然后按蓝色的确定按钮</li><li>等待项目创建继续，并显示main.dart文件</li></ol><div class="tip bolt"><p>体验热重载</p></div><ol><li>打开<code>lib/main.dart</code>文件。</li><li>将字符串 <code>&#39;You have pushed the button this many times:&#39;</code> 更改为 <code>&#39;You have clicked the button this many times:&#39;</code>。</li><li>不要按“停止”按钮; 让您的应用继续运行。</li><li>要查看您的更改，请调用 <strong>Save</strong> (<code>cmd-s</code> / <code>ctrl-s</code>), 或者点击 <strong>热重载按钮</strong> (绿色圆形箭头按钮)。</li></ol><p>你会立即在运行的应用程序中看到更新的字符串。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="版本控制"><a href="#版本控制" class="headerlink" title="版本控制"></a>版本控制</h2><h4 id="Flutter-SDK分支"><a href="#Flutter-SDK分支" class="headerlink" title="Flutter SDK分支"></a>Flutter SDK分支</h4><p>Flutter SDK有多个分支，如beta、dev、master、stable，其中stable分支为稳定分支（日后有新的稳定版本发布后可能也会有新的稳定分支，如1.0.0），dev和master为开发分支，安装flutter后，你可以运行<code>flutter channel</code>查看所有分支，如笔者本地运行后，结果如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Flutter channels:</span><br><span class="line">  beta</span><br><span class="line">  dev</span><br><span class="line">* master</span><br></pre></td></tr></table></figure><p>即你本地的Flutter SDK 跟踪的分支，要切换分支，可以使用<code>flutter channel beta</code> 或 <code>flutter channel master</code>，Flutter官方建议跟踪稳定分支，但你也可以跟踪<code>master</code>分支，这样可以查看最新的变化，但这样稳定性要低的多。</p><h4 id="升级Flutter-SDK和依赖包"><a href="#升级Flutter-SDK和依赖包" class="headerlink" title="#升级Flutter SDK和依赖包"></a><a href="https://book.flutterchina.club/chapter1/install_flutter.html#升级flutter-sdk和依赖包">#</a>升级Flutter SDK和依赖包</h4><p>要升级flutter sdk，只需一句命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter upgrade</span><br></pre></td></tr></table></figure><p>该命令会同时更新Flutter SDK和你的flutter项目依赖包。如果你只想更新项目依赖包（不包括Flutter SDK），可以使用如下命令：</p><ul><li><code>flutter packages get</code>获取项目所有的依赖包。</li><li><code>flutter packages upgrade</code> 获取项目所有依赖包的最新版本。</li></ul><h2 id="日后谈"><a href="#日后谈" class="headerlink" title="日后谈"></a>日后谈</h2><ul><li>第一次安装flutter，我想不到会有这么多的小问题，当然其实大部分是由于国内网络（神秘东方力量和中国大陆不存的谷歌公司）的原因，这里其实很多人想到用<code>vpn</code>是不是就能解决这个问题呢？</li><li>答案是对但也不完全对，因为除了部分下载软件插件的时候可以通过<code>vpn</code>加速外，软件内部的资源获取和数据连接，是及时你设置全局代理也无法连接上的</li><li>这里给出一个我自己常用的<code>vpn</code>付费服务，如果大家想用来加速一下github登陆，看看直播，网飞之类的是可以的。但是游戏加速器的话，个人觉得是不可行的。当然最有价值的，我个人觉得是github加速和git文件传输加速了</li></ul><details class="folding-tag"><summary> 请不要随意传播 </summary>              <div class="content">              <p><a href="https://client.cloudn.me/aff.php?aff=18067">https://client.cloudn.me/aff.php?aff=18067</a></p>              </div>            </details><ul><li>幸好中国还是有很多像清华镜像，阿里镜像这种资源镜像网站，对于我们日常开发来说，不会有太大的问题</li><li>不过像内置的谷歌云这种服务的话，我们就当它不存在好了</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;昨天安装flutter时，遇到了不少问题，特此开了这篇博文写一下踩坑经历，解决方法，顺便做一下归档&lt;/li&gt;
&lt;li&gt;有些安装问</summary>
      
    
    
    
    <category term="flutter" scheme="https://gallifrey.asia/categories/flutter/"/>
    
    
    <category term="flutter" scheme="https://gallifrey.asia/tags/flutter/"/>
    
    <category term="dart" scheme="https://gallifrey.asia/tags/dart/"/>
    
  </entry>
  
  <entry>
    <title>Tag Plugins Plus标签插件的使用测试</title>
    <link href="https://gallifrey.asia/posts/8b793eb7376b/"/>
    <id>https://gallifrey.asia/posts/8b793eb7376b/</id>
    <published>2022-04-21T07:35:00.000Z</published>
    <updated>2022-05-01T13:48:42.754Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><ul><li>在安装了店长的Tag Plugins Plus标签插件之后，想逐个测试一下各个标签的写法，以便以后自己回顾，因此有了这篇博客<del>（不是想水一篇博文）</del>。</li><li>插件的出处，安装，和完整的使用教程请看店长的原文,这里就不赘述了。<div class="tag link"><a class="link-card" title="Tag Plugins Plus" href="https://akilar.top/posts/615e2dec/"><div class="left"><img src="https://npm.elemecdn.com/akilar-candyassets/image/siteicon/favicon.ico"></div><div class="right"><p class="text">Tag Plugins Plus</p><p class="url">https://akilar.top/posts/615e2dec/</p></div></a></div></li></ul><ul><li>因为是方便我个人使用，所以各个标签的测试并不会遵循一定的顺序</li><li>一些标签组件的组件的样式，我小幅度魔改过，所以可能按照教程写出来标签样式跟我不太一样，但功能是相同的</li><li>然后学业繁忙，本博文长期更新</li></ul><h2 id="分栏-tab"><a href="#分栏-tab" class="headerlink" title="分栏 tab"></a>分栏 tab</h2><div class="tabs" id="test01"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test01-1">配置语法</button></li><li class="tab"><button type="button" data-href="#test01-2">配置参数</button></li><li class="tab"><button type="button" data-href="#test01-3">效果预览</button></li><li class="tab"><button type="button" data-href="#test01-4">示例源码</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test01-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs Unique name,[index] %&#125;</span><br><span class="line">&lt;!-- tab [Tab caption] [@icon] --&gt;</span><br><span class="line">Any content (support inline tags too).</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test01-2"><ol><li>Unique name :<ul><li>选项卡块标签的唯一名称，不带逗号。</li><li>将在 #id 中用作每个标签及其索引号的前缀。</li><li>如果名称中包含空格，则对于生成 #id，所有空格将由破折号代替。</li><li>仅当前帖子 / 页面的 URL 必须是唯一的！</li></ul></li><li>[index]:<ul><li>活动选项卡的索引号。</li><li>如果未指定，将选择第一个标签（1）。</li><li>如果 index 为 - 1，则不会选择任何选项卡。</li><li>可选参数。</li></ul></li><li>[Tab caption]:<ul><li>当前选项卡的标题。</li><li>如果未指定标题，则带有制表符索引后缀的唯一名称将用作制表符的标题。</li><li>如果未指定标题，但指定了图标，则标题将为空。</li><li>可选参数。</li></ul></li><li>[@icon]:<ul><li>FontAwesome 图标名称（全名，看起来像 “fas fa-font”）</li><li>可以指定带空格或不带空格；</li><li>例如’Tab caption @icon’ 和 ‘Tab caption@icon’.</li><li>可选参数。</li></ul></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test01-3"><div class="tabs" id="test_1"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test_1-1">test_1 1</button></li><li class="tab"><button type="button" data-href="#test_1-2">test_1 2</button></li><li class="tab"><button type="button" data-href="#test_1-3">test_1 3</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test_1-1"><p>不填index，预设默认选择第一个</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test_1-2"><p>不填index，预设默认选择第一个</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test_1-3"><p>不填index，预设默认第一个</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><div class="tabs" id="test_2"><ul class="nav-tabs"><li class="tab"><button type="button" data-href="#test_2-1">test_2 1</button></li><li class="tab active"><button type="button" data-href="#test_2-2">test_2 2</button></li><li class="tab"><button type="button" data-href="#test_2-3">test_2 3</button></li></ul><div class="tab-contents"><div class="tab-item-content" id="test_2-1"><p>填写index，预设选择index值,这里index是2</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content active" id="test_2-2"><p>填写index，预设选择index值,这里index是2</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test_2-3"><p>填写index，预设选择index值,这里index是2</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><div class="tabs" id="test_3"><ul class="nav-tabs"><li class="tab"><button type="button" data-href="#test_3-1">test_3 1</button></li><li class="tab"><button type="button" data-href="#test_3-2">test_3 2</button></li><li class="tab"><button type="button" data-href="#test_3-3">test_3 3</button></li></ul><div class="tab-contents"><div class="tab-item-content" id="test_3-1"><p>index值为-1，没有预设值</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test_3-2"><p>填写index，没有预设值</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test_3-3"><p>填写index，没有预设值</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><div class="tabs" id="test_4"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test_4-1">只有tab名</button></li><li class="tab"><button type="button" data-href="#test_4-2"><i class="fas fa-bomb"></i>只有icon</button></li><li class="tab"><button type="button" data-href="#test_4-3"><i class="fas fa-bomb"></i>有tab名和icon</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test_4-1"><p>只有tab名</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test_4-2"><p>只有icon</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test_4-3"><p>有tab名和icon</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test01-4"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs test_1 %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line">不填index，预设默认选择第一个</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line">不填index，预设默认选择第一个</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line">不填index，预设默认第一个</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs test_2,2 %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line">填写index，预设选择index值,这里index是2</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line">填写index，预设选择index值,这里index是2</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line">填写index，预设选择index值,这里index是2</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs test_3, -1 %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line">index值为-1，没有预设值</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line">填写index，没有预设值</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line">填写index，没有预设值</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs test_4 %&#125;</span><br><span class="line">&lt;!-- tab 只有tab名 --&gt;</span><br><span class="line">只有tab名</span><br><span class="line">&lt;!-- endtab--&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab 只有icon@fas fa-bomb --&gt;</span><br><span class="line">只有icon</span><br><span class="line">&lt;!-- endtab--&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab 有tab名和icon@fas fa-bomb --&gt;</span><br><span class="line">有tab名和icon</span><br><span class="line">&lt;!-- endtab--&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="连接卡片-link"><a href="#连接卡片-link" class="headerlink" title="连接卡片 link"></a>连接卡片 link</h2><div class="tabs" id="link_test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#link_test-1">配置语法</button></li><li class="tab"><button type="button" data-href="#link_test-2">效果预览</button></li><li class="tab"><button type="button" data-href="#link_test-3">示例代码</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="link_test-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% link 标题, 链接, 图片链接（可选） %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="link_test-2"><p>效果预览</p><div class="tag link"><a class="link-card" title="Tag Plugins Plus标签插件的使用测试" href="https://gallifrey.asia/posts/8b793eb7376b/"><div class="left"><img src="https://gallifrey.asia/images/shizi.png"></div><div class="right"><p class="text">Tag Plugins Plus标签插件的使用测试</p><p class="url">https://gallifrey.asia/posts/8b793eb7376b/</p></div></a></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="link_test-3"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% link Tag Plugins Plus标签插件的使用测试, https://gallifrey.asia/posts/8b793eb7376b/,https://gallifrey.asia/images/shizi.png %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="网站卡片-sitegroup"><a href="#网站卡片-sitegroup" class="headerlink" title="网站卡片 sitegroup"></a>网站卡片 sitegroup</h2><div class="tabs" id="sites_test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#sites_test-1">配置语法</button></li><li class="tab"><button type="button" data-href="#sites_test-2">效果预览</button></li><li class="tab"><button type="button" data-href="#sites_test-3">示例源码</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="sites_test-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% sitegroup %&#125;</span><br><span class="line">&#123;% site 标题, url=链接, screenshot=截图链接, avatar=头像链接（可选）, description=描述（可选） %&#125;</span><br><span class="line">&#123;% site 标题, url=链接, screenshot=截图链接, avatar=头像链接（可选）, description=描述（可选） %&#125;</span><br><span class="line">&#123;% endsitegroup %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="sites_test-2"><div class="site-card-group"><a class="site-card" href="https://gallifrey.asia/posts/8b793eb7376b/"><div class="img"><img src="https://gallifrey.asia/img/sitehostIMG.webp"></div><div class="info"><img src="https://gallifrey.asia/images/shizi.png"><span class="title">gallifrey's bolg</span><span class="desc">我的技术归档，我的生活，我的梦</span></div></a><a class="site-card" href="https://gallifrey.asia/posts/8b793eb7376b/"><div class="img"><img src="https://cdn.jsdelivr.net/gh/Akilarlxh/ScreenShot@gh-pages/akilar.top.jpg"></div><div class="info"><img src="https://npm.elemecdn.com/akilar-candyassets/image/siteicon/favicon.png"><span class="title">Akilarの糖果屋</span><span class="desc">期待您的光临！</span></div></a></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="sites_test-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;% sitegroup %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% site gallifrey&#x27;s bolg, url=https://gallifrey.asia/posts/8b793eb7376b/, screenshot=https://gallifrey.asia/img/sitehostIMG.webp, avatar=https://gallifrey.asia/images/shizi.png, description=Tag Plugins Plus标签插件的使用测试 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% site Akilarの糖果屋, url=https://gallifrey.asia/posts/8b793eb7376b/, screenshot=https://cdn.jsdelivr.net/gh/Akilarlxh/ScreenShot@gh-pages/akilar.top.jpg, avatar=https://npm.elemecdn.com/akilar-candyassets/image/siteicon/favicon.png, description=期待您的光临！%&#125;</span><br><span class="line"></span><br><span class="line">&#123;% endsitegroup %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="上标标签"><a href="#上标标签" class="headerlink" title="上标标签"></a>上标标签</h2><div class="tabs" id="tip_test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#tip_test-1">标签语法</button></li><li class="tab"><button type="button" data-href="#tip_test-2">配置参数</button></li><li class="tab"><button type="button" data-href="#tip_test-3">样式预览</button></li><li class="tab"><button type="button" data-href="#tip_test-4">示例源码</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="tip_test-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip [参数，可选] %&#125;文本内容&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="tip_test-2"><ol><li>样式: success,error,warning,bolt,ban,home,sync,cogs,key,bell</li><li>自定义图标: 支持fontawesome。</li><li><del>自定图标有bug，没有提权值，只能等店长更新插件了</del>（1.016版本之后把这个bug修复了），<del>不过</del>这里还是放个fontawesome的链接：<a href="https://fontawesome.com/icons?from=io">Icons | Font Awesome</a></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="tip_test-3"><div class="tip "><p>默认情况</p></div><div class="tip success"><p>success</p></div><div class="tip error"><p>error</p></div><div class="tip warning"><p>warning</p></div><div class="tip bolt"><p>bolt</p></div><div class="tip ban"><p>ban</p></div><div class="tip home"><p>home</p></div><div class="tip sync"><p>sync</p></div><div class="tip cogs"><p>cogs</p></div><div class="tip key"><p>key</p></div><div class="tip bell"><p>bell</p></div><div class="tip fa-atom"><p>自定义font awesome图标</p></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="tip_test-4"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip %&#125;默认情况&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip success %&#125;success&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip error %&#125;error&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip warning %&#125;warning&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip bolt %&#125;bolt&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban %&#125;ban&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip home %&#125;home&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip sync %&#125;sync&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip cogs %&#125;cogs&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip key %&#125;key&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip bell %&#125;bell&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip fa-atom %&#125;自定义font awesome图标&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="动态标签-anima"><a href="#动态标签-anima" class="headerlink" title="动态标签 anima"></a>动态标签 anima</h2><div class="tabs" id="anima_test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#anima_test-1">标签语法</button></li><li class="tab"><button type="button" data-href="#anima_test-2">配置参数</button></li><li class="tab"><button type="button" data-href="#anima_test-3">样式预览</button></li><li class="tab"><button type="button" data-href="#anima_test-4">示例源码</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="anima_test-1"><p><span class="p center logo large faa-bounce animated">animation</span><br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip [参数，可选] %&#125;文本内容&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="anima_test-2"><p>更多详情请参看<a href="http://l-lin.github.io/font-awesome-animation/">font-awesome-animation文档</a></p><ol><li>将所需的CSS类添加到图标（或DOM中的任何元素）。</li><li>对于父级悬停样式，需要给目标元素添加指定CSS类，同时还要给目标元素的父级元素添加CSS类<code>faa-parent animated-hover</code>。（详情见示例及示例源码）<br>You can regulate the speed of the animation by adding the CSS class or . faa-fastfaa-slow</li><li>可以通过给目标元素添加CSS类<code>faa-fast</code>或<code>faa-slow</code>来控制动画快慢。</li></ol><div class="table-container"><table><thead><tr><th style="text-align:left">On DOM load 当页面加载时 显示动画</th><th style="text-align:left">On hover 当鼠标悬停时 显示动画</th><th style="text-align:left">On parent hover 当鼠标悬停 在父级元素时 显示动画</th></tr></thead><tbody><tr><td style="text-align:left"><i class="fa fa-wrench faa-wrench animated"></i>faa-wrench animated</td><td style="text-align:left"><i class="fa fa-wrench faa-wrench animated-hover"></i>faa-wrench animated-hover</td><td style="text-align:left"><span class="faa-parent animated-hover"><i class="fas fa-wrench faa-wrench"></i>&nbsp;faa-wrench</span>faa-wrench</td></tr><tr><td style="text-align:left"><i class="fas fa-bell faa-ring animated"></i>faa-ring animated</td><td style="text-align:left"><i class="fas fa-bell faa-ring animated-hover"></i>faa-ring animated-hover</td><td style="text-align:left"><span class="faa-parent animated-hover"><i class="fas fa-bell faa-ring"></i>&nbsp;faa-ring</span>faa-ring</td></tr><tr><td style="text-align:left"><i class="fas fa-envelope faa-horizontal animated"></i>faa-horizontal animated</td><td style="text-align:left"><i class="fas fa-envelope faa-horizontal animated-hover"></i>faa-horizontal animated-hover</td><td style="text-align:left"><span class="faa-parent animated-hover"><i class="fas fa-envelope faa-horizontal"></i>&nbsp;faa-horizontal</span></td></tr><tr><td style="text-align:left"><i class="fas fa-thumbs-up faa-vertical animated"></i>faa-vertical animated</td><td style="text-align:left"><i class="fas fa-thumbs-up faa-vertical animated-hover"></i>faa-vertical animated-hover</td><td style="text-align:left"><span class="faa-parent animated-hover"><i class="fas fa-thumbs-up faa-vertical"></i>&nbsp;faa-vertical</span></td></tr><tr><td style="text-align:left"><i class="fas fa-exclamation-triangle faa-flash animated"></i>faa-flash animated</td><td style="text-align:left"><i class="fas fa-exclamation-triangle faa-flash animated-hover"></i>faa-flash animated-hover</td><td style="text-align:left"><span class="faa-parent animated-hover"><i class="fas fa-exclamation-triangle faa-flash"></i>&nbsp;faa-flash</span></td></tr><tr><td style="text-align:left"><i class="fas fa-thumbs-up faa-bounce animated"></i>faa-bounce animated</td><td style="text-align:left"><i class="fas fa-thumbs-up faa-bounce animated-hover"></i>faa-bounce animated-hover</td><td style="text-align:left"><span class="faa-parent animated-hover"><i class="fas fa-thumbs-up faa-bounce"></i>&nbsp;faa-bounce</span></td></tr><tr><td style="text-align:left"><i class="fas fa-spinner faa-spin animated"></i>faa-spin animated</td><td style="text-align:left"><i class="fas fa-spinner faa-spin animated-hover"></i>faa-spin animated-hover</td><td style="text-align:left"><span class="faa-parent animated-hover"><i class="fas fa-spinner faa-spin"></i>&nbsp;faa-spin</span></td></tr><tr><td style="text-align:left"><i class="fas fa-plane faa-tada animated"></i>faa-tada animated</td><td style="text-align:left"><i class="fas fa-plane faa-tada animated-hover"></i>faa-tada animated-hover</td><td style="text-align:left"><span class="faa-parent animated-hover"><i class="fas fa-plane faa-tada"></i>&nbsp;faa-tada</span></td></tr><tr><td style="text-align:left"><i class="fas fa-heart faa-pulse animated"></i>faa-pulse animated</td><td style="text-align:left"><i class="fas fa-heart faa-pulse animated-hover"></i>faa-pulse animated-hover</td><td style="text-align:left"><span class="faa-parent animated-hover"><i class="fas fa-heart faa-pulse"></i>&nbsp;faa-pulse</span></td></tr><tr><td style="text-align:left"><i class="fas fa-envelope faa-shake animated"></i>faa-shake animated</td><td style="text-align:left"><i class="fas fa-envelope faa-shake animated-hover"></i>faa-shake animated-hover</td><td style="text-align:left"><span class="faa-parent animated-hover"><i class="fas fa-envelope faa-shake"></i>&nbsp;faa-shake</span></td></tr><tr><td style="text-align:left"><i class="fas fa-trophy faa-tada animated"></i>faa-tada animated</td><td style="text-align:left"><i class="fas fa-trophy faa-tada animated-hover"></i>faa-tada animated-hover</td><td style="text-align:left"><span class="faa-parent animated-hover"><i class="fas fa-trophy faa-tada"></i>&nbsp;faa-tada</span></td></tr><tr><td style="text-align:left"><i class="fas fa-space-shuttle faa-passing animated"></i>faa-passing animated</td><td style="text-align:left"><i class="fas fa-space-shuttle faa-passing animated-hover"></i>faa-passing animated-hover</td><td style="text-align:left"><span class="faa-parent animated-hover"><i class="fas fa-space-shuttle faa-passing"></i>&nbsp;faa-passing</span></td></tr><tr><td style="text-align:left"><i class="fas fa-space-shuttle faa-passing-reverse animated"></i>faa-passing-reverse animated</td><td style="text-align:left"><i class="fas fa-space-shuttle faa-passing-reverse animated-hover"></i>faa-passing-reverse animated-hover</td><td style="text-align:left"><span class="faa-parent animated-hover"><i class="fas fa-space-shuttle faa-passing-reverse"></i>&nbsp;faa-passing-reverse</span></td></tr><tr><td style="text-align:left"><i class="fas fa-circle faa-burst animated"></i>faa-burst animated</td><td style="text-align:left"><i class="fas fa-circle faa-burst animated-hover"></i>faa-burst animated-hover</td><td style="text-align:left"><span class="faa-parent animated-hover"><i class="fas fa-circle faa-burst"></i>&nbsp;faa-burst</span></td></tr><tr><td style="text-align:left"><i class="fas fa-star faa-falling animated"></i>faa-falling animated</td><td style="text-align:left"><i class="fas fa-star faa-falling animated-hover"></i>faa-falling animated-hover</td><td style="text-align:left"><span class="faa-parent animated-hover"><i class="fas fa-star faa-falling"></i>&nbsp;faa-falling</span></td></tr><tr><td style="text-align:left"><i class="fas fa-rocket faa-rising animated"></i>faa-rising animated</td><td style="text-align:left"><i class="fas fa-rocket faa-rising animated-hover"></i>faa-rising animated-hover</td><td style="text-align:left"><span class="faa-parent animated-hover"><i class="fas fa-rocket faa-rising"></i>&nbsp;faa-rising</span></td></tr></tbody></table></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="anima_test-3"><ol><li>On DOM load（当页面加载时显示动画）</li></ol><div class="tip warning faa-horizontal animated"><p>warning</p></div><div class="tip ban faa-flash animated"><p>ban</p></div><ol><li>调整动画速度</li></ol><div class="tip warning faa-horizontal animated faa-fast"><p>warning</p></div><div class="tip ban faa-flash animated faa-slow"><p>ban</p></div><ol><li>On hover（当鼠标悬停时显示动画）</li></ol><div class="tip warning faa-horizontal animated-hover"><p>warning</p></div><div class="tip ban faa-flash animated-hover"><p>ban</p></div><ol><li>On parent hover（当鼠标悬停在父级元素时显示动画）</li></ol><div class="tip warning faa-parent animated-hover"><p class="faa-horizontal">warning</p></div><div class="tip ban faa-parent animated-hover"><p class="faa-flash">ban</p></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="anima_test-4"><ol><li><p>On DOM load（当页面加载时显示动画）</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip warning faa-horizontal animated %&#125;warning&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban faa-flash animated %&#125;ban&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure></li><li><p>调整动画速度</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip warning faa-horizontal animated faa-fast %&#125;warning&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban faa-flash animated faa-slow %&#125;ban&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure></li><li><p>On hover（当鼠标悬停时显示动画）</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip warning faa-horizontal animated-hover %&#125;warning&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban faa-flash animated-hover %&#125;ban&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure></li><li><p>On parent hover（当鼠标悬停在父级元素时显示动画）</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip warning faa-parent animated-hover %&#125;<span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;faa-horizontal&quot;</span>&gt;</span></span>warning<span class="language-xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban faa-parent animated-hover %&#125;<span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;faa-flash&quot;</span>&gt;</span></span>ban<span class="language-xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure></li></ol><p>5.示例中的表格是html+</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;在安装了店长的Tag Plugins Plus标签插件之后，想逐个测试一下各个标签的写法，以便以后自己回顾，因此有了这篇博客&lt;d</summary>
      
    
    
    
    <category term="butterfly主题美化" scheme="https://gallifrey.asia/categories/butterfly%E4%B8%BB%E9%A2%98%E7%BE%8E%E5%8C%96/"/>
    
    
    <category term="butterfly魔改" scheme="https://gallifrey.asia/tags/butterfly%E9%AD%94%E6%94%B9/"/>
    
  </entry>
  
  <entry>
    <title>Android_Dialog练习</title>
    <link href="https://gallifrey.asia/posts/cbf0670f1993/"/>
    <id>https://gallifrey.asia/posts/cbf0670f1993/</id>
    <published>2022-04-06T14:22:49.000Z</published>
    <updated>2022-04-06T14:26:49.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="练习一"><a href="#练习一" class="headerlink" title="练习一"></a>练习一</h1><h2 id="需求分析"><a href="#需求分析" class="headerlink" title="需求分析"></a>需求分析</h2><ul><li>下面是弹出的提示对话框的内容（背景为白色的提示对话框），请自行设计布局文件，要求满足 :</li></ul><p><img src="/posts/cbf0670f1993/image-20220406031446645.png" alt="image-20220406031446645"></p><ol><li>界面元素如图所示，图片文件请自行选择任意图片<strong>替换</strong>：</li><li>点击“立即开启”，弹出新的Activity，内容为“我是一条新消息”</li><li>点击“我再想想”，关闭对话框。</li></ol><h2 id="设计"><a href="#设计" class="headerlink" title="设计"></a>设计</h2><h3 id="对话框布局"><a href="#对话框布局" class="headerlink" title="对话框布局"></a>对话框布局</h3><ul><li><p>这里先在layout目录下新建一个xml文件设计弹出的对话框布局</p></li><li><p>这里button的background用了自定的drawable文件效果，要修改themes.xml文件里的parent属性才能显示自定效果</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;style name=&quot;Theme.DialogTestApplication&quot; parent=&quot;Theme.AppCompat.DayNight.DarkActionBar&quot;&gt;</span><br></pre></td></tr></table></figure><p><img src="/posts/cbf0670f1993/image-20220406035745181.png" alt="image-20220406035745181"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.MainActivity&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/custom_tv1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;15dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:drawableTop</span>=<span class="string">&quot;@drawable/lingdang&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;请开启消息通知&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textStyle</span>=<span class="string">&quot;bold&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;@color/black&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/custom_tv2&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@id/custom_tv1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;@color/black&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginEnd</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;这样可以及时获取天气情况，预警提醒。掌握天气变化,生活无忧规划！&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;26sp&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/custom_btn1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@id/custom_tv2&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;立即开启&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;@color/white&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;@drawable/btn_round&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:paddingHorizontal</span>=<span class="string">&quot;124dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;26sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;#88000000&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/custom_btn2&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@id/custom_btn1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;我再想想&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;@null&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:paddingHorizontal</span>=<span class="string">&quot;60dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;26sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginBottom</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>在drawable目录下新建btn_round.xml文件，添加一个按钮样式</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shape</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">&quot;#0384F4&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">corners</span> <span class="attr">android:radius</span>=<span class="string">&quot;25dp&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="跳转页面"><a href="#跳转页面" class="headerlink" title="跳转页面"></a>跳转页面</h3><ul><li>新建一个activity，作为跳转页面</li></ul><p><img src="/posts/cbf0670f1993/image-20220406043730358.png" alt="image-20220406043730358"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">RelativeLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.SecondActivity&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_centerHorizontal</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_centerVertical</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;我是一条新消息&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="触发对话框按钮"><a href="#触发对话框按钮" class="headerlink" title="触发对话框按钮"></a>触发对话框按钮</h3><ul><li>在MainActivity添加一个触发弹出对话框的按钮</li></ul><p><img src="/posts/cbf0670f1993/image-20220406043530799.png" alt="image-20220406043530799"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.MainActivity&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;自定义对话框&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn_custom&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="Dialog动态加载及监听设置"><a href="#Dialog动态加载及监听设置" class="headerlink" title="Dialog动态加载及监听设置"></a>Dialog动态加载及监听设置</h3><ul><li>在MainActivity关联组件，设置监听，动态加载dialog并显示。</li></ul><p><img src="/posts/cbf0670f1993/image-20220406050016620.png" alt="image-20220406050016620"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.dialogtestapplication;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AlertDialog;</span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.Button;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Button mBtnCustom;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">        mBtnCustom=findViewById(R.id.btn_custom);</span><br><span class="line"></span><br><span class="line">        mBtnCustom.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">                <span class="comment">//动态加载</span></span><br><span class="line">                view= LayoutInflater.from(MainActivity.<span class="built_in">this</span>).inflate(R.layout.layout_custom,<span class="literal">null</span>,<span class="literal">false</span>);</span><br><span class="line">                AlertDialog.Builder customDialog=<span class="keyword">new</span> <span class="title class_">AlertDialog</span>.Builder(MainActivity.<span class="built_in">this</span>);</span><br><span class="line">                Button customBtn1=view.findViewById(R.id.custom_btn1);</span><br><span class="line">                Button customBtn2=view.findViewById(R.id.custom_btn2);</span><br><span class="line">                customDialog.setView(view).show();</span><br><span class="line">                <span class="comment">//给两个按钮分别添加监听</span></span><br><span class="line">                customBtn1.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">                        <span class="comment">//实现页面跳转</span></span><br><span class="line">                        Intent intent=<span class="keyword">new</span> <span class="title class_">Intent</span>(MainActivity.<span class="built_in">this</span>,SecondActivity.class);</span><br><span class="line">                        startActivity(intent);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line"></span><br><span class="line">                customBtn2.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">                         finish();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="练习二"><a href="#练习二" class="headerlink" title="练习二"></a>练习二</h1><h2 id="需求分析-1"><a href="#需求分析-1" class="headerlink" title="需求分析"></a>需求分析</h2><ul><li>根据下图，弹出进度对话框</li></ul><ol><li>界面元素的效果如图所示，图标可以用任意图案替换</li><li>要求进度条能发生模拟进度变化。</li></ol><p><img src="/posts/cbf0670f1993/clip_image002-16491925948833.jpg" alt="img"></p><h2 id="设计-1"><a href="#设计-1" class="headerlink" title="设计"></a>设计</h2><h3 id="添加弹出按钮"><a href="#添加弹出按钮" class="headerlink" title="添加弹出按钮"></a>添加弹出按钮</h3><ul><li>在原来MainActivity里面再加一个弹出按钮</li></ul><p><img src="/posts/cbf0670f1993/image-20220406051520338.png" alt="image-20220406051520338"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;进程对话框&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn_progress&quot;</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br></pre></td></tr></table></figure><h3 id="设计进程对话框"><a href="#设计进程对话框" class="headerlink" title="设计进程对话框"></a>设计进程对话框</h3><ul><li>进程对话框直接在Activity类中写java代码就可以实现了</li></ul><p><img src="/posts/cbf0670f1993/image-20220406053348085.png" alt="image-20220406053348085"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">mBtnProgress=findViewById(R.id.btn_progress);</span><br><span class="line">      mBtnProgress.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">          <span class="meta">@Override</span></span><br><span class="line">          <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">              ProgressDialog progressDialog=<span class="keyword">new</span> <span class="title class_">ProgressDialog</span>(MainActivity.<span class="built_in">this</span>);</span><br><span class="line"></span><br><span class="line">              progressDialog.setIcon(R.mipmap.bilibili);</span><br><span class="line">              progressDialog.setTitle(<span class="string">&quot;网络加载&quot;</span>);</span><br><span class="line">              progressDialog.setMessage(<span class="string">&quot;正在努力加载，请耐心等待......&quot;</span>);</span><br><span class="line">              progressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL); <span class="comment">//设置水平条进度条</span></span><br><span class="line">              progressDialog.setProgress(<span class="number">0</span>);<span class="comment">//设置初始值</span></span><br><span class="line">              progressDialog.setSecondaryProgress(<span class="number">5</span>);<span class="comment">//设置二级进度条的初始值</span></span><br><span class="line">              progressDialog.setMax(<span class="number">2233</span>);<span class="comment">//设置最大值</span></span><br><span class="line">              progressDialog.show();<span class="comment">//显示</span></span><br><span class="line">              <span class="comment">//这里尝试一下lamda表达式的写法</span></span><br><span class="line">              <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">                 <span class="keyword">while</span>(progressDialog.getProgress()&lt;progressDialog.getMax())&#123;</span><br><span class="line">                     <span class="keyword">try</span> &#123;</span><br><span class="line">                         Thread.sleep(<span class="number">100</span>);<span class="comment">//间隔100毫秒</span></span><br><span class="line">                         progressDialog.incrementProgressBy(<span class="number">23</span>);<span class="comment">//一级进度条增长值</span></span><br><span class="line">                         progressDialog.incrementSecondaryProgressBy(<span class="number">25</span>);<span class="comment">//二级进度增长值</span></span><br><span class="line">                     &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                         e.printStackTrace();</span><br><span class="line">                     &#125;</span><br><span class="line"></span><br><span class="line">                 &#125;</span><br><span class="line">              &#125;).start();<span class="comment">//记得start</span></span><br><span class="line">          &#125;</span><br><span class="line">      &#125;);</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;练习一&quot;&gt;&lt;a href=&quot;#练习一&quot; class=&quot;headerlink&quot; title=&quot;练习一&quot;&gt;&lt;/a&gt;练习一&lt;/h1&gt;&lt;h2 id=&quot;需求分析&quot;&gt;&lt;a href=&quot;#需求分析&quot; class=&quot;headerlink&quot; title=&quot;需求分析&quot;&gt;&lt;/a&gt;需求分</summary>
      
    
    
    
    <category term="Android学习笔记" scheme="https://gallifrey.asia/categories/Android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    <category term="实战练习" scheme="https://gallifrey.asia/categories/Android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%AE%9E%E6%88%98%E7%BB%83%E4%B9%A0/"/>
    
    
    <category term="Android" scheme="https://gallifrey.asia/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>Android_Fragment练习</title>
    <link href="https://gallifrey.asia/posts/e897d3717c7c/"/>
    <id>https://gallifrey.asia/posts/e897d3717c7c/</id>
    <published>2022-04-05T21:47:03.000Z</published>
    <updated>2022-04-05T21:47:03.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="需求分析"><a href="#需求分析" class="headerlink" title="需求分析"></a>需求分析</h1><ul><li>在Activity中显示如下效果 </li></ul><p><img src="/posts/e897d3717c7c/clip_image002.jpg" alt="图1"></p><p>1） 界面元素如图1所示</p><p>2） 点击”人物“，文字和图片都会相应改变，如图2所示。点击”动物“和”植物“时，效果类似。</p><p><img src="/posts/e897d3717c7c/clip_image004.jpg" alt="图2"></p><p>（3） 点击“Click我，传data给Activity”按钮，首先实现按钮本身的按压效果，并修改上方TextView的内容为“Animal from fragment。如图3所示。<br> 提示：按钮在fragment类中，TextView在Activity类中</p><p><img src="/posts/e897d3717c7c/clip_image006.jpg" alt="图3"></p><h1 id="设计"><a href="#设计" class="headerlink" title="设计"></a>设计</h1><h3 id="Activity布局"><a href="#Activity布局" class="headerlink" title="Activity布局"></a>Activity布局</h3><p><img src="/posts/e897d3717c7c/image-20220406093348784.png" alt="image-20220406093348784"></p><ul><li>这里要用动态方式引入fragment        <FrameLayout>…….&lt;/FramLayout&gt;</FrameLayout></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.MainActivity&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/textview&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;26sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;这里之后用Java代码动态填写&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:paddingVertical</span>=<span class="string">&quot;30dp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">FrameLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/fl_container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">RadioGroup</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/radiogroup&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:checkedButton</span>=<span class="string">&quot;@id/rg_person&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RadioButton</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/rg_person&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">style</span>=<span class="string">&quot;@style/flRadioButton&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;人物&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;@drawable/fl_rb_textcolor&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:drawableTop</span>=<span class="string">&quot;@drawable/fl_person_bg&quot;</span></span></span><br><span class="line"><span class="tag">            /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RadioButton</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/rg_animal&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">style</span>=<span class="string">&quot;@style/flRadioButton&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;动物&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;@drawable/fl_rb_textcolor2&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:drawableTop</span>=<span class="string">&quot;@drawable/fl_animal_bg&quot;</span></span></span><br><span class="line"><span class="tag">            /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RadioButton</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/rg_plant&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">style</span>=<span class="string">&quot;@style/flRadioButton&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;@drawable/fl_rb_textcolor3&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:drawableTop</span>=<span class="string">&quot;@drawable/fl_plant_bg&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;植物&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">            /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">RadioGroup</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>在values目录下创建flRadioButton.xml文件，编写统一的样式，减少重复代码</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;flRadioButton&quot;</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:layout_width&quot;</span>&gt;</span>0dp<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:layout_height&quot;</span>&gt;</span>match_parent<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:layout_weight&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:textSize&quot;</span>&gt;</span>24sp<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:gravity&quot;</span>&gt;</span>center<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:layout_marginTop&quot;</span>&gt;</span>10dp<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:layout_marginBottom&quot;</span>&gt;</span>10dp<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:button&quot;</span>&gt;</span>@null<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>在drawble目录下创建并分别编写人物，动物，植物点击变化的图标，文字变化的xml文件，这里只给出一个样例。</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">selector</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:state_checked</span>=<span class="string">&quot;true&quot;</span> <span class="attr">android:drawable</span>=<span class="string">&quot;@mipmap/plant2&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:state_checked</span>=<span class="string">&quot;false&quot;</span> <span class="attr">android:drawable</span>=<span class="string">&quot;@mipmap/plant&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">selector</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>Button样例的修改，必须修改themes.xml文件里的parent属性才能显示自定义效果</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;style name=&quot;Theme.DialogTestApplication&quot; parent=&quot;Theme.AppCompat.DayNight.DarkActionBar&quot;&gt;</span><br></pre></td></tr></table></figure><h3 id="Fragment布局"><a href="#Fragment布局" class="headerlink" title="Fragment布局"></a>Fragment布局</h3><ul><li>新建三个fragment文件(PersonFragment,PlantFragment,AnimalFragment)后，先对其对应xml文件进行设计</li></ul><p><img src="/posts/e897d3717c7c/image-20220406094202201.png" alt="image-20220406094202201"></p><ul><li>三个fragment布局基本相同，这里给出一个样例。</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">FrameLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.fragment.PersonFragment&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">RelativeLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/fl_btn_person&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;15dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginEnd</span>=<span class="string">&quot;15dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;@drawable/button_bg&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:paddingVertical</span>=<span class="string">&quot;25dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;Click我，传data给Activity&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textAllCaps</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;24sp&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_below</span>=<span class="string">&quot;@id/fl_btn_person&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/fl_image&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="Activtity和Fragment交互"><a href="#Activtity和Fragment交互" class="headerlink" title="Activtity和Fragment交互"></a>Activtity和Fragment交互</h3><ul><li><p>这里为了更好理解Activity和Fragment传值的方式，我先在Activity中把值传到Fragment中</p></li><li><p>然后再把Fragment中获得的值通过回调接口传回Activity中，最后在textview中显示出来</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.fragmnettestapplication;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"><span class="keyword">import</span> androidx.fragment.app.Fragment;</span><br><span class="line"><span class="keyword">import</span> androidx.fragment.app.FragmentManager;</span><br><span class="line"><span class="keyword">import</span> androidx.fragment.app.FragmentTransaction;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.widget.RadioGroup;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gallifrey.fragmnettestapplication.fragment.AnimalFragment;</span><br><span class="line"><span class="keyword">import</span> com.gallifrey.fragmnettestapplication.fragment.PersonFragment;</span><br><span class="line"><span class="keyword">import</span> com.gallifrey.fragmnettestapplication.fragment.PlantFragment;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title class_">PersonFragment</span>.PersonCallBack, PlantFragment.PlantCallBack, AnimalFragment.AnimalCallBack &#123;</span><br><span class="line">    <span class="keyword">private</span> FragmentManager fragmentManager;</span><br><span class="line">    <span class="keyword">private</span> FragmentTransaction fragmentTransaction;</span><br><span class="line">    <span class="keyword">private</span> RadioGroup mRg;</span><br><span class="line">    <span class="keyword">private</span> LinkedList&lt;Fragment&gt; linkedList;</span><br><span class="line">    <span class="keyword">private</span> PersonFragment personFragment;</span><br><span class="line">    <span class="keyword">private</span> PlantFragment plantFragment;</span><br><span class="line">    <span class="keyword">private</span> AnimalFragment animalFragment;</span><br><span class="line">    <span class="keyword">private</span> TextView textView;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">        linkedList=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        textView=findViewById(R.id.textview);</span><br><span class="line">        mRg=findViewById(R.id.radiogroup);</span><br><span class="line">        fragmentManager=getSupportFragmentManager();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">/**这里为了更好理解Activity和Fragment传值的方式</span></span><br><span class="line"><span class="comment">         * 我先在Activity中把值传到Fragment中</span></span><br><span class="line"><span class="comment">         * 然后再把Fragment中获得的值通过回调接口传回Activity中</span></span><br><span class="line"><span class="comment">         * 最会在textview中显示出来</span></span><br><span class="line"><span class="comment">         * */</span></span><br><span class="line">        mRg.setOnCheckedChangeListener(<span class="keyword">new</span> <span class="title class_">RadioGroup</span>.OnCheckedChangeListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCheckedChanged</span><span class="params">(RadioGroup radioGroup, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">                <span class="keyword">switch</span> (i)&#123;</span><br><span class="line">                    <span class="keyword">case</span> R.id.rg_person:</span><br><span class="line">                        <span class="keyword">if</span>(personFragment==<span class="literal">null</span>)&#123;</span><br><span class="line">                            personFragment=PersonFragment.newInstance(<span class="string">&quot;person from fragment&quot;</span>);<span class="comment">//创建对象，传参</span></span><br><span class="line">                            linkedList.add(personFragment);<span class="comment">//加入列表</span></span><br><span class="line">                            hideOtherFragment(personFragment,<span class="literal">true</span>);<span class="comment">//第一次加入，添加到activity</span></span><br><span class="line">                        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                            hideOtherFragment(personFragment,<span class="literal">false</span>);<span class="comment">//直接隐藏</span></span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> R.id.rg_plant:</span><br><span class="line">                        <span class="keyword">if</span>(plantFragment==<span class="literal">null</span>)&#123;</span><br><span class="line">                            plantFragment=PlantFragment.newInstance(<span class="string">&quot;plant from fragment&quot;</span>);<span class="comment">//创建对象，传参</span></span><br><span class="line">                            linkedList.add(plantFragment);<span class="comment">//加入列表</span></span><br><span class="line">                            hideOtherFragment(plantFragment,<span class="literal">true</span>);<span class="comment">//第一次加入，添加到activity</span></span><br><span class="line">                        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                            hideOtherFragment(plantFragment,<span class="literal">false</span>);<span class="comment">//直接隐藏</span></span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> R.id.rg_animal:</span><br><span class="line">                        <span class="keyword">if</span>(animalFragment==<span class="literal">null</span>)&#123;</span><br><span class="line">                            animalFragment=AnimalFragment.newInstance(<span class="string">&quot;animal from fragment&quot;</span>);<span class="comment">//创建对象，传参</span></span><br><span class="line"></span><br><span class="line">                            linkedList.add(animalFragment);<span class="comment">//加入列表</span></span><br><span class="line">                            hideOtherFragment(animalFragment,<span class="literal">true</span>);<span class="comment">//第一次加入，添加到activity</span></span><br><span class="line">                        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                            hideOtherFragment(animalFragment,<span class="literal">false</span>);<span class="comment">//直接隐藏</span></span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//隐藏其他fragment</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">hideOtherFragment</span><span class="params">(Fragment currentFragment, <span class="type">boolean</span> b)</span>&#123;</span><br><span class="line">        fragmentTransaction=fragmentManager.beginTransaction();<span class="comment">//创建事务</span></span><br><span class="line">        <span class="keyword">if</span>(b) &#123;</span><br><span class="line">            fragmentTransaction.add(R.id.fl_container, currentFragment);<span class="comment">//如果从未加入，则将当前Fragment添加到activity</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//遍历列表</span></span><br><span class="line">        <span class="keyword">for</span>(Fragment tempFragment:linkedList)&#123;</span><br><span class="line">            <span class="comment">//如果选中，则显示;否则则隐藏</span></span><br><span class="line">            <span class="keyword">if</span>(tempFragment.equals(currentFragment))&#123;</span><br><span class="line">                fragmentTransaction.show(tempFragment);</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                fragmentTransaction.hide(tempFragment);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//提交事务</span></span><br><span class="line">        fragmentTransaction.commitAllowingStateLoss();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//同回调接口使得activity的textview获得数据</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setData</span><span class="params">(String str)</span> &#123;</span><br><span class="line">        textView.setText(str);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>三个Fragment的写法是一样的，这里给出一个样例</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.fragmnettestapplication.fragment;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line"><span class="keyword">import</span> android.widget.Button;</span><br><span class="line"><span class="keyword">import</span> android.widget.ImageView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.annotation.NonNull;</span><br><span class="line"><span class="keyword">import</span> androidx.fragment.app.Fragment;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gallifrey.fragmnettestapplication.R;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AnimalFragment</span> <span class="keyword">extends</span> <span class="title class_">Fragment</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> ImageView imageView;</span><br><span class="line">    <span class="keyword">private</span> Button button;</span><br><span class="line">    <span class="keyword">private</span> AnimalCallBack animalCallBack;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//让回调接口初始化</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onAttach</span><span class="params">(<span class="meta">@NonNull</span> Context context)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onAttach(context);</span><br><span class="line">        animalCallBack=(AnimalCallBack) context;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//这里只要一个String作为键值对,之后通过回调接口传参数给Activity就可以了</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">ARG_PARAM1</span> <span class="operator">=</span> <span class="string">&quot;param1&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> String mParam1;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">AnimalFragment</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// Required empty public constructor</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> AnimalFragment <span class="title function_">newInstance</span><span class="params">(String param1)</span> &#123;</span><br><span class="line">        <span class="type">AnimalFragment</span> <span class="variable">fragment</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnimalFragment</span>();</span><br><span class="line">        <span class="type">Bundle</span> <span class="variable">args</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Bundle</span>();</span><br><span class="line">        args.putString(ARG_PARAM1, param1);</span><br><span class="line">        fragment.setArguments(args);</span><br><span class="line">        <span class="keyword">return</span> fragment;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        <span class="keyword">if</span> (getArguments() != <span class="literal">null</span>) &#123;</span><br><span class="line">            mParam1 = getArguments().getString(ARG_PARAM1);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> View <span class="title function_">onCreateView</span><span class="params">(LayoutInflater inflater, ViewGroup container,</span></span><br><span class="line"><span class="params">                             Bundle savedInstanceState)</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//这里返回一个view</span></span><br><span class="line">         View view=inflater.inflate(R.layout.fragment_animal, container, <span class="literal">false</span>);</span><br><span class="line">        <span class="comment">//在这里加入监听</span></span><br><span class="line">        imageView=view.findViewById(R.id.fl_image);</span><br><span class="line">        imageView.setImageResource(R.drawable.laohu);</span><br><span class="line"></span><br><span class="line">        button=view.findViewById(R.id.fl_btn_animal);</span><br><span class="line">        button.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">                <span class="comment">//这用一个回调接口的方法回调回来</span></span><br><span class="line">                animalCallBack.setData(mParam1);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> view;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//定义一个回调接口</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AnimalCallBack</span>&#123;</span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">setData</span><span class="params">(String str)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="最终效果"><a href="#最终效果" class="headerlink" title="最终效果"></a>最终效果</h3><p><img src="/posts/e897d3717c7c/image-20220406095144589.png" alt="image-20220406095144589"></p><p><img src="/posts/e897d3717c7c/image-20220406095337844.png" alt="image-20220406095337844"></p><p><img src="/posts/e897d3717c7c/image-20220406095219675.png" alt="image-20220406095219675"></p><p><img src="/posts/e897d3717c7c/image-20220406095248132.png" alt="image-20220406095248132"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;需求分析&quot;&gt;&lt;a href=&quot;#需求分析&quot; class=&quot;headerlink&quot; title=&quot;需求分析&quot;&gt;&lt;/a&gt;需求分析&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;在Activity中显示如下效果 &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;/posts/e897d37</summary>
      
    
    
    
    <category term="Android学习笔记" scheme="https://gallifrey.asia/categories/Android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    <category term="实战练习" scheme="https://gallifrey.asia/categories/Android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%AE%9E%E6%88%98%E7%BB%83%E4%B9%A0/"/>
    
    
    <category term="Android" scheme="https://gallifrey.asia/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>Android_4.3AdapterView与Adapter</title>
    <link href="https://gallifrey.asia/posts/8925808c2fe0/"/>
    <id>https://gallifrey.asia/posts/8925808c2fe0/</id>
    <published>2022-04-05T11:43:01.000Z</published>
    <updated>2022-04-05T11:43:01.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><ul><li>本文是根据上海应用技术大学余艳芳老师的移动应用课程写的上课笔记。</li><li>部分素材和代码没有给出（例如drawable中的文件代码），请读者自己补全或者删除，或者可以到本人github下载完整素材和代码。</li><li>完整的项目在本人的GitHub仓库中，以下是相关链接：<a href="https://github.com/ufovsmba/TodayApplication">https://github.com/ufovsmba/TodayApplication</a></li></ul><h1 id="AdapterView与Adapter"><a href="#AdapterView与Adapter" class="headerlink" title="AdapterView与Adapter"></a>AdapterView与Adapter</h1><ul><li>AdapterView实现过程类似于MVC架构</li></ul><p><img src="/posts/8925808c2fe0/image-20220405203208912.png" alt="image-20220405203208912"></p><ul><li>AdapterView实现过程</li></ul><ol><li>控制层： Adapter适配器承担了控制层的角色</li><li>视图层： AdapterView将前端显示和后端数据分离</li><li>模型层： 数组、XML文件、List（ArrayList，LinkList）等形式的数据</li></ol><h3 id="AdapterView组件"><a href="#AdapterView组件" class="headerlink" title="AdapterView组件"></a>AdapterView组件</h3><ul><li><p>AdapterView特征</p><ul><li><p>AdapterView继承了ViewGroup，其本质上是容器</p></li><li><p>AdapterView可以包括多个“列表项”，并将“列表项”以合适的形式显示出来</p></li><li><p>AdapterView所显示的“列表项”是由Adapter提供，通过AdapterView的setAdapter()方法来设置Adapter适配器</p></li></ul></li><li><p>AdapterView及其子类的继承关系</p></li></ul><p><img src="/posts/8925808c2fe0/image-20220405204201334.png" alt="image-20220405204201334"></p><p>ps:通常将ListView、GridView、Spinner和Gallery等AdapterView子类作为容器，然后使用Adapter为容器提供“列表项”，AdapterView负责采用合适的方式显示这些列表项。</p><ul><li><p>Adapter的常用子接口</p><ul><li><p>ListAdapter接口</p></li><li><p>SimpleAdapter类</p></li><li><p>SimpleCursorAdapter类</p></li><li><p><strong>ArrayAdapter类</strong></p></li><li><p><strong>BaseAdapter抽象类</strong></p></li></ul></li></ul><h1 id="ListView"><a href="#ListView" class="headerlink" title="ListView"></a>ListView</h1><h3 id="ListView列表视图"><a href="#ListView列表视图" class="headerlink" title="ListView列表视图"></a>ListView列表视图</h3><ul><li>ListView通常具有两个职责：<ul><li>将数据填充到布局，以列表的方式来显示数据</li><li>处理用户的选择、点击等操作Adapter类</li></ul></li><li><p>通常创建ListView有以下两种方式： </p><ul><li>直接使用ListView进行创建</li><li>使用Activity继承ListActivity，实现ListView对象的获取</li></ul></li><li><p>ListView的独有属性</p></li></ul><div class="table-container"><table><thead><tr><th>XML属性</th><th><strong>功能描述</strong></th></tr></thead><tbody><tr><td>android:divider</td><td>设置列表的分隔条</td></tr><tr><td>android:dividerHeight</td><td>用来指定分隔条的高度</td></tr><tr><td>android:entries</td><td>指定一个数组资源</td></tr><tr><td>android:footerDividersEnabled</td><td>各个footer之间绘制分隔条</td></tr><tr><td>android:headerDividersEnabled</td><td>各个header之间绘制分隔条</td></tr></tbody></table></div><ul><li>ListView从AbsListView中继承的属性</li></ul><div class="table-container"><table><thead><tr><th>XML属性</th><th><strong>功能描述</strong></th></tr></thead><tbody><tr><td>android:cacheColorHint</td><td>用于设置该列表的背景始终以单一、固定的颜色绘制</td></tr><tr><td>android:choiceMode</td><td>为视图指定选择的行为</td></tr><tr><td>android:drawSelectorOnTop</td><td>如果为true，选中的列表项将会显示在上面</td></tr><tr><td>android:fastScrollEnabled</td><td>用于设置是否允许使用快速滚动滑块</td></tr><tr><td>android:listSelector</td><td>设置选中项显示的可绘制对象</td></tr><tr><td>android:scrollingCache</td><td>设置在滚动时是否使用绘制缓存，默认为true。</td></tr><tr><td>android:smoothScrollbar</td><td>列表会使用更精确的基于条目在屏幕上的可见像素高度的计算方法</td></tr><tr><td>android:stackFromBottom</td><td>设置是否将列表项从底部开始显示</td></tr><tr><td>android:textFilterEnabled</td><td>设置是否对列表项进行过滤</td></tr><tr><td>android:transcriptMode</td><td>设置该组件的滚动模式</td></tr></tbody></table></div><h3 id="使用ListView步骤"><a href="#使用ListView步骤" class="headerlink" title="使用ListView步骤"></a>使用ListView步骤</h3><ol><li>准备ListView所要显示的数据</li><li>使用数组或List集合存储数据</li><li>创建适配器（Adapter），作为列表项数据源</li><li>将适配器对象（Adapter）添加到ListView，并进行展示</li></ol><ul><li><p>自定义的ListView</p><p>ListView组件id为用户自定义字段</p></li></ul><h3 id="复杂ListView的使用"><a href="#复杂ListView的使用" class="headerlink" title="复杂ListView的使用"></a>复杂ListView的使用</h3><ul><li>实现图文混排步骤：<ul><li>定义行选项的布局格式</li><li>自定义一个Adapter，并重写其中的关键方法</li><li>注册列表选项的单击事件</li><li>创建Activity并加载对应的布局文件</li></ul></li></ul><h1 id="ArrayAdapter"><a href="#ArrayAdapter" class="headerlink" title="ArrayAdapter"></a>ArrayAdapter</h1><h3 id="用ArrayAdapter实现ListView步骤"><a href="#用ArrayAdapter实现ListView步骤" class="headerlink" title="用ArrayAdapter实现ListView步骤"></a>用ArrayAdapter实现ListView步骤</h3><ul><li>步骤其实和使用ListView是一样的，这里简写成三步</li></ul><ol><li>准备ListView所要显示的数据</li><li>将数据和适配器（Adapter）相关联</li><li>将适配器对象（Adapter）添加到ListView，并进行展示</li></ol><h3 id="测试样例代码"><a href="#测试样例代码" class="headerlink" title="测试样例代码"></a>测试样例代码</h3><p><img src="/posts/8925808c2fe0/image-20220405222105584.png" alt="image-20220405222105584"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.todayapplication.listview;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.AdapterView;</span><br><span class="line"><span class="keyword">import</span> android.widget.ArrayAdapter;</span><br><span class="line"><span class="keyword">import</span> android.widget.ListView;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gallifrey.todayapplication.R;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ListViewActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> ListView mlv;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_list_view);</span><br><span class="line"></span><br><span class="line">        mlv=findViewById(R.id.lv1);</span><br><span class="line"><span class="comment">//        ArrayAdapter创建方式一</span></span><br><span class="line"><span class="comment">//        ArrayAdapter&lt;CharSequence&gt; adapter=ArrayAdapter.createFromResource(this,R.array.car, android.R.layout.simple_expandable_list_item_1);</span></span><br><span class="line"><span class="comment">//        mlv.setAdapter(adapter);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        ArrayAdapter创建方式二</span></span><br><span class="line">        List&lt;String&gt; datalist=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        datalist.add(<span class="string">&quot;大众&quot;</span>);</span><br><span class="line">        datalist.add(<span class="string">&quot;丰田&quot;</span>);</span><br><span class="line">        datalist.add(<span class="string">&quot;福特&quot;</span>);</span><br><span class="line">        datalist.add(<span class="string">&quot;比亚迪&quot;</span>);</span><br><span class="line">        datalist.add(<span class="string">&quot;哈弗&quot;</span>);</span><br><span class="line"><span class="comment">//        ArrayAdapter adapter=new ArrayAdapter(this, android.R.layout.simple_list_item_1,datalist);</span></span><br><span class="line">        ArrayAdapter adapter=<span class="keyword">new</span> <span class="title class_">ArrayAdapter</span>(<span class="built_in">this</span>, android.R.layout.simple_list_item_single_choice,datalist);</span><br><span class="line">        mlv.setAdapter(adapter);</span><br><span class="line">        mlv.addHeaderView(LayoutInflater.from(<span class="built_in">this</span>).inflate(R.layout.viewhead,<span class="literal">null</span>));</span><br><span class="line">        mlv.addFooterView(LayoutInflater.from(<span class="built_in">this</span>).inflate(R.layout.viewfoot,<span class="literal">null</span>));</span><br><span class="line"></span><br><span class="line">        mlv.setOnItemClickListener(<span class="keyword">new</span> <span class="title class_">AdapterView</span>.OnItemClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onItemClick</span><span class="params">(AdapterView&lt;?&gt; adapterView, View view, <span class="type">int</span> i, <span class="type">long</span> l)</span> &#123;</span><br><span class="line">                Toast.makeText(ListViewActivity.<span class="built_in">this</span>,i+<span class="string">&quot; Clicked&quot;</span>,Toast.LENGTH_LONG).show();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:padding</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.listview.ListViewActivity&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ListView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/lv1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:divider</span>=<span class="string">&quot;@color/purple_200&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:dividerHeight</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:listSelector</span>=<span class="string">&quot;@drawable/listseletor&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:stackFromBottom</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:choiceMode</span>=<span class="string">&quot;multipleChoice&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">tools:layout_editor_absoluteX</span>=<span class="string">&quot;16dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">tools:layout_editor_absoluteY</span>=<span class="string">&quot;-68dp&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--android:entries=&quot;@array/car&quot;  设置静态数组--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>viewfoot.xml</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;100dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;@drawable/school&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>viewhead.xml</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;48dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;表头&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;26sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;#FF5722&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textStyle</span>=<span class="string">&quot;bold&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;@color/white&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>假如使用静态加载数组/链表 ，可以在value目录下创建资源文件，以下以arrays.xml为例</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string-array</span> <span class="attr">name</span>=<span class="string">&quot;car&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span>&gt;</span>别克<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span>&gt;</span>宝马<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span>&gt;</span>奥迪<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span>&gt;</span>奔驰<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span>&gt;</span>保时捷<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span>&gt;</span>凯迪拉克<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span>&gt;</span>劳斯莱斯<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span>&gt;</span>法拉利<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span>&gt;</span>宾利<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">string-array</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="BaseAdapter"><a href="#BaseAdapter" class="headerlink" title="BaseAdapter"></a>BaseAdapter</h1><h3 id="用baseAdapter实现图文混排步骤"><a href="#用baseAdapter实现图文混排步骤" class="headerlink" title="用baseAdapter实现图文混排步骤"></a>用baseAdapter实现图文混排步骤</h3><ul><li>定义行选项的布局格式</li><li>自定义一个Adapter，并重写其中的关键方法（四个方法，其中getCout(),getView()是重点）</li><li>注册列表选项的单击事件</li><li>创建Activity并加载对应的布局文件</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps：Layout下的&lt;android:descendantFocusability=&quot;blocksDescendants&quot; &gt;可以设置不抢占焦点</span><br></pre></td></tr></table></figure><h3 id="测试样例代码-1"><a href="#测试样例代码-1" class="headerlink" title="测试样例代码"></a>测试样例代码</h3><p><img src="/posts/8925808c2fe0/image-20220406023111627.png" alt="效果图"></p><p><img src="/posts/8925808c2fe0/image-20220406023246749.png" alt="新增（绿）与修改（蓝）的文件"></p><ul><li>Flower实体类</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.todayapplication.listview;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Flower</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> imageId;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String content;</span><br><span class="line">    <span class="keyword">private</span>  Boolean checkStatus;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Flower</span><span class="params">(<span class="type">int</span> imageId,String name,String content)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.imageId=imageId;</span><br><span class="line">        <span class="built_in">this</span>.name=name;</span><br><span class="line">        <span class="built_in">this</span>.content=content;</span><br><span class="line">        checkStatus=<span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getImageId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> imageId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setImageId</span><span class="params">(<span class="type">int</span> imageId)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.imageId = imageId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getContent</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> content;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setContent</span><span class="params">(String content)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.content = content;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">getCheckStatus</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> checkStatus;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCheckStatus</span><span class="params">(Boolean checkStatus)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.checkStatus=checkStatus;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>FolwerAdapter类和对应xml布局文件（继承自BaseAadpter类）</li><li>对getView()方法进行了优化，详情请看代码</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.todayapplication.listview;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.util.Log;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line"><span class="keyword">import</span> android.widget.BaseAdapter;</span><br><span class="line"><span class="keyword">import</span> android.widget.CheckBox;</span><br><span class="line"><span class="keyword">import</span> android.widget.CompoundButton;</span><br><span class="line"><span class="keyword">import</span> android.widget.ImageView;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gallifrey.todayapplication.R;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.nio.channels.ClosedByInterruptException;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FlowerAdapter</span> <span class="keyword">extends</span> <span class="title class_">BaseAdapter</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> LinkedList&lt;Flower&gt; mDatalist;</span><br><span class="line">    <span class="keyword">private</span> Context mContext;</span><br><span class="line">    <span class="keyword">private</span>  <span class="type">int</span> count=<span class="number">0</span>;<span class="comment">//添加一个计数器看看，优化后view的创建次数</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">FlowerAdapter</span><span class="params">(LinkedList&lt;Flower&gt; datalist, Context context)</span>&#123;</span><br><span class="line">        mDatalist=datalist;</span><br><span class="line">        mContext=context;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> mDatalist.size();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getItem</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> mDatalist.get(i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">getItemId</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *这是优化前的代码，可重用性低，view不断新建，组件也不断查找</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">        public View getView(int i, View view, ViewGroup viewGroup) &#123;</span></span><br><span class="line"><span class="comment">            view = LayoutInflater.from(mContext).inflate(R.layout.listitem, viewGroup, false);</span></span><br><span class="line"><span class="comment">            ImageView item_iv=view.findViewById(R.id.item_iv);</span></span><br><span class="line"><span class="comment">            TextView item_name=view.findViewById(R.id.item_name);</span></span><br><span class="line"><span class="comment">            TextView item_content=view.findViewById(R.id.item_content);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            item_iv.setImageResource(mDatalist.get(i).getImageId());</span></span><br><span class="line"><span class="comment">            item_name.setText(mDatalist.get(i).getName());</span></span><br><span class="line"><span class="comment">            item_content.setText(mDatalist.get(i).getContent());</span></span><br><span class="line"><span class="comment">            return view;</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    **/</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> View <span class="title function_">getView</span><span class="params">(<span class="type">int</span> i, View view, ViewGroup viewGroup)</span> &#123;</span><br><span class="line">        ViewHolder viewHolder=<span class="literal">null</span>;</span><br><span class="line">        <span class="comment">//优化,为空才构造view;那样只有创建第一页能显示的花的view，之后的直接重用好了</span></span><br><span class="line">        <span class="comment">//实际测试效果是创建了7个view</span></span><br><span class="line">        <span class="keyword">if</span>(view==<span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">//动态构造</span></span><br><span class="line">            view = LayoutInflater.from(mContext).inflate(R.layout.listitem, viewGroup, <span class="literal">false</span>);</span><br><span class="line">            viewHolder=<span class="keyword">new</span> <span class="title class_">ViewHolder</span>();</span><br><span class="line"></span><br><span class="line">            viewHolder.item_iv=view.findViewById(R.id.item_iv);</span><br><span class="line">            viewHolder.item_name=view.findViewById(R.id.item_name);</span><br><span class="line">            viewHolder.item_content=view.findViewById(R.id.item_content);</span><br><span class="line">            viewHolder.item_check=view.findViewById(R.id.item_check);</span><br><span class="line">            view.setTag(viewHolder);<span class="comment">//用view记录数据，不用重复查找</span></span><br><span class="line">            count++;<span class="comment">//view的创建数+1</span></span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            viewHolder=(ViewHolder)view.getTag();<span class="comment">//重新赋值</span></span><br><span class="line">        &#125;</span><br><span class="line">        Log.i(<span class="string">&quot;Flower&quot;</span>, <span class="string">&quot;getView: 测试一下优化效果 &quot;</span>+count);</span><br><span class="line">        <span class="comment">//记录一下位置</span></span><br><span class="line">        viewHolder.item_check.setTag(i);</span><br><span class="line">        viewHolder.item_check.setOnCheckedChangeListener(<span class="keyword">new</span> <span class="title class_">CompoundButton</span>.OnCheckedChangeListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCheckedChanged</span><span class="params">(CompoundButton compoundButton, <span class="type">boolean</span> b)</span> &#123;</span><br><span class="line">                <span class="comment">//重新获取位置并设置状态</span></span><br><span class="line">                <span class="type">int</span> index=(<span class="type">int</span>)compoundButton.getTag();</span><br><span class="line">                mDatalist.get(index).setCheckStatus(b);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">//重新设置</span></span><br><span class="line">        viewHolder.item_check.setChecked(mDatalist.get(i).getCheckStatus());</span><br><span class="line">        viewHolder.item_iv.setImageResource(mDatalist.get(i).getImageId());</span><br><span class="line">        viewHolder.item_name.setText(mDatalist.get(i).getName());</span><br><span class="line">        viewHolder.item_content.setText(mDatalist.get(i).getContent());</span><br><span class="line">        <span class="keyword">return</span> view;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//优化,添加一个静态类记录数据,增加重用性</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">ViewHolder</span>&#123;</span><br><span class="line">        ImageView item_iv;</span><br><span class="line">        TextView item_name;</span><br><span class="line">        TextView item_content;</span><br><span class="line">        CheckBox item_check;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//添加点击删除功能</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(<span class="type">int</span> position)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(mDatalist!=<span class="literal">null</span>)&#123;</span><br><span class="line">            mDatalist.remove(position);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//更新变化的信息</span></span><br><span class="line">        notifyDataSetChanged();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">RelativeLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:descendantFocusability</span>=<span class="string">&quot;blocksDescendants&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:paddingHorizontal</span>=<span class="string">&quot;10dp&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">CheckBox</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;100dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;center_vertical&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:button</span>=<span class="string">&quot;@drawable/checkbox_bg_round&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:buttonTint</span>=<span class="string">&quot;@drawable/checkbox_color_round&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/item_check&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/item_iv&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;100dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;100dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;15dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_toEndOf</span>=<span class="string">&quot;@id/item_check&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:scaleType</span>=<span class="string">&quot;centerCrop&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;15dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/item_name&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_toEndOf</span>=<span class="string">&quot;@id/item_iv&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;15dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;26sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textStyle</span>=<span class="string">&quot;bold&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/item_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_below</span>=<span class="string">&quot;@id/item_name&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;15dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_alignStart</span>=<span class="string">&quot;@id/item_name&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;26sp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>在ListView中添加FlowerAdapter</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.todayapplication.listview;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.AdapterView;</span><br><span class="line"><span class="keyword">import</span> android.widget.ArrayAdapter;</span><br><span class="line"><span class="keyword">import</span> android.widget.ListView;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gallifrey.todayapplication.R;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ListViewActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> ListView mlv;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Flower&gt; flowerList;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_list_view);</span><br><span class="line"></span><br><span class="line">        mlv=findViewById(R.id.lv1);</span><br><span class="line"></span><br><span class="line">        initFlower();</span><br><span class="line">        FlowerAdapter flowerAdapter=<span class="keyword">new</span> <span class="title class_">FlowerAdapter</span>((LinkedList&lt;Flower&gt;) flowerList,<span class="built_in">this</span>);</span><br><span class="line">        mlv.setAdapter(flowerAdapter);</span><br><span class="line">        mlv.setOnItemClickListener(<span class="keyword">new</span> <span class="title class_">AdapterView</span>.OnItemClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onItemClick</span><span class="params">(AdapterView&lt;?&gt; adapterView, View view, <span class="type">int</span> i, <span class="type">long</span> l)</span> &#123;</span><br><span class="line">                flowerAdapter.remove(i);</span><br><span class="line">                Toast.makeText(ListViewActivity.<span class="built_in">this</span>,i+<span class="string">&quot; Clicked&quot;</span>,Toast.LENGTH_LONG).show();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initFlower</span><span class="params">()</span> &#123;</span><br><span class="line">        flowerList=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        flowerList.add(<span class="keyword">new</span> <span class="title class_">Flower</span>(R.drawable.baihe,<span class="string">&quot;百合&quot;</span>,<span class="string">&quot;百年好合&quot;</span>));</span><br><span class="line">        flowerList.add(<span class="keyword">new</span> <span class="title class_">Flower</span>(R.drawable.rose,<span class="string">&quot;红玫瑰&quot;</span>,<span class="string">&quot;富有热情&quot;</span>));</span><br><span class="line">        flowerList.add(<span class="keyword">new</span> <span class="title class_">Flower</span>(R.drawable.yinghua,<span class="string">&quot;樱花&quot;</span>,<span class="string">&quot;幸福永远&quot;</span>));</span><br><span class="line">        flowerList.add(<span class="keyword">new</span> <span class="title class_">Flower</span>(R.drawable.sunflower,<span class="string">&quot;向日葵&quot;</span>,<span class="string">&quot;光辉忠诚&quot;</span>));</span><br><span class="line">        flowerList.add(<span class="keyword">new</span> <span class="title class_">Flower</span>(R.drawable.ziluolan,<span class="string">&quot;紫罗兰&quot;</span>,<span class="string">&quot;永恒的美与爱&quot;</span>));</span><br><span class="line">        flowerList.add(<span class="keyword">new</span> <span class="title class_">Flower</span>(R.drawable.jidanhua,<span class="string">&quot;鸡蛋花&quot;</span>,<span class="string">&quot;孕育希望复活&quot;</span>));</span><br><span class="line"></span><br><span class="line">        flowerList.add(<span class="keyword">new</span> <span class="title class_">Flower</span>(R.drawable.baihe,<span class="string">&quot;百合22&quot;</span>,<span class="string">&quot;百年好合&quot;</span>));</span><br><span class="line">        flowerList.add(<span class="keyword">new</span> <span class="title class_">Flower</span>(R.drawable.rose,<span class="string">&quot;红玫瑰22&quot;</span>,<span class="string">&quot;富有热情&quot;</span>));</span><br><span class="line">        flowerList.add(<span class="keyword">new</span> <span class="title class_">Flower</span>(R.drawable.yinghua,<span class="string">&quot;樱花22&quot;</span>,<span class="string">&quot;幸福永远&quot;</span>));</span><br><span class="line">        flowerList.add(<span class="keyword">new</span> <span class="title class_">Flower</span>(R.drawable.sunflower,<span class="string">&quot;向日葵22&quot;</span>,<span class="string">&quot;光辉忠诚&quot;</span>));</span><br><span class="line">        flowerList.add(<span class="keyword">new</span> <span class="title class_">Flower</span>(R.drawable.ziluolan,<span class="string">&quot;紫罗兰22&quot;</span>,<span class="string">&quot;永恒的美与爱&quot;</span>));</span><br><span class="line">        flowerList.add(<span class="keyword">new</span> <span class="title class_">Flower</span>(R.drawable.jidanhua,<span class="string">&quot;鸡蛋花22&quot;</span>,<span class="string">&quot;孕育希望复活&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ListView多布局"><a href="#ListView多布局" class="headerlink" title="ListView多布局"></a>ListView多布局</h1><ul><li>实现多布局步骤：<ol><li>定义行选项的布局格式</li><li>自定义一个Adapter，并重写其中的关键方法</li><li>为ListView设置适配器</li></ol></li></ul><h3 id="测试样例代码-2"><a href="#测试样例代码-2" class="headerlink" title="测试样例代码"></a>测试样例代码</h3><div class="tabs" id="listview"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#listview-1">效果预览</button></li><li class="tab"><button type="button" data-href="#listview-2">PersonChat类</button></li><li class="tab"><button type="button" data-href="#listview-3">MultiLayoutAdapter类</button></li><li class="tab"><button type="button" data-href="#listview-4">ListView类</button></li><li class="tab"><button type="button" data-href="#listview-5">listitem_left.xml</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="listview-1"><p><img src="/posts/8925808c2fe0/image-20220425021855874.png" alt="image-20220425021855874"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="listview-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.todayapplication.listview;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PersonChat</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> imageId;</span><br><span class="line">    <span class="keyword">private</span> String words;</span><br><span class="line">    <span class="keyword">private</span> Boolean status;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">PersonChat</span><span class="params">(<span class="type">int</span> imageId,String words,Boolean status)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.imageId=imageId;</span><br><span class="line">        <span class="built_in">this</span>.words=words;</span><br><span class="line">        <span class="built_in">this</span>.status=status;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getImageId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> imageId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setImageId</span><span class="params">(<span class="type">int</span> imageId)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.imageId = imageId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getWords</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> words;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setWords</span><span class="params">(String words)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.words = words;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">getStatus</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> status;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStatus</span><span class="params">(Boolean status)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.status = status;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="listview-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.todayapplication.listview;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line"><span class="keyword">import</span> android.widget.BaseAdapter;</span><br><span class="line"><span class="keyword">import</span> android.widget.ImageView;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gallifrey.todayapplication.R;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MultiLayoutAdapter</span> <span class="keyword">extends</span> <span class="title class_">BaseAdapter</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> TYPE_LEFT=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> TYPE_RIGHT=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">private</span> List&lt;PersonChat&gt; mData;</span><br><span class="line">    <span class="keyword">private</span> Context mContext;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MultiLayoutAdapter</span><span class="params">(List&lt;PersonChat&gt; data,Context context)</span>&#123;</span><br><span class="line">        mData=data;</span><br><span class="line">        mContext=context;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> mData.size();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getItem</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> mData.get(i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">getItemId</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">ViewHolder</span>&#123;</span><br><span class="line">        ImageView imageView;</span><br><span class="line">        TextView textView;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> View <span class="title function_">getView</span><span class="params">(<span class="type">int</span> i, View view, ViewGroup viewGroup)</span> &#123;</span><br><span class="line">        <span class="type">int</span> type=getItemViewType(i);</span><br><span class="line">        ViewHolder viewHolder=<span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">if</span>(view==<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">switch</span> (type)&#123;</span><br><span class="line">                <span class="keyword">case</span> TYPE_LEFT:</span><br><span class="line">                    view= LayoutInflater.from(mContext).inflate(R.layout.listitem_left,viewGroup,<span class="literal">false</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> TYPE_RIGHT:</span><br><span class="line">                    view= LayoutInflater.from(mContext).inflate(R.layout.listitem_right,viewGroup,<span class="literal">false</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            viewHolder =<span class="keyword">new</span> <span class="title class_">ViewHolder</span>();</span><br><span class="line">            viewHolder.imageView=view.findViewById(R.id.item_iv);</span><br><span class="line">            viewHolder.textView=view.findViewById(R.id.item_tv);</span><br><span class="line">            view.setTag(viewHolder);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            viewHolder= (ViewHolder) view.getTag();</span><br><span class="line">        &#125;</span><br><span class="line">        viewHolder.imageView.setImageResource(mData.get(i).getImageId());</span><br><span class="line">        viewHolder.textView.setText(mData.get(i).getWords());</span><br><span class="line">        <span class="keyword">return</span> view;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//行选项布局的数量</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getViewTypeCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//行选项布局的类型</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getItemViewType</span><span class="params">(<span class="type">int</span> position)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(mData.get(position).getStatus())&#123;</span><br><span class="line">            <span class="keyword">return</span> TYPE_RIGHT;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> TYPE_LEFT;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="listview-4"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.todayapplication.listview;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.AdapterView;</span><br><span class="line"><span class="keyword">import</span> android.widget.ArrayAdapter;</span><br><span class="line"><span class="keyword">import</span> android.widget.ListView;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gallifrey.todayapplication.R;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ListViewActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> ListView mlv;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Flower&gt; flowerList;</span><br><span class="line">    <span class="keyword">private</span> List&lt;PersonChat&gt; personChatList;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> TYPE_LEFT=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> TYPE_RIGHT=<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_list_view);</span><br><span class="line"></span><br><span class="line">        mlv=findViewById(R.id.lv1);</span><br><span class="line">        intiPersonChat();</span><br><span class="line">        mlv.setAdapter(<span class="keyword">new</span> <span class="title class_">MultiLayoutAdapter</span>(personChatList,<span class="built_in">this</span>));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">intiPersonChat</span><span class="params">()</span>&#123;</span><br><span class="line">        personChatList=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">20</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">switch</span> ((<span class="type">int</span>)(Math.random()*<span class="number">2</span>))&#123;</span><br><span class="line">                <span class="keyword">case</span> TYPE_LEFT:</span><br><span class="line">                    personChatList.add(<span class="keyword">new</span> <span class="title class_">PersonChat</span>(R.drawable.left_img,<span class="string">&quot;LE&quot;</span>+i,<span class="literal">false</span>));</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> TYPE_RIGHT:</span><br><span class="line">                    personChatList.add(<span class="keyword">new</span> <span class="title class_">PersonChat</span>(R.drawable.right_img,<span class="string">&quot;RE&quot;</span>+i,<span class="literal">true</span>));</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="listview-5"><p>listitem_right布局和listitem_left只有位置上有镜像区别，这里就不重复给出了</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">RelativeLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;64dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;64dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/item_iv&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:scaleType</span>=<span class="string">&quot;centerCrop&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/item_tv&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;158dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;62dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;3dp&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_toEndOf</span>=<span class="string">&quot;@id/item_iv&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;@mipmap/left_dialog&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;26sp&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="GridView"><a href="#GridView" class="headerlink" title="GridView"></a>GridView</h1><h3 id="GridView网格视图"><a href="#GridView网格视图" class="headerlink" title="GridView网格视图"></a>GridView网格视图</h3><ul><li>用于按行和列的分布方式来显示多个组件</li><li>通过Adapter来提供显示数据</li></ul><div class="table-container"><table><thead><tr><th>XML属性</th><th><strong>功能描述</strong></th></tr></thead><tbody><tr><td>android:<strong>numColumns</strong></td><td>设置列数</td></tr><tr><td>android:columnWidth</td><td>设置每一列的宽度</td></tr><tr><td>android:stretchMode</td><td>设置拉伸模式</td></tr><tr><td>android:<strong>verticalSpacing</strong></td><td>设置各个元素之间的垂直边距</td></tr><tr><td>android:<strong>horizontalSpacing</strong></td><td>设置各个元素之间的水平边距</td></tr></tbody></table></div><h3 id="GridView本地数据显示"><a href="#GridView本地数据显示" class="headerlink" title="GridView本地数据显示"></a>GridView本地数据显示</h3><ul><li>创建GridView的步骤：<ol><li>·在布局文件中使用<code>&lt;GridView&gt;</code>元素来定义GridView组件</li><li>自定义一个Adapter，并重写其中的关键方法</li><li>为GridView设置适配器</li></ol></li></ul><h4 id="测试样例代码-3"><a href="#测试样例代码-3" class="headerlink" title="测试样例代码"></a>测试样例代码</h4><div class="tabs" id="gridview_1"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#gridview_1-1">效果预览</button></li><li class="tab"><button type="button" data-href="#gridview_1-2">GirdViewAcitivity类</button></li><li class="tab"><button type="button" data-href="#gridview_1-3">GirdFlowerAdapter类</button></li><li class="tab"><button type="button" data-href="#gridview_1-4">activity_grid_view.xml</button></li><li class="tab"><button type="button" data-href="#gridview_1-5">griditem.xml</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="gridview_1-1"><p><img src="/posts/8925808c2fe0/image-20220425041304228.png" alt="image-20220425041304228"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="gridview_1-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.todayapplication.gridview;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.widget.GridView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gallifrey.todayapplication.R;</span><br><span class="line"><span class="keyword">import</span> com.gallifrey.todayapplication.listview.Flower;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GridViewActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> GridView mGv;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Flower&gt; flowerList;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">GridViewActivity</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_grid_view);</span><br><span class="line"></span><br><span class="line">        mGv=findViewById(R.id.gv);</span><br><span class="line">        initFlower();</span><br><span class="line">        mGv.setAdapter(<span class="keyword">new</span> <span class="title class_">GridFlowerAdapter</span>(flowerList,<span class="built_in">this</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initFlower</span><span class="params">()</span> &#123;</span><br><span class="line">        flowerList=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        flowerList.add(<span class="keyword">new</span> <span class="title class_">Flower</span>(R.drawable.baihe,<span class="string">&quot;百合&quot;</span>,<span class="string">&quot;百年好合&quot;</span>));</span><br><span class="line">        flowerList.add(<span class="keyword">new</span> <span class="title class_">Flower</span>(R.drawable.rose,<span class="string">&quot;红玫瑰&quot;</span>,<span class="string">&quot;富有热情&quot;</span>));</span><br><span class="line">        flowerList.add(<span class="keyword">new</span> <span class="title class_">Flower</span>(R.drawable.yinghua,<span class="string">&quot;樱花&quot;</span>,<span class="string">&quot;幸福永远&quot;</span>));</span><br><span class="line">        flowerList.add(<span class="keyword">new</span> <span class="title class_">Flower</span>(R.drawable.sunflower,<span class="string">&quot;向日葵&quot;</span>,<span class="string">&quot;光辉忠诚&quot;</span>));</span><br><span class="line">        flowerList.add(<span class="keyword">new</span> <span class="title class_">Flower</span>(R.drawable.ziluolan,<span class="string">&quot;紫罗兰&quot;</span>,<span class="string">&quot;永恒的美与爱&quot;</span>));</span><br><span class="line">        flowerList.add(<span class="keyword">new</span> <span class="title class_">Flower</span>(R.drawable.jidanhua,<span class="string">&quot;鸡蛋花&quot;</span>,<span class="string">&quot;孕育希望复活&quot;</span>));</span><br><span class="line"></span><br><span class="line">        flowerList.add(<span class="keyword">new</span> <span class="title class_">Flower</span>(R.drawable.baihe,<span class="string">&quot;百合22&quot;</span>,<span class="string">&quot;百年好合&quot;</span>));</span><br><span class="line">        flowerList.add(<span class="keyword">new</span> <span class="title class_">Flower</span>(R.drawable.rose,<span class="string">&quot;红玫瑰22&quot;</span>,<span class="string">&quot;富有热情&quot;</span>));</span><br><span class="line">        flowerList.add(<span class="keyword">new</span> <span class="title class_">Flower</span>(R.drawable.yinghua,<span class="string">&quot;樱花22&quot;</span>,<span class="string">&quot;幸福永远&quot;</span>));</span><br><span class="line">        flowerList.add(<span class="keyword">new</span> <span class="title class_">Flower</span>(R.drawable.sunflower,<span class="string">&quot;向日葵22&quot;</span>,<span class="string">&quot;光辉忠诚&quot;</span>));</span><br><span class="line">        flowerList.add(<span class="keyword">new</span> <span class="title class_">Flower</span>(R.drawable.ziluolan,<span class="string">&quot;紫罗兰22&quot;</span>,<span class="string">&quot;永恒的美与爱&quot;</span>));</span><br><span class="line">        flowerList.add(<span class="keyword">new</span> <span class="title class_">Flower</span>(R.drawable.jidanhua,<span class="string">&quot;鸡蛋花22&quot;</span>,<span class="string">&quot;孕育希望复活&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="gridview_1-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.todayapplication.gridview;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line"><span class="keyword">import</span> android.widget.BaseAdapter;</span><br><span class="line"><span class="keyword">import</span> android.widget.ImageView;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gallifrey.todayapplication.R;</span><br><span class="line"><span class="keyword">import</span> com.gallifrey.todayapplication.listview.Flower;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GridFlowerAdapter</span> <span class="keyword">extends</span> <span class="title class_">BaseAdapter</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Flower&gt; mData;</span><br><span class="line">    <span class="keyword">private</span> Context mContext;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">GridFlowerAdapter</span><span class="params">(List&lt;Flower&gt; data,Context context)</span>&#123;</span><br><span class="line">        mData=data;</span><br><span class="line">        mContext=context;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> mData.size();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getItem</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> mData.get(i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">getItemId</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> View <span class="title function_">getView</span><span class="params">(<span class="type">int</span> i, View view, ViewGroup viewGroup)</span> &#123;</span><br><span class="line">        ViewHolder viewHolder=<span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (view==<span class="literal">null</span>)&#123;</span><br><span class="line">            view= LayoutInflater.from(mContext).inflate(R.layout.griditem,viewGroup,<span class="literal">false</span>);</span><br><span class="line">            viewHolder=<span class="keyword">new</span> <span class="title class_">ViewHolder</span>();</span><br><span class="line">            viewHolder.imageView=view.findViewById(R.id.gv_iv);</span><br><span class="line">            viewHolder.textView=view.findViewById(R.id.gv_tv);</span><br><span class="line">            view.setTag(viewHolder);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            viewHolder= (ViewHolder) view.getTag();</span><br><span class="line">        &#125;</span><br><span class="line">        viewHolder.imageView.setImageResource(mData.get(i).getImageId());</span><br><span class="line">        viewHolder.textView.setText(mData.get(i).getName());</span><br><span class="line">        <span class="keyword">return</span> view;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">ViewHolder</span>&#123;</span><br><span class="line">        ImageView imageView;</span><br><span class="line">        TextView textView;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="gridview_1-4"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.gridview.GridViewActivity&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">GridView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/gv&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:numColumns</span>=<span class="string">&quot;3&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:horizontalSpacing</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="gridview_1-5"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;200dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/gv_iv&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:src</span>=<span class="string">&quot;@drawable/baihe&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:scaleType</span>=<span class="string">&quot;centerCrop&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintBottom_toTopOf</span>=<span class="string">&quot;@id/gv_tv&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/gv_tv&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;26sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;test&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@id/gv_iv&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">&quot;parent&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div> <h3 id="GridView网络数据显示"><a href="#GridView网络数据显示" class="headerlink" title="GridView网络数据显示"></a>GridView网络数据显示</h3><ul><li><p>使用步骤：</p><ol><li><p>设置网络权限,在AndroidManifest.xml文件中添加<code>&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;</code></p></li><li><p>添加glide依赖，并同步，GitHub链接<a href="https://github.com/bumptech/glide">bumptech/glide</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">  implementation <span class="string">&#x27;com.github.bumptech.glide:glide:4.13.0&#x27;</span></span><br><span class="line">  annotationProcessor <span class="string">&#x27;com.github.bumptech.glide:compiler:4.13.0&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>使用Glide类添加图片</li></ol></li></ul><h4 id="测试样例代码-4"><a href="#测试样例代码-4" class="headerlink" title="测试样例代码"></a>测试样例代码</h4><div class="tabs" id="girdview_2"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#girdview_2-1">效果预览</button></li><li class="tab"><button type="button" data-href="#girdview_2-2">GirdViewAcitivity类</button></li><li class="tab"><button type="button" data-href="#girdview_2-3">GirdFlowerAdapter类</button></li><li class="tab"><button type="button" data-href="#girdview_2-4">activity_grid_view.xml</button></li><li class="tab"><button type="button" data-href="#girdview_2-5">griditem.xml</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="girdview_2-1"><p><img src="/posts/8925808c2fe0/image-20220425050626201.png" alt="image-20220425050626201"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="girdview_2-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.todayapplication.gridview;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.widget.GridView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gallifrey.todayapplication.R;</span><br><span class="line"><span class="keyword">import</span> com.gallifrey.todayapplication.listview.Flower;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GridViewActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> GridView mGv;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Flower&gt; flowerList;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; imgNetList;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">GridViewActivity</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_grid_view);</span><br><span class="line"></span><br><span class="line">        mGv=findViewById(R.id.gv);</span><br><span class="line">        initImageNet();</span><br><span class="line">        mGv.setAdapter(<span class="keyword">new</span> <span class="title class_">GridFlowerAdapter</span>(imgNetList,<span class="built_in">this</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//网络资源的加载</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initImageNet</span><span class="params">()</span> &#123;</span><br><span class="line">        imgNetList=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        imgNetList.add(<span class="string">&quot;https://gallifrey.asia/img/kyueki01.webp&quot;</span>);</span><br><span class="line">        imgNetList.add(<span class="string">&quot;https://gallifrey.asia/img/kyueki02.webp&quot;</span>);</span><br><span class="line">        imgNetList.add(<span class="string">&quot;https://gallifrey.asia/img/kyueki03.webp&quot;</span>);</span><br><span class="line">        imgNetList.add(<span class="string">&quot;https://gallifrey.asia/img/kyueki04.webp&quot;</span>);</span><br><span class="line">        imgNetList.add(<span class="string">&quot;https://gallifrey.asia/img/kyueki05.webp&quot;</span>);</span><br><span class="line">        imgNetList.add(<span class="string">&quot;https://gallifrey.asia/img/kyueki06.webp&quot;</span>);</span><br><span class="line">        imgNetList.add(<span class="string">&quot;https://gallifrey.asia/img/kyueki07.webp&quot;</span>);</span><br><span class="line">        imgNetList.add(<span class="string">&quot;https://gallifrey.asia/img/kyueki08.webp&quot;</span>);</span><br><span class="line">        imgNetList.add(<span class="string">&quot;https://gallifrey.asia/img/kyueki09.webp&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="girdview_2-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.todayapplication.gridview;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line"><span class="keyword">import</span> android.widget.BaseAdapter;</span><br><span class="line"><span class="keyword">import</span> android.widget.ImageView;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.bumptech.glide.Glide;</span><br><span class="line"><span class="keyword">import</span> com.bumptech.glide.load.engine.DiskCacheStrategy;</span><br><span class="line"><span class="keyword">import</span> com.gallifrey.todayapplication.R;</span><br><span class="line"><span class="keyword">import</span> com.gallifrey.todayapplication.listview.Flower;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GridFlowerAdapter</span> <span class="keyword">extends</span> <span class="title class_">BaseAdapter</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; mData;</span><br><span class="line">    <span class="keyword">private</span> Context mContext;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">GridFlowerAdapter</span><span class="params">(List&lt;String&gt; data,Context context)</span>&#123;</span><br><span class="line">        mData=data;</span><br><span class="line">        mContext=context;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> mData.size();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getItem</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> mData.get(i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">getItemId</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> View <span class="title function_">getView</span><span class="params">(<span class="type">int</span> i, View view, ViewGroup viewGroup)</span> &#123;</span><br><span class="line">        ViewHolder viewHolder=<span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (view==<span class="literal">null</span>)&#123;</span><br><span class="line">            view= LayoutInflater.from(mContext).inflate(R.layout.griditem,viewGroup,<span class="literal">false</span>);</span><br><span class="line">            viewHolder=<span class="keyword">new</span> <span class="title class_">ViewHolder</span>();</span><br><span class="line">            viewHolder.imageView=view.findViewById(R.id.gv_iv);</span><br><span class="line">            viewHolder.textView=view.findViewById(R.id.gv_tv);</span><br><span class="line">            view.setTag(viewHolder);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            viewHolder= (ViewHolder) view.getTag();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        Glide.with(mContext)</span><br><span class="line">                .load(mData.get(i))</span><br><span class="line">                .centerCrop()</span><br><span class="line">                .placeholder(R.mipmap.ic_launcher)</span><br><span class="line">                .diskCacheStrategy(DiskCacheStrategy.NONE)</span><br><span class="line">                .into(viewHolder.imageView);</span><br><span class="line">        viewHolder.textView.setText(<span class="string">&quot;图片&quot;</span>+i);</span><br><span class="line">        <span class="keyword">return</span> view;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">ViewHolder</span>&#123;</span><br><span class="line">        ImageView imageView;</span><br><span class="line">        TextView textView;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="girdview_2-4"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.gridview.GridViewActivity&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">GridView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/gv&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:numColumns</span>=<span class="string">&quot;2&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:horizontalSpacing</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="girdview_2-5"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;200dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/gv_iv&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:scaleType</span>=<span class="string">&quot;centerCrop&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintBottom_toTopOf</span>=<span class="string">&quot;@id/gv_tv&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/gv_tv&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;26sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@id/gv_iv&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">&quot;parent&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="RecyclerView"><a href="#RecyclerView" class="headerlink" title="RecyclerView"></a>RecyclerView</h1><ul><li><p>使用：</p><ol><li>设置Adapter</li><li>设置LayoutManager</li></ol></li><li><p>RecyclerView提供了三种布局管理器：</p><ol><li>LinerLayoutManager 以垂直或者水平列表方式展示Item</li><li>GridLayoutManager 以网格方式展示Item</li><li>StaggeredGridLayoutManager 以瀑布流方式展示Item</li></ol></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;本文是根据上海应用技术大学余艳芳老师的移动应用课程写的上课笔记。&lt;/li&gt;
&lt;li&gt;部分素材和代码没有给出（例如drawable</summary>
      
    
    
    
    <category term="Android学习笔记" scheme="https://gallifrey.asia/categories/Android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    <category term="UI进阶" scheme="https://gallifrey.asia/categories/Android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/UI%E8%BF%9B%E9%98%B6/"/>
    
    
    <category term="Android" scheme="https://gallifrey.asia/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>Android_4.2Menu和Toolbar</title>
    <link href="https://gallifrey.asia/posts/b43dacf3ed69/"/>
    <id>https://gallifrey.asia/posts/b43dacf3ed69/</id>
    <published>2022-04-04T11:37:41.000Z</published>
    <updated>2022-04-04T11:37:41.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><ul><li>本文是根据上海应用技术大学余艳芳老师的移动应用课程写的上课笔记。</li><li>部分素材和代码没有给出（例如drawable中的文件代码），请读者自己补全或者删除，或者可以到本人github下载完整素材和代码。</li><li>完整的项目在本人的GitHub仓库中，以下是相关链接：<a href="https://github.com/ufovsmba/TodayApplication">https://github.com/ufovsmba/TodayApplication</a></li></ul><h1 id="Menu"><a href="#Menu" class="headerlink" title="Menu"></a>Menu</h1><ul><li><p>Android中提供的菜单有如下几种：</p><ul><li>选项菜单OptionsMenu</li><li>上下文菜单ContextMenu</li><li>弹出菜单PopupMenu</li></ul></li></ul><h1 id="Options-Menu"><a href="#Options-Menu" class="headerlink" title="Options Menu"></a>Options Menu</h1><h3 id="Options-Menu选项菜单"><a href="#Options-Menu选项菜单" class="headerlink" title="Options Menu选项菜单"></a>Options Menu选项菜单</h3><p><img src="/posts/b43dacf3ed69/image-20220404195941766.png" alt="image-20220404195941766"></p><ul><li>使用onCreateOptionsMenu()回调方法对菜单进行初始化</li><li><p>使用onPrepareOptionsMenu()方法动态改变选项菜单的内容</p></li><li><p>onOptionsItemSelected()方法用于响应菜单项的点击事件</p></li></ul><h3 id="SubMenu子菜单"><a href="#SubMenu子菜单" class="headerlink" title="SubMenu子菜单"></a>SubMenu子菜单</h3><ul><li>创建子菜单的步骤：<ul><li>重写Activity类的onCreateOptionsMenu()方法</li><li>调用Menu的addSubMenu()方法添加子菜单</li><li>调用SubMenu的add()方法为子菜单添加菜单项</li><li>重写Activity类的onOptionsItemSelected ()方法</li></ul></li></ul><h3 id="测试样例代码"><a href="#测试样例代码" class="headerlink" title="测试样例代码"></a>测试样例代码</h3><p><img src="/posts/b43dacf3ed69/image-20220405124922857.png" alt="xml文件添加menu效果图"></p><p><img src="/posts/b43dacf3ed69/image-20220405125319328.png" alt="直接通过Java代码添加menu效果图"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.todayapplication.menu;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.annotation.NonNull;</span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.Menu;</span><br><span class="line"><span class="keyword">import</span> android.view.MenuItem;</span><br><span class="line"><span class="keyword">import</span> android.view.SubMenu;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gallifrey.todayapplication.R;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OptionsMenuActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_options_menu);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onCreateOptionsMenu</span><span class="params">(Menu menu)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//用java代码方式添加菜单</span></span><br><span class="line">        menu.add(<span class="string">&quot;options1&quot;</span>);<span class="comment">//默认groupId:0,order:0</span></span><br><span class="line">        menu.add(<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="string">&quot;options2&quot;</span>);<span class="comment">//四个参数分别为 groupId（分组Id）,itemId（组内itemId）,order（出现顺序）,title</span></span><br><span class="line">        menu.add(<span class="number">0</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="string">&quot;options3&quot;</span>);</span><br><span class="line">        menu.add(<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="string">&quot;options4&quot;</span>);</span><br><span class="line">        menu.add(<span class="number">1</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="string">&quot;options5&quot;</span>);</span><br><span class="line"><span class="comment">//        menu.removeGroup(0); //分组方便管理</span></span><br><span class="line">        SubMenu f=menu.addSubMenu(<span class="string">&quot;sub_options&quot;</span>);</span><br><span class="line">        f.add(<span class="string">&quot;sub1&quot;</span>);</span><br><span class="line">        SubMenu f2=f.addSubMenu(<span class="string">&quot;sub1-2&quot;</span>);</span><br><span class="line">        f2.add(<span class="string">&quot;sub2&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.onCreateOptionsMenu(menu);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onPrepareOptionsMenu</span><span class="params">(Menu menu)</span> &#123;</span><br><span class="line">        <span class="comment">//用xml文件添加菜单,动态添加菜单</span></span><br><span class="line">        menu.clear();<span class="comment">//清楚之前在Java代码中添加的menu的内容，注释这两行代码可以看到Java中设置menu的效果</span></span><br><span class="line">        getMenuInflater().inflate(R.menu.options_menu,menu);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.onPrepareOptionsMenu(menu);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onOptionsItemSelected</span><span class="params">(<span class="meta">@NonNull</span> MenuItem item)</span> &#123;</span><br><span class="line">        String str=<span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">switch</span> (item.getItemId())&#123;</span><br><span class="line">            <span class="keyword">case</span> R.id.menu_open:</span><br><span class="line">                str=<span class="string">&quot;menu_open&quot;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.id.menu_close:</span><br><span class="line">                str=<span class="string">&quot;menu_close&quot;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                str=<span class="string">&quot;NULL&quot;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Toast.makeText(<span class="built_in">this</span>,str+<span class="string">&quot; Click&quot;</span>,Toast.LENGTH_LONG).show();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.onOptionsItemSelected(item);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>在res文件夹下创建menu目录，然后建立options_meu.xml文件</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">menu</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:title</span>=<span class="string">&quot;File&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/file&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:showAsAction</span>=<span class="string">&quot;ifRoom&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">menu</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">&quot;@+id/menu_open&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/open&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:title</span>=<span class="string">&quot;open&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">&quot;@+id/menu_close&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/close&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:title</span>=<span class="string">&quot;close&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/edit&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:title</span>=<span class="string">&quot;Edit&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">menu</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">&quot;@+id/menu_cut&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/cut&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">android:title</span>=<span class="string">&quot;Cut&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">&quot;@+id/menu_copy&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/copy&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">android:title</span>=<span class="string">&quot;Copy&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">menu</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">menu</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">menu</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="ContextMenu"><a href="#ContextMenu" class="headerlink" title="ContextMenu"></a>ContextMenu</h1><h3 id="ContextMenu上下文菜单"><a href="#ContextMenu上下文菜单" class="headerlink" title="ContextMenu上下文菜单"></a>ContextMenu上下文菜单</h3><ul><li>上下文菜单是通过调用ContextMenu接口中的方法来实现</li></ul><p><img src="/posts/b43dacf3ed69/image-20220404202328692.png" alt="image-20220404202328692"></p><ul><li>onCreateContextMenu()方法来生成ContextMenu对象</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">onCreateContextMenu(ContextMenu menu, View v,ContextMenu.ContextMenuInfo menuInfo)</span><br></pre></td></tr></table></figure><ul><li>创建上下文菜单的步骤：<ul><li>通过registerForContextMenu()方法为ContextMenu分配一个View对象</li><li>通过onCreateContextMenu()创建一个上下文对象</li></ul></li></ul><h3 id="使用XML资源生成菜单项的步骤："><a href="#使用XML资源生成菜单项的步骤：" class="headerlink" title="使用XML资源生成菜单项的步骤："></a>使用XML资源生成菜单项的步骤：</h3><ul><li>在res目录中创建menu子目录</li><li>在menu子目录中创建一个Menu Resource file（XML文件）</li><li>使用XML文件的资源ID，在Activity中将XML文件中所定义的菜单元素添加到menu对象中</li><li>判断资源ID，实现相应事件处理</li></ul><h3 id="测试样例代码-1"><a href="#测试样例代码-1" class="headerlink" title="测试样例代码"></a>测试样例代码</h3><ul><li>上下文菜单基于View，长按显示</li><li>上下文菜单中，一级菜单不显示icon图标，二级菜单才显示icon图标。（一级菜单设置了图标也没有用）</li></ul><p><img src="/posts/b43dacf3ed69/image-20220405144126837.png" alt="image-20220405144126837"></p><p><img src="/posts/b43dacf3ed69/image-20220405144016596.png" alt="image-20220405144016596"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.todayapplication.menu;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.annotation.NonNull;</span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.ContextMenu;</span><br><span class="line"><span class="keyword">import</span> android.view.MenuItem;</span><br><span class="line"><span class="keyword">import</span> android.view.SubMenu;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gallifrey.todayapplication.R;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ContextMenuActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> TextView mTvContext1,mTvContext2;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_context_menu);</span><br><span class="line">        mTvContext1=findViewById(R.id.tv_context_menu1);</span><br><span class="line">        mTvContext2=findViewById(R.id.tv_context_menu2);</span><br><span class="line"></span><br><span class="line">        registerForContextMenu(mTvContext1);</span><br><span class="line">        registerForContextMenu(mTvContext2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCreateContextMenu</span><span class="params">(ContextMenu menu, View v, ContextMenu.ContextMenuInfo menuInfo)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreateContextMenu(menu, v, menuInfo);</span><br><span class="line">        <span class="keyword">if</span>(v.equals(mTvContext1))&#123;</span><br><span class="line">            <span class="comment">//java方式创建contextMenu</span></span><br><span class="line">            menu.add(<span class="string">&quot;context java 1&quot;</span>);</span><br><span class="line">            SubMenu f=menu.addSubMenu(<span class="string">&quot;context java 2&quot;</span>);</span><br><span class="line">            f.add(<span class="string">&quot;context java 21&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">//xml方式创建contextMenu</span></span><br><span class="line">            getMenuInflater().inflate(R.menu.context_menu,menu);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onContextItemSelected</span><span class="params">(<span class="meta">@NonNull</span> MenuItem item)</span> &#123;</span><br><span class="line">        String str=<span class="string">&quot; &quot;</span>;</span><br><span class="line">        <span class="keyword">switch</span> (item.getItemId())&#123;</span><br><span class="line">            <span class="keyword">case</span> R.id.context_menu_cut:</span><br><span class="line">                str=<span class="string">&quot;context_menu_cut&quot;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.id.context_menu_paste:</span><br><span class="line">                str=<span class="string">&quot;context_menu_paste&quot;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">super</span>.onContextItemSelected(item);</span><br><span class="line">        &#125;</span><br><span class="line">        Toast.makeText(<span class="built_in">this</span>,str,Toast.LENGTH_LONG).show();</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.menu.ContextMenuActivity&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_context_menu1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;Context1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@id/tv_context_menu1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_context_menu2&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;Context2&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;39dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>在res文件夹下创建menu目录，然后建立context_meu.xml文件</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">menu</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/file&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:title</span>=<span class="string">&quot;File&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/edit&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:title</span>=<span class="string">&quot;Edit&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">menu</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">&quot;@+id/context_menu_cut&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:title</span>=<span class="string">&quot;context_cut&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/cut&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">&quot;@+id/context_menu_paste&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:title</span>=<span class="string">&quot;context_paste&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/paste&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">menu</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">menu</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="PopupMenu"><a href="#PopupMenu" class="headerlink" title="PopupMenu"></a>PopupMenu</h1><p>PopupMenu弹出菜单</p><h3 id="使用PopupMenu的步骤"><a href="#使用PopupMenu的步骤" class="headerlink" title="使用PopupMenu的步骤"></a>使用PopupMenu的步骤</h3><ol><li>创建PopupMenu的实例</li><li>填充实例</li><li>设置监听</li><li>展示弹出菜单</li></ol><h3 id="测试样例代码-2"><a href="#测试样例代码-2" class="headerlink" title="测试样例代码"></a>测试样例代码</h3><ul><li>一级菜单不显示icon图标，二级菜单才显示icon图标。（一级菜单设置了图标也没有用）</li></ul><p><img src="/posts/b43dacf3ed69/image-20220405152041828.png" alt="image-20220405152041828"></p><p><img src="/posts/b43dacf3ed69/image-20220405152059993.png" alt="image-20220405152059993"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.todayapplication.menu;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.MenuItem;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.Button;</span><br><span class="line"><span class="keyword">import</span> android.widget.PopupMenu;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gallifrey.todayapplication.R;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PopupMenuActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Button mBtnPopup0;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_popup_menu);</span><br><span class="line"></span><br><span class="line">        mBtnPopup0 =findViewById(R.id.btn_popup);</span><br><span class="line">        mBtnPopup0.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">                PopupMenu popupMenu=<span class="keyword">new</span> <span class="title class_">PopupMenu</span>(PopupMenuActivity.<span class="built_in">this</span>,view);</span><br><span class="line">                popupMenu.getMenuInflater().inflate(R.menu.popupo_menu,popupMenu.getMenu());</span><br><span class="line">                popupMenu.setOnMenuItemClickListener(<span class="keyword">new</span> <span class="title class_">PopupMenu</span>.OnMenuItemClickListener() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onMenuItemClick</span><span class="params">(MenuItem menuItem)</span> &#123;</span><br><span class="line">                        String str=<span class="string">&quot;&quot;</span>;</span><br><span class="line">                        <span class="keyword">switch</span> (menuItem.getItemId())&#123;</span><br><span class="line">                            <span class="keyword">case</span> R.id.popup_file:</span><br><span class="line">                                str=<span class="string">&quot;popup_file&quot;</span>;</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            <span class="keyword">case</span> R.id.popup_save:</span><br><span class="line">                                str=<span class="string">&quot;popup_save&quot;</span>;</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            <span class="keyword">case</span> R.id.popup_search:</span><br><span class="line">                                str=<span class="string">&quot;popup_search&quot;</span>;</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            <span class="keyword">default</span>:</span><br><span class="line">                                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        Toast.makeText(PopupMenuActivity.<span class="built_in">this</span>,str,Toast.LENGTH_LONG).show();</span><br><span class="line">                        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">                popupMenu.show();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.menu.PopupMenuActivity&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn_popup&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;弹出菜单&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>在res文件夹下创建menu目录，然后建立popup_meu.xml文件</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">menu</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">&quot;@+id/popup_file&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/file&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:title</span>=<span class="string">&quot;File&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:title</span>=<span class="string">&quot;Edit&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/edit&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">menu</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">&quot;@+id/popup_search&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:title</span>=<span class="string">&quot;Search&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/search&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">&quot;@+id/popup_save&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:title</span>=<span class="string">&quot;Save&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/save&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">menu</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">menu</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="Toolbar"><a href="#Toolbar" class="headerlink" title="Toolbar"></a>Toolbar</h1><h3 id="Toolbar操作栏"><a href="#Toolbar操作栏" class="headerlink" title="Toolbar操作栏"></a>Toolbar操作栏</h3><ul><li>Material Design风格的导航组件</li><li>取代Actionbar(Toolbar可以出现屏幕任意位置，允许开发者更多定制，Actionbar只能出现在屏幕最上方且开发有限)</li><li>为开发者预留许多可定制修改的余地：<ul><li>支持添加一个或多个的自定义组件</li><li>设置App的Logo图标</li><li>支持设置标题和子标题</li><li>设置导航栏图标</li><li>支持Action Menu</li></ul></li></ul><div class="table-container"><table><thead><tr><th>方法</th><th><strong>功能描述</strong></th></tr></thead><tbody><tr><td>setTitle(int resId)</td><td>设置标题</td></tr><tr><td>setSubtitle(int resId)</td><td>设置子标题</td></tr><tr><td>setTitleTextColor(int  color)</td><td>设置标题字体颜色</td></tr><tr><td>setSubtitleTextColor(int  color)</td><td>设置子标题字体颜色</td></tr><tr><td>setNavigationIcon(Drawable  icon)</td><td>设置导航栏的图标</td></tr><tr><td>setLogo(Drawable drawable)</td><td>设置Toolbar的Logo图标</td></tr></tbody></table></div><h3 id="Toolbar的简单应用"><a href="#Toolbar的简单应用" class="headerlink" title="Toolbar的简单应用"></a>Toolbar的简单应用</h3><p>Toolbar的使用步骤：</p><ul><li>在styles.xml文件中对原主题进行修改(使用Toolbar，必须设置不支持Actionbar)</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;AppTheme&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;Theme.AppCompat.Light.NoActionBar/&gt;</span></span></span><br></pre></td></tr></table></figure><ul><li>添加Toolbar组件</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">androidx.appcompat.widget.Toolbar</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/my_toolbar&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;?attr/actionBarSize&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">&quot;?attr/colorPrimary&quot;</span> &gt;</span></span><br></pre></td></tr></table></figure><ul><li>在Java代码中设置Toolbar</li></ul><h3 id="Toolbar的综合应用"><a href="#Toolbar的综合应用" class="headerlink" title="Toolbar的综合应用"></a>Toolbar的综合应用</h3><p>ToolBar可以包含导航按钮、应用的Logo、标题和子标题、若干个自定义View以及动作菜单等元素</p><p>ps:Toolbar的setTitle()方法需要在setSupportActionBar()方法之前调用，否则无效</p><h3 id="测试样例代码-3"><a href="#测试样例代码-3" class="headerlink" title="测试样例代码"></a>测试样例代码</h3><div class="tabs" id="toolbar"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#toolbar-1">前置工作</button></li><li class="tab"><button type="button" data-href="#toolbar-2">activity_toolbar.xml</button></li><li class="tab"><button type="button" data-href="#toolbar-3">toolbae_options_menu</button></li><li class="tab"><button type="button" data-href="#toolbar-4">AppCompatActivity类</button></li><li class="tab"><button type="button" data-href="#toolbar-5">细节修正</button></li><li class="tab"><button type="button" data-href="#toolbar-6">效果预览</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="toolbar-1"><ul><li>在themes目录themes.xml里面设置一个NoActionBar的style（使用Toolbar，必须设置不支持ActionBar）</li><li>在清单文件AndroidManifest.xml中，修改使用toolbar的activitty的themes（如果在application中设置会影响所有activity！）</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;Theme.TodayApplication.NoActionBar&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;Theme.AppCompat.DayNight.NoActionBar&quot;</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- Primary brand color. --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;colorPrimary&quot;</span>&gt;</span>@color/purple_500<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;colorPrimaryVariant&quot;</span>&gt;</span>@color/purple_700<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;colorOnPrimary&quot;</span>&gt;</span>@color/white<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- Secondary brand color. --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;colorSecondary&quot;</span>&gt;</span>@color/teal_200<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;colorSecondaryVariant&quot;</span>&gt;</span>@color/teal_700<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;colorOnSecondary&quot;</span>&gt;</span>@color/black<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- Status bar color. --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:statusBarColor&quot;</span> <span class="attr">tools:targetApi</span>=<span class="string">&quot;l&quot;</span>&gt;</span>?attr/colorPrimaryVariant<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- Customize your theme here. --&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">application</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">&quot;.MyApplication&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:allowBackup</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/ic_launcher&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:label</span>=<span class="string">&quot;@string/app_name&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:roundIcon</span>=<span class="string">&quot;@mipmap/ic_launcher_round&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:supportsRtl</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:theme</span>=<span class="string">&quot;@style/Theme.TodayApplication&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">activity</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:theme</span>=<span class="string">&quot;@style/Theme.TodayApplication.NoActionBar&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:name</span>=<span class="string">&quot;.toolbar.ToolbarActivity&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:exported</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="toolbar-2"><p>设置toolbar的布局文件</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.toolbar.ToolbarActivity&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">androidx.appcompat.widget.Toolbar</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/toolbar&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;?actionBarSize&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;?colorPrimary&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:title</span>=<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:titleTextColor</span>=<span class="string">&quot;#f00&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:titleTextAppearance</span>=<span class="string">&quot;@style/ToolbarTextStyle&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:navigationIcon</span>=<span class="string">&quot;@mipmap/back&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:popupTheme</span>=<span class="string">&quot;@style/ToolbarPopupTheme&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textStyle</span>=<span class="string">&quot;italic|bold&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:drawableLeft</span>=<span class="string">&quot;@mipmap/edit&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:drawableTint</span>=<span class="string">&quot;@color/white&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;新标题&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">&quot;#FF5722&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">            /&gt;</span></span><br><span class="line">        </span><br><span class="line">    <span class="tag">&lt;/<span class="name">androidx.appcompat.widget.Toolbar</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="toolbar-3"><ul><li>设置toolbar中菜单的布局文件</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">menu</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/toolbar_search&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:title</span>=<span class="string">&quot;Search&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/search&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:iconTint</span>=<span class="string">&quot;@color/white&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:showAsAction</span>=<span class="string">&quot;ifRoom&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:title</span>=<span class="string">&quot;Setting&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/setting&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:showAsAction</span>=<span class="string">&quot;always&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">menu</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">&quot;@+id/toolbar_menu_cut&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/cut&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:title</span>=<span class="string">&quot;Cut&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">&quot;@+id/toolbar_menu_copy&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/copy&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:title</span>=<span class="string">&quot;Copy&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">menu</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">menu</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="toolbar-4"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.todayapplication.toolbar;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.annotation.NonNull;</span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.widget.Toolbar;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.ContextMenu;</span><br><span class="line"><span class="keyword">import</span> android.view.Menu;</span><br><span class="line"><span class="keyword">import</span> android.view.MenuItem;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gallifrey.todayapplication.R;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ToolbarActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Toolbar mToolbar;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_toolbar);</span><br><span class="line"></span><br><span class="line">        mToolbar=findViewById(R.id.toolbar);</span><br><span class="line">        <span class="comment">//Java代码中设置标题优先级比xml中设置高</span></span><br><span class="line">        <span class="comment">//要设置空标题，必须要在java代码中设置</span></span><br><span class="line">        <span class="comment">//setTitle()必须要在setSupportActionBar()前面才能生效</span></span><br><span class="line">        mToolbar.setTitle(<span class="string">&quot;一级标题&quot;</span>);</span><br><span class="line"></span><br><span class="line">        setSupportActionBar(mToolbar);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//监听必须在setSupportActionBar()下面才能生效</span></span><br><span class="line">        mToolbar.setNavigationOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line">                finish();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onCreateOptionsMenu</span><span class="params">(Menu menu)</span> &#123;</span><br><span class="line">        getMenuInflater().inflate(R.menu.toolbae_options_menu,menu);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.onCreateOptionsMenu(menu);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onOptionsItemSelected</span><span class="params">(<span class="meta">@NonNull</span> MenuItem item)</span> &#123;</span><br><span class="line">        String str=<span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">switch</span> (item.getItemId())&#123;</span><br><span class="line">            <span class="keyword">case</span> R.id.toolbar_search:</span><br><span class="line">                str=<span class="string">&quot;toolbar_search&quot;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.id.toolbar_menu_cut:</span><br><span class="line">                str=<span class="string">&quot;toolbar_menu_cut&quot;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> R.id.toolbar_menu_copy:</span><br><span class="line">                str=<span class="string">&quot;toolbar_menu_copy&quot;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">super</span>.onOptionsItemSelected(item);</span><br><span class="line">        &#125;</span><br><span class="line">        Toast.makeText(<span class="built_in">this</span>,str,Toast.LENGTH_LONG).show();</span><br><span class="line">       <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="toolbar-5"><ul><li>在style.xml设置弹出时在不掩盖锚点</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;ToolbarTextStyle&quot;</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:textSize&quot;</span>&gt;</span>30sp<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:textStyle&quot;</span>&gt;</span>bold<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;ToolbarPopupTheme&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;ThemeOverlay.AppCompat.DayNight&quot;</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;actionOverflowMenuStyle&quot;</span>&gt;</span>@style/OverFlowMenuStyle<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;OverFlowMenuStyle&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;Widget.AppCompat.PopupMenu.Overflow&quot;</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;overlapAnchor&quot;</span>&gt;</span>false<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="toolbar-6"><p><img src="/posts/b43dacf3ed69/image-20220405171009654.png" alt="image-20220405171009654"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>]]></content>
    
    
    <summary type="html">本章内容为AndroidStudio中Menu和Toolbar的使用</summary>
    
    
    
    <category term="Android学习笔记" scheme="https://gallifrey.asia/categories/Android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    <category term="UI进阶" scheme="https://gallifrey.asia/categories/Android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/UI%E8%BF%9B%E9%98%B6/"/>
    
    
    <category term="Android" scheme="https://gallifrey.asia/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>Android_4.1Fragment</title>
    <link href="https://gallifrey.asia/posts/4a295e5b0938/"/>
    <id>https://gallifrey.asia/posts/4a295e5b0938/</id>
    <published>2022-04-04T02:53:54.000Z</published>
    <updated>2022-04-04T02:53:54.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><ul><li>本文是根据上海应用技术大学余艳芳老师的移动应用课程写的上课笔记。</li><li>部分素材和代码没有给出（例如drawable中的文件代码），请读者自己补全或者删除，或者可以到本人github下载完整素材和代码。</li><li>完整的项目在本人的GitHub仓库中，以下是相关链接：<a href="https://github.com/ufovsmba/TodayApplication">https://github.com/ufovsmba/TodayApplication</a></li></ul><h1 id="Fragment基础知识"><a href="#Fragment基础知识" class="headerlink" title="Fragment基础知识"></a>Fragment基础知识</h1><h3 id="Fragment碎片"><a href="#Fragment碎片" class="headerlink" title="Fragment碎片"></a>Fragment碎片</h3><ul><li><p>fragment必须依赖Activity存在，必须嵌入到Activity当中，不能独立存在。</p></li><li><p>Android从3.0开始引入Fragment（碎片）</p></li><li>允许将Activity拆分成多个完全独立封装的可重用的组件</li><li>每个组件拥有自己的生命周期和UI布局</li><li>为不同型号、尺寸、分辨率的设备提供统一的UI设计方案</li></ul><p><img src="/posts/4a295e5b0938/image-20220404111008148.png" alt="image-20220404111008148"></p><p><img src="/posts/4a295e5b0938/image-20220404111013831.png" alt="image-20220404111013831"></p><ul><li>自定义的Fragment必须继承Fragment类或其子类</li></ul><p><img src="/posts/4a295e5b0938/image-20220404111037940.png" alt="image-20220404111037940"></p><h3 id="创建Fragment"><a href="#创建Fragment" class="headerlink" title="创建Fragment"></a>创建Fragment</h3><ul><li>通常在创建Fragment时，需要实现方法：<ul><li>onCreateView()</li></ul></li><li>将Fragment加载到Activity中主要有两种方式：<ul><li>把Fragment添加到Activity的布局文件中</li><li>在Activity的代码中动态添加Fragment</li></ul></li></ul><h3 id="管理Fragment"><a href="#管理Fragment" class="headerlink" title="管理Fragment"></a>管理Fragment</h3><ul><li>通过FragmentManager实现Fragment对象的管理</li><li>通过getFragmentManager()获取FragmentManager对象</li><li><p>FragmentManager能够完成以下三方面的操作：</p><ul><li>通过findFragmentById()或findFragmentByTag()方法，来获取Activity中已存在的Fragment对象</li><li>通过popBackStack()方法将Fragment从Activity的后退栈中弹出</li><li>通过addOnBackStackChangedListerner()方法来注册一个侦听器以监视后退栈的变化</li></ul></li><li><p>获取FragmentTransaction对象</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">FragmentManager fragmentManager=getFragmentManager();</span><br><span class="line">FragmentTransaction fragmentTransaction=fragmentManager.beginTransaction();</span><br></pre></td></tr></table></figure><p>ps:FragmentTransaction被称作Fragment事务，与数据库事务类似，Fragment事务代表了Activity对Fragment执行的多个改变操作。</p><ul><li>使用FragmentTransaction</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建一个新的Fragment对象</span></span><br><span class="line">Fragment newFragment=<span class="keyword">new</span> <span class="title class_">ExampleFragment</span>();</span><br><span class="line"><span class="comment">//通过FragmentManager获取Fragment事务对象</span></span><br><span class="line">FragmentTransaction transaction=getFragmentManager().beginTransaction();</span><br><span class="line"><span class="comment">//通过replace()方法把fragment_container替换成新的Fragment对象 </span></span><br><span class="line">transaction.replace(R.id.fragment_container,newFragment);</span><br><span class="line"><span class="comment">//添加到回退栈 </span></span><br><span class="line">transaction.addToBackStack(<span class="literal">null</span>);</span><br><span class="line"><span class="comment">//提交事务</span></span><br><span class="line">transaction.commit();</span><br></pre></td></tr></table></figure><p>事务中动作的执行顺序可以随意，但需注意以下两点： </p><ul><li>程序的最后必须调用commit()方法</li><li>程序中添加了多个Fragment对象，显示的顺序跟添加顺序一致</li><li>当删除Fragment对象时，在没有调用addToBackStack()方法情况下，Fragment对象会被销毁</li></ul><p>ps:调用commit()后，事务并不会马上提交，而是会在Activity的UI线程中等待直到线程能执行的时候才执行。</p><h3 id="与Activity通讯"><a href="#与Activity通讯" class="headerlink" title="与Activity通讯"></a>与Activity通讯</h3><ul><li>Fragment获取其所在的Activity中的组件</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">View listView=getActivity().findViewById(R.id.list);</span><br></pre></td></tr></table></figure><ul><li>Activity获取指定Fragment实例</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ExampleFragment</span> <span class="variable">fragment</span> <span class="operator">=</span> (ExampleFragment)getFragmentManager()</span><br><span class="line">.findFragmentById(R.id.example_fragment)</span><br></pre></td></tr></table></figure><ul><li>在Fragment中定义回调接口</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">FragmentA</span> <span class="keyword">extends</span> <span class="title class_">ListFragment</span> &#123; </span><br><span class="line">......省略</span><br><span class="line">    <span class="comment">//Activity必须实现下面的接口 </span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">OnNewsSelectedListener</span>&#123;</span><br><span class="line">    <span class="comment">//传递当前被选中的标题的id </span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onNewsSelected</span><span class="params">(<span class="type">long</span> id)</span>; </span><br><span class="line">    &#125;</span><br><span class="line">......省略</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><ul><li>使用onAttach()方法检查Activity是否实现回调接口</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">FragmentA</span> <span class="keyword">extends</span> <span class="title class_">ListFragment</span> &#123; </span><br><span class="line">    OnNewsSelectedListener mListener;</span><br><span class="line">    ......省略</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onAttach</span><span class="params">(Activity activity)</span>&#123;</span><br><span class="line"><span class="built_in">super</span>.onAttach(activity);</span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    mListener =(OnNewsSelectedListener)activity;</span><br><span class="line">    &#125;<span class="keyword">catch</span>(ClassCastException e)&#123; </span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ClassCastException</span>(activity.toString()</span><br><span class="line">+<span class="string">&quot;必须继承接口 OnNewsSelectedListener&quot;</span>); </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ......省略</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Fragment的生命周期"><a href="#Fragment的生命周期" class="headerlink" title="Fragment的生命周期"></a>Fragment的生命周期</h1><h3 id="Fragment的生命周期状态"><a href="#Fragment的生命周期状态" class="headerlink" title="Fragment的生命周期状态"></a>Fragment的生命周期状态</h3><ul><li>Fragment的生命周期具有以下四个状态：<ul><li>活动状态:  onResume()</li><li>暂停状态:  onPause()</li><li>停止状态:  onStop() </li><li>销毁状态:  onDestroyView()  || onDestroy()</li></ul></li></ul><p><img src="https://www.runoob.com/wp-content/uploads/2015/08/31722863.jpg" alt="img"></p><p><img src="/posts/4a295e5b0938/image-20220404113812287.png" alt="image-20220404113812287"></p><p>ps： onActivityCreated()方法已经过期 </p><div class="table-container"><table><thead><tr><th><strong>方法</strong></th><th style="text-align:left"><strong>功能描述</strong></th></tr></thead><tbody><tr><td>onAttach()</td><td style="text-align:left">当一个Fragment对象关联到一个Activity时被调用</td></tr><tr><td>onCreate()</td><td style="text-align:left">初始化创建Fragment对象时被调用</td></tr><tr><td>onCreateView()</td><td style="text-align:left">当Activity获得Fragment的布局时调用此方法</td></tr><tr><td>onActivityCreated()</td><td style="text-align:left">当Activity对象完成自己的onCreate()方法时调用 (该方法已经过期)</td></tr><tr><td>onStart()</td><td style="text-align:left">Fragment对象在UI界面可见时调用</td></tr><tr><td>onResume()</td><td style="text-align:left">Fragment对象的UI可以与用户交互时调用</td></tr><tr><td>onPause()</td><td style="text-align:left">由Activity对象转为onPause状态时调用</td></tr><tr><td>onStop()</td><td style="text-align:left">有组件完全遮挡，或者宿主Activity对象转为onStop状态时调用</td></tr><tr><td>onDestroyView()</td><td style="text-align:left">Fragment对象清理View资源时调用，即移除Fragment中的视图</td></tr><tr><td>onDestroy()</td><td style="text-align:left">Fragment对象完成对象清理View资源时调用</td></tr><tr><td>onDetach()</td><td style="text-align:left">当Fragment被从Activity中删掉时被调用</td></tr></tbody></table></div><h3 id="Fragment和Activity两者之间生命周期的关系"><a href="#Fragment和Activity两者之间生命周期的关系" class="headerlink" title="Fragment和Activity两者之间生命周期的关系"></a>Fragment和Activity两者之间生命周期的关系</h3><ul><li><p>Activity直接影响其所包含的Fragment的生命周期</p></li><li><p>Fragment的回调方法要比Activity多，多出的方法主要用于与Activity的交互</p></li><li><p>当Activity进入运行状态时（即running状态），才允许添加或删除Fragment</p></li><li><p>有当Activity处于resumed状态时，Fragment的生命周期才能独立运转</p></li><li><p>其他阶段依赖于Activity的生命周期</p></li></ul><p><img src="/posts/4a295e5b0938/image-20220404114229962.png" alt="image-20220404114229962"></p><h3 id="静态方式"><a href="#静态方式" class="headerlink" title="静态方式"></a>静态方式</h3><p><img src="https://www.runoob.com/wp-content/uploads/2015/08/14443487.jpg" alt="img"></p><ul><li><p>Fragment的生命周期调用过程</p><ul><li><p>1当首次展示布局页面时，其生命周期方法调用的顺序是：</p><ul><li><p>onAttach()</p></li><li><p>onCreate()</p></li><li><p>onCreateView()</p></li><li><p>onStart()</p></li><li><p>onResume()</p></li></ul></li><li><p>当关闭手机屏幕或者手机屏幕变暗时，其生命周期方法调用顺序是：</p><ul><li>onPause()</li></ul></li><li>onStop()</li></ul></li><li><p>使用时方法，在Activity布局文件中写入fragment，属性中加入android：name，值写关联的Fragment类</p></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">fragment</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">&quot;com.gallifrey.todayapplication.fragment.MessageFragment&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/fl_container&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><h3 id="动态方式"><a href="#动态方式" class="headerlink" title="动态方式"></a>动态方式</h3><p><img src="https://www.runoob.com/wp-content/uploads/2015/08/29546434.jpg" alt="img"></p><ul><li>通过重写Fragment生命周期的方法</li><li>在Activity代码中动态使用Fragment</li></ul><h3 id="测试样例代码"><a href="#测试样例代码" class="headerlink" title="测试样例代码"></a>测试样例代码</h3><p><img src="/posts/4a295e5b0938/image-20220404183956838.png" alt="image-20220404183956838"></p><p><img src="/posts/4a295e5b0938/image-20220404191200920.png" alt="image-20220404191200920"></p><p><img src="/posts/4a295e5b0938/image-20220404191323103.png" alt="image-20220404191323103"></p><ul><li>FragmentActivity.java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.todayapplication;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"><span class="keyword">import</span> androidx.fragment.app.Fragment;</span><br><span class="line"><span class="keyword">import</span> androidx.fragment.app.FragmentManager;</span><br><span class="line"><span class="keyword">import</span> androidx.fragment.app.FragmentTransaction;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.widget.RadioGroup;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gallifrey.todayapplication.fragment.DiscoverFragment;</span><br><span class="line"><span class="keyword">import</span> com.gallifrey.todayapplication.fragment.MeFragment;</span><br><span class="line"><span class="keyword">import</span> com.gallifrey.todayapplication.fragment.MessageFragment;</span><br><span class="line"><span class="keyword">import</span> com.gallifrey.todayapplication.fragment.PhoneFragment;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FragmentActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title class_">PhoneFragment</span>.IPhoneCallBack&#123;</span><br><span class="line">    <span class="keyword">private</span> FragmentManager fragmentManager;</span><br><span class="line">    <span class="keyword">private</span> FragmentTransaction fragmentTransaction;</span><br><span class="line">    <span class="keyword">private</span> PhoneFragment phoneFragment;</span><br><span class="line">    <span class="keyword">private</span> MessageFragment messageFragment;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> MeFragment meFragment;</span><br><span class="line">    <span class="keyword">private</span> DiscoverFragment discoverFragment;</span><br><span class="line">    <span class="keyword">private</span> RadioGroup mRg;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Fragment&gt; fragmentList=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_fragment);</span><br><span class="line"></span><br><span class="line">        mRg=findViewById(R.id.fl_rg);</span><br><span class="line"></span><br><span class="line">        fragmentManager=getSupportFragmentManager();</span><br><span class="line"></span><br><span class="line">        messageFragment =<span class="keyword">new</span> <span class="title class_">MessageFragment</span>();</span><br><span class="line">        fragmentList.add(messageFragment);</span><br><span class="line"></span><br><span class="line">        hideOtherFragment(messageFragment,<span class="literal">true</span>);</span><br><span class="line">        mRg.setOnCheckedChangeListener(<span class="keyword">new</span> <span class="title class_">RadioGroup</span>.OnCheckedChangeListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCheckedChanged</span><span class="params">(RadioGroup radioGroup, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">                <span class="keyword">switch</span> (i)&#123;</span><br><span class="line">                    <span class="keyword">case</span> R.id.fl_rb_message:</span><br><span class="line">                        hideOtherFragment(messageFragment,<span class="literal">false</span>);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> R.id.fl_rb_phone:</span><br><span class="line">                        <span class="keyword">if</span>(phoneFragment==<span class="literal">null</span>)&#123;</span><br><span class="line">                            phoneFragment=PhoneFragment.newInstance(<span class="string">&quot;phone 12315&quot;</span>);</span><br><span class="line">                            fragmentList.add(phoneFragment);</span><br><span class="line">                            hideOtherFragment(phoneFragment,<span class="literal">true</span>);</span><br><span class="line">                        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                            hideOtherFragment(phoneFragment,<span class="literal">false</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> R.id.fl_rb_me:</span><br><span class="line">                        <span class="keyword">if</span>(meFragment==<span class="literal">null</span>)&#123;</span><br><span class="line">                            meFragment=<span class="keyword">new</span> <span class="title class_">MeFragment</span>();</span><br><span class="line">                            fragmentList.add(meFragment);</span><br><span class="line">                            hideOtherFragment(meFragment,<span class="literal">true</span>);</span><br><span class="line">                        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                            hideOtherFragment(meFragment,<span class="literal">false</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> R.id.fl_rb_discover:</span><br><span class="line">                        <span class="keyword">if</span>(phoneFragment==<span class="literal">null</span>)&#123;</span><br><span class="line">                            discoverFragment=<span class="keyword">new</span> <span class="title class_">DiscoverFragment</span>();</span><br><span class="line">                            fragmentList.add(discoverFragment);</span><br><span class="line">                            hideOtherFragment(discoverFragment,<span class="literal">true</span>);</span><br><span class="line">                        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                            hideOtherFragment(discoverFragment,<span class="literal">false</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//隐藏其他fragment</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">hideOtherFragment</span><span class="params">(Fragment currentFragment,<span class="type">boolean</span> b)</span>&#123;</span><br><span class="line">        fragmentTransaction=fragmentManager.beginTransaction();<span class="comment">//创建事务</span></span><br><span class="line">        <span class="keyword">if</span>(b) &#123;</span><br><span class="line">            fragmentTransaction.add(R.id.fl_container, currentFragment);<span class="comment">//如果从未加入，则将当前Fragment添加到activity</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(Fragment tempFragment:fragmentList)&#123;</span><br><span class="line">            <span class="keyword">if</span>(tempFragment.equals(currentFragment))&#123;</span><br><span class="line">                fragmentTransaction.show(tempFragment);</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                fragmentTransaction.hide(tempFragment);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        fragmentTransaction.commitAllowingStateLoss();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setData</span><span class="params">(String str)</span> &#123;</span><br><span class="line">        setTitle(str);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>activity_fragment.xml</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.FragmentActivity&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">FrameLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/fl_container&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">View</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;2dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;#E4E3E3&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">RadioGroup</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:checkedButton</span>=<span class="string">&quot;@id/fl_rb_message&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/fl_rg&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RadioButton</span></span></span><br><span class="line"><span class="tag">           <span class="attr">style</span>=<span class="string">&quot;@style/flRadioButton&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:paddingVertical</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/fl_rb_message&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;消息&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:drawableTop</span>=<span class="string">&quot;@drawable/fl_rb_message_bg&quot;</span></span></span><br><span class="line"><span class="tag">            /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RadioButton</span></span></span><br><span class="line"><span class="tag">            <span class="attr">style</span>=<span class="string">&quot;@style/flRadioButton&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:paddingVertical</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/fl_rb_phone&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;通信录&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:drawableTop</span>=<span class="string">&quot;@drawable/fl_rb_phone_bg&quot;</span></span></span><br><span class="line"><span class="tag">            /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RadioButton</span></span></span><br><span class="line"><span class="tag">            <span class="attr">style</span>=<span class="string">&quot;@style/flRadioButton&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:paddingVertical</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/fl_rb_discover&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;发现&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:drawableTop</span>=<span class="string">&quot;@drawable/fl_rb_discover_bg&quot;</span></span></span><br><span class="line"><span class="tag">            /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RadioButton</span></span></span><br><span class="line"><span class="tag">            <span class="attr">style</span>=<span class="string">&quot;@style/flRadioButton&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:paddingVertical</span>=<span class="string">&quot;5dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/fl_rb_me&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;我&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:drawableTop</span>=<span class="string">&quot;@drawable/fl_rb_me_bg&quot;</span></span></span><br><span class="line"><span class="tag">            /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">RadioGroup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>PhoneFragment.java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gallifrey.todayapplication.fragment;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.util.Log;</span><br><span class="line"><span class="keyword">import</span> android.view.LayoutInflater;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.annotation.NonNull;</span><br><span class="line"><span class="keyword">import</span> androidx.annotation.Nullable;</span><br><span class="line"><span class="keyword">import</span> androidx.fragment.app.Fragment;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gallifrey.todayapplication.R;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PhoneFragment</span> <span class="keyword">extends</span> <span class="title class_">Fragment</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String ARG_PARAM=<span class="string">&quot;param1&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG=<span class="string">&quot;PhoneFragment&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> String param;</span><br><span class="line">    <span class="keyword">private</span> IPhoneCallBack iPhoneCallBack;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">PhoneFragment</span><span class="params">()</span>&#123;</span><br><span class="line">        Log.i(TAG, <span class="string">&quot;PhoneFragment: &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> PhoneFragment <span class="title function_">newInstance</span><span class="params">(String param1)</span>&#123;</span><br><span class="line">        Log.i(TAG, <span class="string">&quot;newInstance: into&quot;</span>);</span><br><span class="line">        PhoneFragment phoneFragment=<span class="keyword">new</span> <span class="title class_">PhoneFragment</span>();</span><br><span class="line">        Bundle args=<span class="keyword">new</span> <span class="title class_">Bundle</span>();</span><br><span class="line">        args.putString(ARG_PARAM,param1);</span><br><span class="line">        phoneFragment.setArguments(args);</span><br><span class="line">        Log.i(TAG, <span class="string">&quot;newInstance: out&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> phoneFragment;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onAttach</span><span class="params">(<span class="meta">@NonNull</span> Context context)</span> &#123;</span><br><span class="line">        Log.i(TAG, <span class="string">&quot;onAttach: &quot;</span>);</span><br><span class="line">        <span class="built_in">super</span>.onAttach(context);</span><br><span class="line">        iPhoneCallBack= (IPhoneCallBack) context;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(<span class="meta">@Nullable</span> Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        Log.i(TAG, <span class="string">&quot;onCreate: &quot;</span>);</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        <span class="keyword">if</span>(getArguments()!=<span class="literal">null</span>)&#123;</span><br><span class="line">            param=getArguments().getString(ARG_PARAM);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Nullable</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> View <span class="title function_">onCreateView</span><span class="params">(<span class="meta">@NonNull</span> LayoutInflater inflater, <span class="meta">@Nullable</span> ViewGroup container, <span class="meta">@Nullable</span> Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        Log.i(TAG, <span class="string">&quot;onCreateView: &quot;</span>);</span><br><span class="line">        View view=inflater.inflate(R.layout.fragment_phone,container,<span class="literal">false</span>);</span><br><span class="line">        TextView textView=view.findViewById(R.id.fl_tv);</span><br><span class="line">        textView.setText(param);</span><br><span class="line">        iPhoneCallBack.setData(<span class="string">&quot;通讯录Activity&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> view;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDestroyView</span><span class="params">()</span> &#123;</span><br><span class="line">        Log.i(TAG, <span class="string">&quot;onDestroyView: &quot;</span>);</span><br><span class="line">        <span class="built_in">super</span>.onDestroyView();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDestroy</span><span class="params">()</span> &#123;</span><br><span class="line">        Log.i(TAG, <span class="string">&quot;onDestroy: &quot;</span>);</span><br><span class="line">        <span class="built_in">super</span>.onDestroy();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDetach</span><span class="params">()</span> &#123;</span><br><span class="line">        Log.i(TAG, <span class="string">&quot;onDetach: &quot;</span>);</span><br><span class="line">        <span class="built_in">super</span>.onDetach();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IPhoneCallBack</span>&#123;</span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">setData</span><span class="params">(String str)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>fragment_phone.xml</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">FrameLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.fragment.PhoneFragment&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/fl_tv&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;我是通讯录&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;32sp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>styles.xml</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;blue_textview&quot;</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:textSize&quot;</span>&gt;</span>30sp<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:textColor&quot;</span>&gt;</span>#673AB7<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:textStyle&quot;</span>&gt;</span>bold|italic<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;flRadioButton&quot;</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:layout_width&quot;</span>&gt;</span>0dp<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:layout_height&quot;</span>&gt;</span>match_parent<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:layout_weight&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:textSize&quot;</span>&gt;</span>24sp<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:gravity&quot;</span>&gt;</span>center<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:button&quot;</span>&gt;</span>@null<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:textColor&quot;</span>&gt;</span>@drawable/fl_rb_textcolor<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">本章内容为Fragment的学习</summary>
    
    
    
    <category term="Android学习笔记" scheme="https://gallifrey.asia/categories/Android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    <category term="UI进阶" scheme="https://gallifrey.asia/categories/Android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/UI%E8%BF%9B%E9%98%B6/"/>
    
    
    <category term="Android" scheme="https://gallifrey.asia/tags/Android/"/>
    
  </entry>
  
</feed>
